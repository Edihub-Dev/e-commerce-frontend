import{r as h,j as e,A as fe,m as X}from"./vendor-2d1PFKo4.js";import{u as ye,I as Ne,ab as je,C as f,al as ve}from"./index-Bpx0OnSg.js";import{S as Y}from"./Sidebar-Blgfai62.js";import{N as we}from"./Navbar-K_t1OsQh.js";import{u as Se,a as ke}from"./hooks-W65Onizy.js";import{A as Pe}from"./arrow-left-fjWLrcm4.js";import{L as J}from"./loader-circle-DRAKHMK_.js";import{I as Ae}from"./image-o7Bv0ro0.js";import{C as W}from"./cloud-upload-CshyEAzQ.js";import"./react-BzrpNAyj.js";import"./house-Bx4yg0fx.js";import"./ticket-percent-OJlGKFU7.js";import"./package-C_UWcLgd.js";import"./shopping-bag-Dv9EZFsL.js";import"./log-out-BEyQjTNl.js";const Ce=[{label:"Published",value:"published"},{label:"Archived",value:"archived"}],Fe=[{label:"In Stock",value:"in_stock"},{label:"Low Stock",value:"low_stock"},{label:"Out of Stock",value:"out_of_stock"},{label:"Preorder",value:"preorder"}],Z=["S","M","L","XL","XXL"],ze=[{matcher:/keychain/i,hsnCode:"8305",gstRate:18},{matcher:/ceramic\s+coffee\s+mug|coffee\s+mug|mug/i,hsnCode:"6912",gstRate:12},{matcher:/executive\s+diary|pen\s+set/i,hsnCode:"4820",gstRate:18},{matcher:/white\s+logo\s+cap|cap/i,hsnCode:"6501",gstRate:18},{matcher:/diary/i,hsnCode:"4820",gstRate:18},{matcher:/\bpen\b/i,hsnCode:"9608",gstRate:18},{matcher:/t\s*-?shirt|polo/i,hsnCode:"6109",gstRate:5}],Re=(m="")=>{const c=m.toString().trim();return c&&ze.find(u=>u.matcher.test(c))||null},k=m=>{if(m==null)return"P5";const c=m.toString().trim().toUpperCase();if(/^P\d{1,2}$/.test(c))return c;const u=parseInt(c.replace(/[^0-9]/g,""),10);return!Number.isNaN(u)&&u>0?`P${u}`:"P5"},Te=m=>{const c=k(m),u=parseInt(c.slice(1),10);return Number.isNaN(u)?Number.POSITIVE_INFINITY:u},T=()=>Z.map(m=>({label:m,isAvailable:!0,stock:0})),S=m=>{if(!Array.isArray(m)||!m.length)return T();const c=new Set,u=m.map(s=>{var N;const d=(N=s==null?void 0:s.label)==null?void 0:N.toString().trim().toUpperCase();return!d||c.has(d)?null:(c.add(d),{label:d,isAvailable:!!((s==null?void 0:s.isAvailable)??!0),stock:Math.max(Number((s==null?void 0:s.stock)??0),0)})}).filter(Boolean);return Z.forEach(s=>{c.has(s)||u.push({label:s,isAvailable:!0,stock:0})}),u.length?u:T()},Ie=m=>(Array.isArray(m)?m:[]).reduce((u,s)=>{if(!s||!s.isAvailable)return u;const d=Number(s.stock??0);return Number.isFinite(d)?u+Math.max(d,0):u},0),y={name:"",sku:"",description:"",category:"",brand:"",status:"published",availabilityStatus:"in_stock",price:"",originalPrice:"",discountPercentage:"",saveAmount:"",stock:"",lowStockThreshold:"",thumbnail:"",gallery:[],isFeatured:!1,keyFeatures:[""],sizes:T(),showSizes:!0,categoryPriority:"",hsnCode:"",gstRate:""},R="adminAddProductFormState",Ee=()=>{if(typeof window>"u")return y;try{const m=window.localStorage.getItem(R);if(!m)return y;const c=JSON.parse(m),{rating:u,reviews:s,hsnCode:d,gstRate:N,...P}=c||{},i=Array.isArray(c.keyFeatures)&&c.keyFeatures.length?[...c.keyFeatures]:[""],A=Array.isArray(c.gallery)?[...c.gallery]:[];return{...y,...P,keyFeatures:i,gallery:A,isFeatured:!!c.isFeatured,showSizes:typeof c.showSizes=="boolean"?c.showSizes:y.showSizes,sizes:S(c.sizes),categoryPriority:(()=>{const j=c.categoryPriority;return typeof j=="string"&&j.trim()?k(j):y.categoryPriority})(),hsnCode:typeof d=="string"?d:d!=null?String(d):y.hsnCode,gstRate:N!=null&&N!==""?String(N):y.gstRate}}catch(m){return console.warn("Failed to restore saved admin add product form",m),y}},Je=()=>{const m=Se(),c=ye(),{items:u}=ke(t=>t.adminProducts),[s,d]=h.useState(()=>Ee()),[N,P]=h.useState(!1),[i,A]=h.useState({}),[j,$]=h.useState(!1),[Q,O]=h.useState(!1),[ee,B]=h.useState(!1),{user:b,logout:te}=Ne(),[se,C]=h.useState(!1),[ae,I]=h.useState(!1),[re,E]=h.useState(!1),le=()=>{d(y),P(!1),I(!1),E(!1),A({}),typeof window<"u"&&window.localStorage.removeItem(R),c("/admin/products")};h.useEffect(()=>{if(!(typeof window>"u"))try{const{rating:t,reviews:a,...r}=s,o=S(s.sizes),l={...r,keyFeatures:Array.isArray(s.keyFeatures)&&s.keyFeatures.length?s.keyFeatures:[""],gallery:Array.isArray(s.gallery)?s.gallery:[],sizes:o,showSizes:!!s.showSizes,categoryPriority:(()=>{const n=s.categoryPriority;return typeof n=="string"&&n.trim()?k(n):""})()};window.localStorage.setItem(R,JSON.stringify(l))}catch(t){console.warn("Failed to persist admin add product form",t)}},[s]),h.useEffect(()=>{u.length||m(je({limit:100}))},[m,u.length]);const L=h.useMemo(()=>{const t=new Set;return u.forEach(a=>{a.category&&t.add(a.category)}),Array.from(t)},[u]),M=h.useMemo(()=>{const t=new Map;return u.forEach(a=>{var x;const r=(x=a==null?void 0:a.category)==null?void 0:x.toString().trim();if(!r)return;const o=k(a==null?void 0:a.categoryPriority),l=Te(o),n=t.get(r);(!n||l<n.numeric)&&t.set(r,{label:o,numeric:l})}),t},[u]),_=h.useMemo(()=>{const t=new Set;return u.forEach(a=>{a.brand&&t.add(a.brand)}),Array.from(t)},[u]),F=h.useMemo(()=>S(s.sizes),[s.sizes]),D=h.useMemo(()=>Ie(F),[F]),oe=["out_of_stock","preorder"],z=t=>oe.includes(t),g=t=>a=>{const r=a.target.value;t==="categoryPriority"?P(!0):t==="category"&&P(!1),d(o=>{const l={...o,[t]:r};if(t==="availabilityStatus"&&z(r)&&(l.stock="0"),t==="category"){const n=r==null?void 0:r.toString().trim();if(!n)l.categoryPriority=y.categoryPriority;else{const x=M.get(n);l.categoryPriority=x?x.label:y.categoryPriority}}if(t==="name"){const n=Re(r);n&&((!ae||!o.hsnCode)&&(l.hsnCode=n.hsnCode,I(!1)),(!re||!o.gstRate)&&(l.gstRate=n.gstRate.toString(),E(!1)))}return l})},U=t=>a=>{const r=a.target.value;t==="hsnCode"&&I(!0),t==="gstRate"&&E(!0),d(o=>({...o,[t]:r}))},G=t=>a=>{const{checked:r}=a.target;d(o=>({...o,[t]:r}))},V=t=>a=>{const{value:r}=a.target;d(o=>{const l={...o,[t]:r},n=t==="price"?r:l.price,x=t==="originalPrice"?r:l.originalPrice,w=parseFloat(n),p=parseFloat(x);if(!Number.isNaN(w)&&!Number.isNaN(p)&&p>=w&&p>0){const K=p-w;l.discountPercentage=Math.round(K/p*100).toString(),l.saveAmount=K.toFixed(2)}else l.discountPercentage="",l.saveAmount="";return l})},q=3*1024*1024,H=t=>new Promise((a,r)=>{const o=new FileReader;o.onload=()=>a(o.result),o.onerror=()=>r(new Error("Failed to read file")),o.readAsDataURL(t)}),ie=async t=>{var r;const a=(r=t.target.files)==null?void 0:r[0];if(a){if(!a.type.startsWith("image/")){f.error("Please upload an image file"),t.target.value="";return}if(a.size>q){f.error("Image must be smaller than 3MB"),t.target.value="";return}O(!0);try{const o=await H(a);d(l=>({...l,thumbnail:o})),f.success("Thumbnail added")}catch{f.error("Failed to load image")}finally{O(!1),t.target.value=""}}},ne=async t=>{const a=Array.from(t.target.files||[]);if(!a.length)return;if(a.some(l=>!l.type.startsWith("image/"))){f.error("All files must be images"),t.target.value="";return}if(a.find(l=>l.size>q)){f.error("Each image must be under 3MB"),t.target.value="";return}B(!0);try{const l=await Promise.all(a.map(H));d(n=>{const x=Array.isArray(n.gallery)?n.gallery:[],w=l.filter(p=>!x.includes(p));return{...n,gallery:[...x,...w]}}),f.success(`Added ${l.length} image${l.length>1?"s":""}`)}catch{f.error("Failed to load gallery images")}finally{B(!1),t.target.value=""}},ce=t=>{d(a=>{const r=(a.gallery||[]).filter((o,l)=>l!==t);return{...a,gallery:r}})},de=t=>{d(a=>{const o=S(a.sizes).map(l=>l.label===t?{...l,isAvailable:!l.isAvailable}:l);return{...a,sizes:o}})},ue=t=>a=>{const o=(a.target.value??"").toString().replace(/[^0-9]/g,""),l=Math.max(Number(o||0),0);d(n=>{const w=S(n.sizes).map(p=>p.label===t?{...p,stock:l}:p);return{...n,sizes:w}})},me=()=>{d(t=>{const a=T();return{...t,sizes:a}})};h.useEffect(()=>{var r;const t=(r=s.category)==null?void 0:r.toString().trim();if(!t||N)return;const a=M.get(t);a&&d(o=>{var x;return((x=o.category)==null?void 0:x.toString().trim())!==t||k(o.categoryPriority)===a.label?o:{...o,categoryPriority:a.label}})},[M,s.category,N]);const xe=(t,a)=>{d(r=>{const o=Array.isArray(r.keyFeatures)?[...r.keyFeatures]:[""];return o[t]=a,{...r,keyFeatures:o}})},he=()=>{d(t=>({...t,keyFeatures:Array.isArray(t.keyFeatures)?[...t.keyFeatures,""]:["",""]}))},be=t=>{d(a=>{const r=Array.isArray(a.keyFeatures)?a.keyFeatures.filter((o,l)=>l!==t):[];return{...a,keyFeatures:r.length?r:[""]}})},ge=()=>{const t={};if(s.name.trim()||(t.name="Product name is required"),s.description.trim()||(t.description="Product description is required"),s.sku.trim()||(t.sku="Product ID is required"),s.category.trim()||(t.category="Select a category"),s.categoryPriority.trim()||(t.categoryPriority="Set a priority (e.g. P1, P2)"),s.brand.trim()||(t.brand="Brand is required"),s.hsnCode&&!/^\d{2,}$/i.test(s.hsnCode.trim())&&(t.hsnCode="HSN code should contain at least 2 digits"),s.gstRate!==""){const n=Number(s.gstRate);(Number.isNaN(n)||n<0||n>100)&&(t.gstRate="GST rate must be between 0 and 100")}if((!s.price||Number(s.price)<=0)&&(t.price="Enter a valid price"),s.originalPrice){const n=Number(s.price||0),x=Number(s.originalPrice);Number.isNaN(x)||x<=0?t.originalPrice="Original price must be a positive number":x<n&&(t.originalPrice="Original price should be greater than or equal to price")}const a=z(s.availabilityStatus),r=Number(s.stock);return!(s.stock!==""&&!Number.isNaN(r))||r<0?t.stock=a?"Stock is managed automatically":"Enter available stock":!a&&r===0&&(t.stock="Enter available stock"),s.thumbnail.trim()||(t.thumbnail="Upload at least one image"),(!Array.isArray(s.gallery)||s.gallery.length===0)&&(t.gallery="Add at least one gallery image"),(Array.isArray(s.keyFeatures)?s.keyFeatures.map(n=>n.trim()).filter(Boolean):[]).length||(t.keyFeatures="Add at least one key feature"),s.showSizes&&(S(s.sizes).filter(x=>x.isAvailable).length||(t.sizes="Enable at least one size or turn off the size selector")),A(t),Object.keys(t).length===0},pe=async t=>{var o;if(t.preventDefault(),!ge()){f.error("Please fix the highlighted fields");return}$(!0);const a={name:s.name.trim(),description:s.description.trim(),category:s.category,brand:s.brand,status:s.status,availabilityStatus:s.availabilityStatus,price:Number(s.price),originalPrice:s.originalPrice?Number(s.originalPrice):void 0,discountPercentage:s.discountPercentage?Number(s.discountPercentage):void 0,saveAmount:s.saveAmount?Number(s.saveAmount):void 0,sku:s.sku.trim(),stock:z(s.availabilityStatus)?0:Number(s.stock),lowStockThreshold:s.lowStockThreshold?Number(s.lowStockThreshold):void 0,thumbnail:s.thumbnail,gallery:s.gallery,isFeatured:!!s.isFeatured,keyFeatures:Array.isArray(s.keyFeatures)?s.keyFeatures.map(l=>l.trim()).filter(Boolean):[],sizes:F,showSizes:!!s.showSizes,categoryPriority:k(s.categoryPriority)},r=(o=s.hsnCode)==null?void 0:o.toString().trim();if(r&&(a.hsnCode=r),s.gstRate!==""){const l=Number(s.gstRate);Number.isNaN(l)||(a.gstRate=l)}try{await m(ve(a)).unwrap(),f.success("Product added successfully!"),typeof window<"u"&&window.localStorage.removeItem(R),c("/admin/products")}catch(l){const n=(l==null?void 0:l.message)||"Failed to create product. Please try again.";f.error(n)}finally{$(!1)}},v=z(s.availabilityStatus);return e.jsx("div",{className:"min-h-screen md:h-screen bg-slate-50 text-slate-900 overflow-x-hidden",children:e.jsxs("div",{className:"flex md:h-screen",children:[e.jsx(Y,{active:"Products",className:"hidden md:flex md:w-64 md:flex-none",onNavigate:()=>C(!1)}),e.jsx(fe,{children:se&&e.jsxs(X.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 flex md:hidden",children:[e.jsx(X.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:220,damping:24},className:"bg-white w-72 max-w-sm h-full shadow-xl",children:e.jsx(Y,{active:"Products",className:"flex w-full",onNavigate:()=>C(!1)})}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"flex-1 bg-black/30","aria-label":"Close sidebar"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(we,{onToggleSidebar:()=>C(t=>!t),activeRange:"All Date",onSelectRange:()=>{},adminName:(b==null?void 0:b.name)||(b==null?void 0:b.username)||"Admin",adminRole:(b==null?void 0:b.role)==="admin"?"Administrator":b==null?void 0:b.role,notifications:{pendingOrders:0,shippedOrders:0,deliveredOrders:0},showRangeSelector:!1,showNotifications:!1,onLogout:te}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-4 py-6 md:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Dashboard / Product / Add Product"}),e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Add Product"})]}),e.jsxs("button",{type:"button",onClick:le,className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 text-sm font-medium text-slate-600 hover:border-blue-200 hover:text-blue-600",children:[e.jsx(Pe,{size:16}),"Cancel"]})]}),e.jsxs("form",{onSubmit:pe,className:"mt-6 grid gap-6 lg:grid-cols-[2fr,1fr]",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"General Information"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Product ID"}),e.jsx("input",{type:"text",value:s.sku,onChange:g("sku"),className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm uppercase tracking-wide focus:border-blue-400 focus:outline-none ${i.sku?"border-rose-300":"border-slate-200"}`,placeholder:"e.g. PROD-0001"}),i.sku&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Product Name"}),e.jsx("input",{type:"text",value:s.name,onChange:g("name"),className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.name?"border-rose-300":"border-slate-200"}`,placeholder:"Type product name here..."}),i.name&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.name})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"HSN Code"}),e.jsx("input",{type:"text",value:s.hsnCode,onChange:U("hsnCode"),className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.hsnCode?"border-rose-300":"border-slate-200"}`,placeholder:"e.g. 6109"}),i.hsnCode?e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.hsnCode}):e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Auto-fills from name when available; editable."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"GST Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:s.gstRate,onChange:U("gstRate"),className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.gstRate?"border-rose-300":"border-slate-200"}`,placeholder:"e.g. 5"}),i.gstRate?e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.gstRate}):e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Enter 0-100. Suggested from product type."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Key Features"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[(s.keyFeatures||[]).map((t,a)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:r=>xe(a,r.target.value),placeholder:"E.g. Premium breathable fabric",className:"flex-1 rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:outline-none"}),e.jsx("button",{type:"button",onClick:()=>be(a),className:"inline-flex items-center justify-center rounded-xl border border-slate-200 px-2 py-2 text-xs font-medium text-slate-500 hover:border-rose-200 hover:text-rose-500",disabled:(s.keyFeatures||[]).length===1,children:"Remove"})]},a)),e.jsx("button",{type:"button",onClick:he,className:"inline-flex items-center gap-2 rounded-xl border border-dashed border-blue-300 px-3 py-2 text-xs font-semibold text-blue-600 hover:bg-blue-50",children:"Add Feature"})]}),i.keyFeatures&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.keyFeatures})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Category Priority"}),e.jsx("input",{type:"text",value:s.categoryPriority,onChange:g("categoryPriority"),placeholder:"P1",className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.categoryPriority?"border-rose-300":"border-slate-200"}`}),i.categoryPriority?e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.categoryPriority}):e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Use priorities like P1, P2… Lower number shows first."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Brand"}),e.jsx("input",{type:"text",list:"product-brand-suggestions",value:s.brand,onChange:g("brand"),placeholder:_.length?"Select or type brand...":"Type brand...",className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm text-slate-700 focus:border-blue-400 focus:outline-none ${i.brand?"border-rose-300":"border-slate-200"}`}),e.jsx("datalist",{id:"product-brand-suggestions",children:_.map(t=>e.jsx("option",{value:t},t))}),i.brand&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.brand})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Description"}),e.jsx("textarea",{rows:4,value:s.description,onChange:g("description"),className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.description?"border-rose-300":"border-slate-200"}`,placeholder:"Type product description here..."}),i.description&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.description})]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Media"}),e.jsxs("div",{className:`mt-4 flex flex-col items-center justify-center rounded-2xl border-2 border-dashed px-6 py-10 text-center ${i.thumbnail?"border-rose-300 bg-rose-50/60":"border-slate-200 bg-slate-50/60"}`,children:[s.thumbnail?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.thumbnail,alt:"Preview",className:"h-40 w-40 rounded-2xl object-cover shadow-sm"}),e.jsx("button",{type:"button",onClick:()=>d(t=>({...t,thumbnail:""})),className:"absolute -right-3 -top-3 rounded-full bg-white p-2 text-xs font-semibold shadow-sm",children:"Remove"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:Q?e.jsx(J,{className:"h-6 w-6 animate-spin text-blue-600"}):e.jsx(Ae,{className:"h-6 w-6 text-blue-500"})}),e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Drag and drop image here, or click add image"}),e.jsxs("label",{className:"mt-4 inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700",children:[e.jsx(W,{size:16}),"Add Image",e.jsx("input",{type:"file",accept:"image/*",onChange:ie,className:"hidden"})]})]}),i.thumbnail&&e.jsx("p",{className:"mt-3 text-xs text-rose-500",children:i.thumbnail})]}),e.jsxs("div",{className:"mt-6 w-full space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Gallery Images"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Used for product swiper (max 3MB each)"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3",children:(s.gallery||[]).map((t,a)=>e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[e.jsx("img",{src:t,alt:`Gallery ${a+1}`,className:"h-32 w-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>ce(a),className:"absolute inset-x-2 bottom-2 rounded-lg bg-white/90 px-2 py-1 text-xs font-semibold text-slate-600 opacity-0 shadow-sm transition group-hover:opacity-100",children:"Remove"})]},`${t}-${a}`))}),e.jsxs("label",{className:"inline-flex items-center gap-2 rounded-xl border border-dashed border-blue-300 px-4 py-2 text-sm font-semibold text-blue-600 hover:bg-blue-50",children:[e.jsx(W,{size:16}),ee?"Uploading...":"Add Gallery Images",e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ne,className:"hidden"})]}),i.gallery&&e.jsx("p",{className:"text-xs text-rose-500",children:i.gallery})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Pricing"}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Price"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:s.price,onChange:V("price"),className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.price?"border-rose-300":"border-slate-200"}`,placeholder:"599.00"}),i.price&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Original Price (MRP)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:s.originalPrice,onChange:V("originalPrice"),className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.originalPrice?"border-rose-300":"border-slate-200"}`,placeholder:"799.00"}),i.originalPrice&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:i.originalPrice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Discount (%)"}),e.jsx("input",{type:"number",min:"0",step:"1",value:s.discountPercentage,onChange:g("discountPercentage"),className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:outline-none",placeholder:"Auto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"You Save (₹)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:s.saveAmount,onChange:g("saveAmount"),className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:outline-none",placeholder:"Auto"})]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Stock Settings"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Available Stock"}),e.jsxs("div",{className:"mt-1 flex flex-col gap-1 sm:flex-row sm:items-center sm:gap-3",children:[e.jsx("input",{type:"number",min:"0",step:"1",value:s.stock,onChange:g("stock"),disabled:v,title:s.showSizes&&!v?"Auto-calculated from per-size stock":void 0,className:`w-full rounded-xl border px-3 py-2 text-sm focus:border-blue-400 focus:outline-none ${i.stock?"border-rose-300":"border-slate-200"} ${v?"bg-slate-100 text-slate-500":""} ${!v&&s.showSizes?"bg-white":""}`,placeholder:v?"Managed automatically":s.showSizes?"Calculated from sizes":"e.g. 150"}),v&&e.jsx("span",{className:"text-xs text-slate-500",children:"Stock is locked for the selected status"})]}),i.stock&&e.jsx("p",{className:"text-xs text-rose-500",children:i.stock}),s.showSizes&&!v&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Total from size quantities:"," ",e.jsx("span",{className:"font-semibold text-slate-700",children:D})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Low Stock Threshold"}),e.jsx("input",{type:"number",min:"0",step:"1",value:s.lowStockThreshold,onChange:g("lowStockThreshold"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:outline-none",placeholder:"Optional (default 10)"})]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Size Availability"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Configure which standard sizes are in stock and whether to show them on the product page."})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs font-medium text-slate-600",children:[e.jsx("input",{type:"checkbox",checked:!!s.showSizes,onChange:G("showSizes"),className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.showSizes?"Showing on product page":"Hidden on product page"]})]}),s.showSizes?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-600",children:[e.jsxs("span",{className:"font-medium",children:["Total available size stock:"," ",e.jsx("span",{className:"text-slate-900",children:D})]}),e.jsx("button",{type:"button",onClick:me,className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 hover:border-blue-200 hover:text-blue-600",children:"Reset to defaults"})]}),e.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:F.map(t=>{const a=!!t.isAvailable,r=Number(t.stock??0);return e.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>de(t.label),className:`inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 text-xs font-semibold transition focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 ${a?"border-blue-600 bg-blue-50 text-blue-600 hover:border-blue-700 hover:bg-blue-100":"border-rose-200 bg-rose-50 text-rose-500 hover:border-rose-300 hover:bg-rose-100"}`,children:[e.jsx("span",{children:t.label}),!a&&e.jsx("span",{className:"rounded-full bg-white px-2 py-0.5 text-[10px] font-semibold uppercase text-rose-500 shadow-sm",children:"Blocked"})]}),e.jsx("input",{type:"tel",inputMode:"numeric",pattern:"[0-9]*",min:"0",value:a&&r>0?r:"",onFocus:o=>o.target.select(),onChange:ue(t.label),disabled:!a,placeholder:"0",className:`w-24 rounded-lg border px-2 py-1 text-xs font-semibold focus:border-blue-400 focus:outline-none ${a?"border-slate-200 bg-white text-slate-700":"cursor-not-allowed border-slate-100 bg-slate-100 text-slate-400"}`,"aria-label":`${t.label} stock quantity`})]}),e.jsx("p",{className:"text-[11px] text-slate-500",children:a?"Adjust available units for this size.":"Blocked sizes are hidden from shoppers."})]},t.label)})}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"Tip: Stock is the sum of all enabled sizes. Disable a size to remove it from the total."})]}):e.jsx("p",{className:"mt-4 rounded-xl border border-dashed border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"Enable the toggle to manage per-size availability for this product."})]})]}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Category"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Product Category"}),e.jsx("input",{type:"text",list:"product-category-suggestions",value:s.category,onChange:g("category"),placeholder:L.length?"Select or type category...":"Type category...",className:`w-full rounded-xl border px-3 py-2 text-sm text-slate-700 focus:border-blue-400 focus:outline-none ${i.category?"border-rose-300":"border-slate-200"}`}),e.jsx("datalist",{id:"product-category-suggestions",children:L.map(t=>e.jsx("option",{value:t},t))}),i.category&&e.jsx("p",{className:"text-xs text-rose-500",children:i.category})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Status"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Product Status"}),e.jsx("select",{value:s.status,onChange:g("status"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-blue-400 focus:outline-none",children:Ce.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Stock Status"}),e.jsx("select",{value:s.availabilityStatus,onChange:g("availabilityStatus"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-blue-400 focus:outline-none",children:Fe.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsxs("label",{className:"mt-3 flex items-center justify-between gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Featured Product"}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!s.isFeatured,onChange:G("isFeatured"),className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500","aria-label":"Mark product as featured"}),e.jsx("span",{className:"text-xs text-slate-600",children:s.isFeatured?"Yes":"No"})]})]})]})]}),e.jsx("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c("/admin/products"),className:"rounded-xl border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-600 hover:border-slate-300",disabled:j,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 disabled:opacity-70",disabled:j,children:[j?e.jsx(J,{className:"h-4 w-4 animate-spin"}):null,"Add Product"]})]})})]})]})]})]})]})})};export{Je as default};
