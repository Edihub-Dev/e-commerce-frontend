import{r as n,j as e,A as re,m as U}from"./vendor-2d1PFKo4.js";import{S as le}from"./Sidebar-Blgfai62.js";import{N as ke}from"./Navbar-K_t1OsQh.js";import{c as we,I as Ce,aW as ae,aX as Le,J as v,aY as Oe,aZ as Se,a_ as Ae,a$ as Te,S as ne,X as F,b0 as Pe,b1 as Ue,aR as De,ae as Ve}from"./index-Bpx0OnSg.js";import{u as _e,a as Ee}from"./hooks-W65Onizy.js";import{L as W}from"./loader-circle-DRAKHMK_.js";import{C as ze}from"./circle-check-CZUF0pO-.js";import{S as Ie}from"./send-ywki2P6O.js";import{I as oe}from"./image-o7Bv0ro0.js";import{U as Re}from"./upload-B-EAmLLf.js";import{C as He}from"./copy-pxcJIyRH.js";import"./react-BzrpNAyj.js";import"./house-Bx4yg0fx.js";import"./ticket-percent-OJlGKFU7.js";import"./package-C_UWcLgd.js";import"./shopping-bag-Dv9EZFsL.js";import"./arrow-left-fjWLrcm4.js";import"./log-out-BEyQjTNl.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Y=we("palette",Me),$e=3*1024*1024,k={title:"",subtitle:"",description:"",buttonLabel:"",buttonLinkType:"none",buttonLinkValue:"",secondaryLabel:"",secondaryHref:"",imageUrl:"",backgroundColor:"#ffffff",textColor:"#0f172a",accentColor:"#008ecc",couponCode:"",couponDescription:"",stickyTimeoutHours:24,isActive:!0,showOnOffersPage:!0},X=(o,d=24)=>{const x=Number(o);return Number.isFinite(x)&&x>0?x:d},Be=[{value:"none",label:"No link action"},{value:"product",label:"Specific product"},{value:"category",label:"Product category"},{value:"custom",label:"Custom URL"}],K=({placeholder:o,options:d,value:x,onSelect:j,disabled:w,loading:S,loadingLabel:D,emptyLabel:P,error:A})=>{const[t,m]=n.useState(!1),h=n.useRef(null),f=n.useMemo(()=>{const p=d.find(N=>N.value===x);return p||(d.length&&!x,null)},[d,x]);n.useEffect(()=>{if(!t)return;const p=L=>{h.current&&!h.current.contains(L.target)&&m(!1)},N=L=>{L.key==="Escape"&&m(!1)};return document.addEventListener("mousedown",p),document.addEventListener("keydown",N),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",N)}},[t]),n.useEffect(()=>{w&&m(!1)},[w]);const C=n.useCallback(()=>{w||m(p=>!p)},[w]),V=n.useCallback(p=>{j(p),m(!1)},[j]);return e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{type:"button",onClick:C,disabled:w,className:`flex w-full items-center justify-between rounded-xl border px-3 py-2 text-left text-sm transition focus:outline-none focus:ring-2 focus:ring-blue-100 ${w?"cursor-not-allowed border-slate-200 bg-slate-100 text-slate-400":"border-slate-200 bg-white text-slate-700 hover:border-slate-300"}`,children:[e.jsxs("span",{className:"flex min-h-[36px] flex-col justify-center",children:[e.jsx("span",{className:`font-medium ${f?"text-slate-900":"text-slate-400"}`,children:f?f.label:o}),f!=null&&f.meta?e.jsx("span",{className:"text-xs text-slate-500",children:f.meta}):null]}),e.jsx(Ve,{size:16,className:`ml-2 shrink-0 text-slate-500 transition-transform ${t?"rotate-180":""}`})]}),e.jsx(re,{children:t&&e.jsx(U.ul,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:{duration:.18},className:"absolute z-50 mt-2 w-full overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-xl",children:S?e.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:D}):d.length?e.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:d.map(p=>{const N=p.value===x;return e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>V(p.value),className:`flex w-full flex-col items-start gap-0.5 px-3 py-2 text-left text-sm transition ${N?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[e.jsx("span",{className:"font-medium",children:p.label}),p.meta?e.jsx("span",{className:"text-xs text-slate-500",children:p.meta}):null]})},p.value)})}):e.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:P})})}),A?e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:A}):null]})},Fe=(o,d)=>{const x={title:o.title,subtitle:o.subtitle,description:o.description,buttonLabel:o.buttonLabel,buttonLinkType:o.buttonLinkType,buttonLinkValue:o.buttonLinkType&&o.buttonLinkType!=="none"?o.buttonLinkValue:"",secondaryLabel:o.secondaryLabel,secondaryHref:o.secondaryHref,backgroundColor:o.backgroundColor,textColor:o.textColor,accentColor:o.accentColor,couponCode:o.couponCode,couponDescription:o.couponDescription,stickyTimeoutHours:X(o.stickyTimeoutHours),isActive:!!o.isActive,showOnOffersPage:!!o.showOnOffersPage};return o.imageUrl&&!d&&(x.imageUrl=o.imageUrl),d&&(x.clearImage=!0),x},cs=()=>{const o=_e(),{user:d}=Ce(),{list:x,status:j,error:w,saving:S,validationErrors:D,lastSavedAt:P,selectedId:A}=Ee(s=>s.adminOfferLightbox),[t,m]=n.useState(k),[h,f]=n.useState(!1),[C,V]=n.useState(!1),[p,N]=n.useState(!1),[L,q]=n.useState([]),[_,Z]=n.useState([]),[z,I]=n.useState({products:!1,categories:!1}),[Q,R]=n.useState({products:null,categories:null}),O=n.useRef(!0),H=n.useRef(""),M=n.useRef(""),G=t.buttonLinkType,E=t.buttonLinkValue,r=n.useMemo(()=>A&&x.find(s=>(s==null?void 0:s._id)===A)||null,[x,A]),b=n.useMemo(()=>r?{...k,...r,stickyTimeoutHours:r.stickyTimeoutHours??k.stickyTimeoutHours,imageUrl:r.imageUrl||"",buttonLinkType:r.buttonLinkType||k.buttonLinkType,buttonLinkValue:r.buttonLinkValue||"",couponCode:r.couponCode||"",couponDescription:r.couponDescription||"",isActive:typeof r.isActive=="boolean"?r.isActive:k.isActive,showOnOffersPage:typeof r.showOnOffersPage=="boolean"?r.showOnOffersPage:k.showOnOffersPage}:{...k},[r]),c=n.useMemo(()=>({...t,stickyTimeoutHours:X(t.stickyTimeoutHours),imageUrl:h?"":t.imageUrl||"",buttonLinkType:t.buttonLinkType||"none",buttonLinkValue:t.buttonLinkType&&t.buttonLinkType!=="none"&&t.buttonLinkValue||"",couponCode:t.couponCode||"",couponDescription:t.couponDescription||"",isActive:!!t.isActive,showOnOffersPage:!!t.showOnOffersPage}),[t,h]),ee=n.useMemo(()=>({...b,stickyTimeoutHours:X(b.stickyTimeoutHours),imageUrl:b.imageUrl||"",buttonLinkType:b.buttonLinkType||k.buttonLinkType,buttonLinkValue:b.buttonLinkType&&b.buttonLinkType!=="none"&&b.buttonLinkValue||"",couponCode:b.couponCode||"",couponDescription:b.couponDescription||"",isActive:!!b.isActive,showOnOffersPage:!!b.showOnOffersPage}),[b]),ie=!!(r!=null&&r._id),ce=x.length>0,de=n.useCallback(s=>{o(ae(s)),m(k),f(!1),V(!1)},[o]),ue=n.useCallback(()=>{V(!0),o(ae(null)),m({...k,isActive:!1}),f(!1)},[o]),$=n.useMemo(()=>JSON.stringify({...c,__clear:h})!==JSON.stringify({...ee,__clear:!1}),[c,ee,h]);n.useEffect(()=>(O.current=!0,()=>{O.current=!1}),[]),n.useEffect(()=>{j==="idle"&&o(Le())},[j,o]),n.useEffect(()=>{const s=async()=>{I(a=>({...a,products:!0})),R(a=>({...a,products:null}));try{const a=await Ue({limit:200,sortBy:"name",sortOrder:"asc",status:"published"});if(!O.current)return;const y=(Array.isArray(a==null?void 0:a.data)?a.data:[]).map((l,T)=>{var te;const B=(l==null?void 0:l.slug)||(l==null?void 0:l._id)||"",ve=((te=l==null?void 0:l.name)==null?void 0:te.trim())||`Product ${T+1}`,J=[];return l!=null&&l.sku&&J.push(`SKU ${l.sku}`),l!=null&&l.slug&&J.push(`Slug ${l.slug}`),{value:B,label:ve,meta:J.join(" • ")||null,id:l==null?void 0:l._id,slug:l==null?void 0:l.slug}});q(y)}catch(a){if(!O.current)return;const u=(a==null?void 0:a.message)||"Failed to load products";R(y=>({...y,products:u})),q([])}finally{O.current&&I(a=>({...a,products:!1}))}},i=async()=>{I(a=>({...a,categories:!0})),R(a=>({...a,categories:null}));try{const a=await De();if(!O.current)return;const y=(Array.isArray(a==null?void 0:a.data)?a.data:[]).map((l,T)=>{var B;return{value:(l==null?void 0:l.slug)||"",label:((B=l==null?void 0:l.name)==null?void 0:B.trim())||`Category ${T+1}`,meta:l!=null&&l.slug?`Slug ${l.slug}`:null,slug:(l==null?void 0:l.slug)||""}});Z(y)}catch(a){if(!O.current)return;const u=(a==null?void 0:a.message)||"Failed to load product categories";R(y=>({...y,categories:u})),Z([])}finally{O.current&&I(a=>({...a,categories:!1}))}};s(),i()},[]),n.useEffect(()=>{j==="succeeded"&&r&&!C&&(m(b),f(!1))},[j,b,r,C]),n.useEffect(()=>{G==="product"&&E?H.current=E:G==="category"&&E&&(M.current=E)},[G,E]),n.useEffect(()=>{w&&j==="failed"&&v.error(w)},[w,j]),n.useEffect(()=>{P&&v.success("Offer lightbox saved")},[P]),n.useEffect(()=>()=>{o(Oe())},[o]);const g=n.useCallback(s=>i=>{const{value:a}=i.target;m(u=>({...u,[s]:a}))},[]),se=n.useCallback(s=>i=>{const{checked:a}=i.target;m(u=>({...u,[s]:a}))},[]),xe=n.useCallback(s=>{m(i=>{var u,y;if(i.buttonLinkType===s)return i;let a=i.buttonLinkValue;if(s==="product"){let l=H.current;L.some(T=>T.value===l)||(l=((u=L[0])==null?void 0:u.value)||""),H.current=l,a=l}else if(s==="category"){let l=M.current;_.some(T=>T.value===l)||(l=((y=_[0])==null?void 0:y.value)||""),M.current=l,a=l}else s==="custom"?a=i.buttonLinkType==="custom"?i.buttonLinkValue:"":a="";return{...i,buttonLinkType:s,buttonLinkValue:a}})},[L,_]),me=n.useCallback(s=>{H.current=s,m(i=>({...i,buttonLinkValue:s}))},[]),fe=n.useCallback(s=>{M.current=s,m(i=>({...i,buttonLinkValue:s}))},[]),pe=n.useCallback(s=>{var u;const i=(u=s.target.files)==null?void 0:u[0];if(!i)return;if(!i.type.startsWith("image/")){v.error("Please upload a valid image file");return}if(i.size>$e){v.error("Image must be smaller than 3MB");return}const a=new FileReader;a.onload=()=>{const y=a.result||"";m(l=>({...l,imageUrl:y})),f(!1),v.success("Image ready to upload")},a.onerror=()=>{v.error("Failed to process image")},a.readAsDataURL(i)},[]),be=n.useCallback(()=>{m(s=>({...s,imageUrl:""})),f(!0)},[]),he=n.useCallback(()=>{m(b),f(!1)},[b]),ge=n.useCallback(s=>{if(s.preventDefault(),!$&&!h){v("No changes to save",{icon:"ℹ️"});return}const i=Fe(t,h);C||!(r!=null&&r._id)?o(Se(i)).unwrap().then(()=>{f(!1),V(!1)}).catch(u=>{typeof u=="string"&&v.error(u)}):r!=null&&r._id&&o(Ae({id:r._id,data:i})).unwrap().then(()=>{f(!1)}).catch(u=>{typeof u=="string"&&v.error(u)})},[o,t,h,$,C,r]),ye=n.useCallback(async()=>{if(r!=null&&r._id&&window.confirm("Delete this offer lightbox?"))try{await o(Te(r._id)).unwrap(),m(k),f(!1),v.success("Offer lightbox removed")}catch(s){const i=(s==null?void 0:s.message)||(typeof s=="string"?s:null)||"Failed to delete offer lightbox";v.error(i)}},[o,r]),je=()=>!Array.isArray(D)||!D.length?null:e.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:[e.jsx("p",{className:"font-semibold",children:"Please review the following issues:"}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5",children:D.map((s,i)=>e.jsxs("li",{children:[(s==null?void 0:s.msg)||"Invalid input",s!=null&&s.param?` (${s.param})`:""]},`${(s==null?void 0:s.param)||"error"}-${i}`))})]}),Ne=j==="loading"&&!ce&&!C;return e.jsx("div",{className:"min-h-screen md:h-screen bg-slate-50 text-slate-900 overflow-x-hidden",children:e.jsxs("div",{className:"flex md:h-screen",children:[e.jsx(le,{active:"Offers Lightbox",className:"hidden md:flex md:w-64 md:flex-none",onNavigate:()=>N(!1)}),e.jsx(re,{children:p&&e.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 flex md:hidden",children:[e.jsx(U.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:220,damping:24},className:"bg-white w-72 max-w-sm h-full shadow-xl",children:e.jsx(le,{active:"Offers Lightbox",className:"flex w-full",onNavigate:()=>N(!1)})}),e.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 bg-black/30","aria-label":"Close sidebar"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(ke,{onToggleSidebar:()=>N(s=>!s),activeRange:"All Date",onSelectRange:()=>{},adminName:(d==null?void 0:d.name)||(d==null?void 0:d.username)||"Admin",adminRole:(d==null?void 0:d.role)==="admin"?"Administrator":d==null?void 0:d.role,notifications:{pendingOrders:0,shippedOrders:0,deliveredOrders:0},showRangeSelector:!1,showNotifications:!1}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50",children:e.jsxs("div",{className:"mx-auto w-full max-w-6xl px-4 py-8 md:px-8 md:py-10",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-blue-600",children:[e.jsx(ne,{size:14})," Offers Lightboxes"]}),e.jsx("h1",{className:"mt-3 text-2xl font-bold text-slate-900 md:text-3xl",children:"Curate multiple promos without redeploys"}),e.jsx("p",{className:"mt-2 max-w-2xl text-sm text-slate-500 md:text-base",children:"Manage a collection of marketing lightboxes, toggle them on or off, and fine-tune each offer’s copy, colors, and CTA in one place."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 self-start lg:self-center",children:[e.jsxs("button",{type:"button",onClick:ue,className:"inline-flex items-center gap-2 rounded-full border border-blue-200 px-3 py-1.5 text-sm font-semibold text-blue-600 transition hover:border-blue-300 hover:text-blue-700",disabled:S&&C,children:[e.jsx(ne,{size:16})," Add offer lightbox"]}),S?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 text-sm font-medium text-blue-600",children:[e.jsx(W,{size:16,className:"animate-spin"})," Saving…"]}):P?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-sm font-medium text-emerald-600",children:[e.jsx(ze,{size:16})," Saved"," ",new Date(P).toLocaleTimeString()]}):null,e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:he,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 transition hover:border-slate-300 hover:text-slate-800",disabled:S||!$&&!h,children:[e.jsx(F,{size:16})," Reset"]}),e.jsxs("button",{type:"button",onClick:ye,className:"inline-flex items-center gap-2 rounded-full border border-rose-200 px-3 py-1.5 text-sm font-semibold text-rose-600 transition hover:border-rose-300 hover:text-rose-700",disabled:S||!ie,children:[e.jsx(F,{size:16})," Delete"]})]}),e.jsxs("button",{type:"submit",form:"offer-lightbox-form",className:"inline-flex items-center gap-2 rounded-full bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-blue-300",disabled:S||!$&&!h,children:[e.jsx(Ie,{size:16})," Save changes"]})]})]}),je(),e.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,2fr)]",children:[e.jsxs(U.aside,{layout:!0,className:"space-y-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"All offers"}),e.jsxs("span",{className:"text-xs font-medium text-slate-500",children:[x.length," total"]})]}),j==="loading"&&!x.length?e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[e.jsx(W,{size:16,className:"animate-spin"})," Loading offers…"]}):null,e.jsxs("div",{className:"space-y-3 max-h-[420px] overflow-y-auto pr-1",children:[x.map(s=>{var a;const i=A===s._id;return e.jsxs("button",{type:"button",onClick:()=>de(s._id),className:`w-full rounded-2xl border px-4 py-3 text-left transition focus:outline-none focus:ring-2 focus:ring-blue-200 ${i?"border-blue-400 bg-blue-50":"border-slate-200 bg-white hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:((a=s.title)==null?void 0:a.trim())||"Untitled offer"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Updated"," ",new Date(s.updatedAt).toLocaleString()]})]}),e.jsx("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold ${s.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:s.isActive?"Active":"Hidden"})]}),s.subtitle?e.jsx("p",{className:"mt-2 text-xs text-slate-600 line-clamp-2",children:s.subtitle}):null]},s._id)}),!x.length&&!C?e.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-4 py-6 text-center text-sm text-slate-500",children:"No offers yet. Click “Add offer lightbox” to create your first promo."}):null]})]}),e.jsx(U.section,{layout:!0,className:"space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:e.jsxs("form",{id:"offer-lightbox-form",onSubmit:ge,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Headline"}),e.jsx("input",{type:"text",maxLength:120,value:t.title,onChange:g("title"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"E.g. Ooh, ₹150 Off"})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Subheadline"}),e.jsx("input",{type:"text",maxLength:200,value:t.subtitle,onChange:g("subtitle"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Your first order of ₹999 or more"})]}),e.jsxs("label",{className:"md:col-span-2 space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Supporting message"}),e.jsx("textarea",{rows:3,maxLength:400,value:t.description,onChange:g("description"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Share why this offer is irresistible."})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Primary button label"}),e.jsx("input",{type:"text",maxLength:60,value:t.buttonLabel,onChange:g("buttonLabel"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Take ₹150 Off"})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Primary button destination"}),e.jsx(K,{placeholder:"Pick a destination type",options:Be,value:t.buttonLinkType,onSelect:xe,disabled:!1,loading:!1,loadingLabel:"",emptyLabel:"No destination types found"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Choose what happens when shoppers click the CTA."})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Destination value"}),t.buttonLinkType==="product"?e.jsxs("div",{className:"space-y-1",children:[e.jsx(K,{placeholder:"Select a product",options:L,value:t.buttonLinkValue||"",onSelect:me,disabled:z.products||!L.length,loading:z.products,loadingLabel:"Loading products...",emptyLabel:"No published products found",error:Q.products}),e.jsx("p",{className:"text-xs text-slate-500",children:t.buttonLinkValue?`Button will link to /product/${t.buttonLinkValue}`:"Create and publish a product to enable this option."})]}):t.buttonLinkType==="category"?e.jsxs("div",{className:"space-y-1",children:[e.jsx(K,{placeholder:"Select a category",options:_,value:t.buttonLinkValue||"",onSelect:fe,disabled:z.categories||!_.length,loading:z.categories,loadingLabel:"Loading categories...",emptyLabel:"No categories available",error:Q.categories}),e.jsx("p",{className:"text-xs text-slate-500",children:t.buttonLinkValue?`Button will link to /category/${t.buttonLinkValue}`:"Manage footer categories to populate this list."})]}):t.buttonLinkType==="custom"?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",maxLength:200,value:t.buttonLinkValue,onChange:g("buttonLinkValue"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"https://example.com/path"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Must start with http:// or https://. Opens in the same tab."})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",maxLength:200,value:"",disabled:!0,className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm disabled:cursor-not-allowed disabled:bg-slate-100",placeholder:"No action configured"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Choose a destination type to enable this field."})]})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Secondary link label"}),e.jsx("input",{type:"text",maxLength:120,value:t.secondaryLabel,onChange:g("secondaryLabel"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"No thanks, I’ll pay full price"})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Secondary link URL"}),e.jsx("input",{type:"text",maxLength:200,value:t.secondaryHref,onChange:g("secondaryHref"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"https://"})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Coupon code"}),e.jsx("input",{type:"text",maxLength:60,value:t.couponCode,onChange:g("couponCode"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm uppercase tracking-[0.15em] focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"SUMMER25"})]})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Coupon description"}),e.jsx("textarea",{rows:2,maxLength:160,value:t.couponDescription,onChange:g("couponDescription"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Automatically applied at checkout"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 font-medium text-slate-700",children:[e.jsx(Y,{size:16})," Background"]}),e.jsx("input",{type:"color",value:t.backgroundColor||"#ffffff",onChange:g("backgroundColor"),className:"h-12 w-full cursor-pointer rounded-xl border border-slate-200"})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 font-medium text-slate-700",children:[e.jsx(Y,{size:16})," Text color"]}),e.jsx("input",{type:"color",value:t.textColor||"#0f172a",onChange:g("textColor"),className:"h-12 w-full cursor-pointer rounded-xl border border-slate-200"})]}),e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 font-medium text-slate-700",children:[e.jsx(Y,{size:16})," Accent color"]}),e.jsx("input",{type:"color",value:t.accentColor||"#008ecc",onChange:g("accentColor"),className:"h-12 w-full cursor-pointer rounded-xl border border-slate-200"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("label",{className:"space-y-1 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 font-medium text-slate-700",children:[e.jsx(Pe,{size:16})," Sticky timeout (hours)"]}),e.jsx("input",{type:"number",min:1,max:168,value:t.stickyTimeoutHours,onChange:g("stickyTimeoutHours"),className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:t.isActive,onChange:se("isActive"),className:"h-5 w-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Show this lightbox on the homepage modal"]}),e.jsxs("label",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:t.showOnOffersPage,onChange:se("showOnOffersPage"),className:"h-5 w-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Show this lightbox on the Offers page"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-700",children:"Creative asset"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Upload a PNG, JPG, or WebP up to 3MB. We recommend a portrait composition."})]}),t.imageUrl&&!h?e.jsxs("button",{type:"button",onClick:be,className:"inline-flex items-center gap-2 rounded-full border border-rose-200 px-3 py-1.5 text-sm font-medium text-rose-600 transition hover:border-rose-300 hover:text-rose-700",children:[e.jsx(F,{size:16})," Remove"]}):null]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-2xl border border-dashed border-slate-300 bg-slate-50/60 p-6 text-center",children:[e.jsx(oe,{className:"h-10 w-10 text-slate-400"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-full bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700",children:[e.jsx(Re,{size:16})," Upload image",e.jsx("input",{type:"file",accept:"image/*",onChange:pe,className:"hidden"})]}),e.jsxs("button",{type:"button",onClick:()=>{m(s=>({...s,imageUrl:""})),f(!0)},className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-300 hover:text-slate-800",children:[e.jsx(F,{size:16})," Use no image"]})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"PNG, JPG, or WebP – up to 3000KB"})]}),t.imageUrl&&!h?e.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:e.jsx("img",{src:t.imageUrl,alt:"Offer visual",className:"h-80 w-full object-cover"})}):null]})]})}),e.jsxs(U.aside,{layout:!0,className:"space-y-4 rounded-3xl border border-blue-100 bg-gradient-to-br from-sky-50 to-blue-50/60 p-6 shadow-sm",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-blue-500",children:"Live Preview"}),e.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/60 shadow-lg",style:{backgroundColor:c.backgroundColor||"#ffffff",color:c.textColor||"#0f172a"},children:[e.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-[2px]"}),e.jsxs("div",{className:"relative grid gap-0 md:grid-cols-[1.2fr_1fr]",children:[e.jsxs("div",{className:"space-y-4 p-6 md:p-8",children:[e.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em]",style:{color:c.accentColor},children:"Limited Time"}),e.jsx("h2",{className:"text-2xl font-bold md:text-3xl",style:{color:c.textColor},children:c.title||"Ooh, ₹150 Off"}),e.jsx("p",{className:"text-base text-slate-600",style:{color:c.textColor},children:c.subtitle||"Unlock your first order offer when you subscribe."}),c.description?e.jsx("p",{className:"text-sm text-slate-500",style:{color:c.textColor},children:c.description}):null,e.jsxs("div",{className:"space-y-3",children:[c.couponCode?e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-white/60 bg-white/80 px-4 py-3 text-sm font-semibold text-slate-700 backdrop-blur",children:[e.jsx("span",{className:"tracking-[0.3em] uppercase",children:c.couponCode}),e.jsx(He,{size:16,className:"text-slate-500"})]}):null,c.couponDescription?e.jsx("p",{className:"text-xs text-slate-500",children:c.couponDescription}):null,e.jsx("button",{type:"button",className:"w-full rounded-xl px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-blue-500/25 transition",style:{backgroundColor:c.accentColor||"#008ecc"},children:c.buttonLabel||"Take the offer"}),e.jsx("button",{type:"button",className:"w-full text-xs font-medium text-slate-500 underline",children:c.secondaryLabel||"Nvm, I’ll pay full price"})]})]}),e.jsx("div",{className:"relative hidden h-full md:block",children:c.imageUrl?e.jsx("img",{src:c.imageUrl,alt:"Offer creative",className:"h-full w-full object-cover"}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 bg-white/30",children:[e.jsx("div",{className:"flex h-36 w-36 items-center justify-center rounded-full bg-white/40",children:e.jsx(oe,{className:"h-16 w-16 text-white/70"})}),e.jsx("p",{className:"px-6 text-center text-sm font-medium text-white/80",children:"Drop a visual here to make the lightbox pop."})]})})]}),c.isActive?null:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/85 text-center",children:e.jsx("div",{className:"rounded-full border border-orange-300 bg-white px-4 py-2 text-sm font-semibold text-orange-600 shadow",children:"Hidden from homepage modal"})}),c.isActive&&!c.showOnOffersPage?e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 rounded-full border border-slate-300 bg-white/90 px-4 py-2 text-xs font-semibold text-slate-600 shadow",children:"Hidden from Offers listing"}):null]}),e.jsxs("div",{className:"space-y-2 rounded-2xl bg-white/70 p-4 text-sm text-slate-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sticky behaviour."})," Once closed, the lightbox stays hidden for the configured hours using local storage on the storefront."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Image hosting."})," Uploads are saved to your S3 bucket and automatically cleaned up when you replace or remove them."]})]})]})]}),Ne?e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-medium text-slate-500 shadow",children:[e.jsx(W,{className:"h-4 w-4 animate-spin"})," Loading offer lightbox…"]})}):null]})})]})]})})};export{cs as default};
