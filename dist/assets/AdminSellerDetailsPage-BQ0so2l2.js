import{r as n,j as e,A as Gt,m as Me}from"./vendor-2d1PFKo4.js";import{S as At}from"./Sidebar-Blgfai62.js";import{N as vl}from"./Navbar-K_t1OsQh.js";import{c as Sl,a as L,I as wl,C as m,d as kl,X as Cl}from"./index-Bpx0OnSg.js";import{d as Pt,Q as Al}from"./downloadQr-DEmKiViM.js";import{d as Pl,u as Rl}from"./adminUsersApi-JfDqj20M.js";import{S as Rt}from"./shield-check-ZginSkgb.js";import{P as is}from"./package-C_UWcLgd.js";import{S as os}from"./shopping-bag-Dv9EZFsL.js";import{T as cs}from"./ticket-percent-OJlGKFU7.js";import{R as Pe}from"./refresh-cw-DQoxs3YL.js";import{S as Dl}from"./shield-alert-l_ssT4iu.js";import{E as Re}from"./eye-DjBlpBi-.js";import{P as De}from"./pencil-line-CoX3LYzN.js";import{T as Oe}from"./trash-2-Chc1geHF.js";import{F as Ol}from"./funnel-DrRYs2Xk.js";import{L as Dt}from"./loader-circle-DRAKHMK_.js";import{D as Fl}from"./download-D5r73ZfU.js";import"./react-BzrpNAyj.js";import"./house-Bx4yg0fx.js";import"./arrow-left-fjWLrcm4.js";import"./log-out-BEyQjTNl.js";import"./jspdf.es.min-BhhWDGe6.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ds=Sl("user-plus",Ml),$=(c,r)=>{const h=(c==null?void 0:c.data)||{};if(!h.success)throw new Error(h.message||r);return h.data},_l=async()=>{const c=await L.get("/admin/sellers");return $(c,"Failed to fetch sellers")||[]},Il=async(c={})=>{const r=await L.get("/admin/sellers/products",{params:c});return $(r,"Failed to fetch seller products")||[]},Ot=async c=>{const r=await L.get(`/admin/sellers/products/${c}`);return $(r,"Failed to fetch seller product")},El=async(c,r)=>{const h=await L.put(`/admin/sellers/products/${c}`,r);return $(h,"Failed to update seller product")},Tl=async c=>{const r=await L.delete(`/admin/sellers/products/${c}`);return $(r,"Failed to delete seller product")},Ll=async(c={})=>{const r=await L.get("/admin/sellers/orders",{params:c});return $(r,"Failed to fetch seller orders")||[]},Vl=async(c,r)=>{const h=await L.put(`/admin/sellers/orders/${c}`,r);return $(h,"Failed to update seller order")},Ft=async c=>{const r=await L.delete(`/admin/sellers/orders/${c}`);return $(r,"Failed to delete seller order")},Ul=async(c={})=>{const r=await L.get("/admin/sellers/coupons",{params:c});return $(r,"Failed to fetch seller coupons")||[]},$l=async(c,r)=>{const h=await L.put(`/admin/sellers/coupons/${c}`,r);return $(h,"Failed to update seller coupon")},Mt=async c=>{const r=await L.delete(`/admin/sellers/coupons/${c}`);return $(r,"Failed to delete seller coupon")},xs={published:{label:"Published",className:"bg-emerald-100 text-emerald-600"},archived:{label:"Archived",className:"bg-slate-100 text-slate-500"}},_t={isOpen:!1,loading:!1,data:null,error:null},It={isOpen:!1,loading:!1,data:null,draft:null,error:null,isSubmitting:!1},Et={in_stock:"bg-emerald-100 text-emerald-600",low_stock:"bg-amber-100 text-amber-600",out_of_stock:"bg-rose-100 text-rose-600",preorder:"bg-blue-100 text-blue-600"},Tt={in_stock:"In stock",low_stock:"Low stock",out_of_stock:"Out of stock",preorder:"Pre-order"},Lt=c=>Tt[c]||Tt.in_stock,Bl=(c={})=>{const r=Number(c.price??0),h=Number(c.originalPrice??c.price??c.costPrice??r),b=Number.isFinite(r)&&r>0?r:h,j=Number.isFinite(h)&&h>0?h:b,Y=c.discountPercentage!==void 0&&c.discountPercentage!==null?Number(c.discountPercentage):j>b&&j>0?Math.round((j-b)/j*100):0,oe=c.saveAmount!==void 0&&c.saveAmount!==null?Number(c.saveAmount):Y>0?j-b:0;return{price:b,originalPrice:j,discountPercentage:Y,saveAmount:oe}},zl=[{matcher:/keychain/i,hsnCode:"8305",gstRate:18},{matcher:/ceramic\s+coffee\s+mug|coffee\s+mug|mug/i,hsnCode:"6912",gstRate:12},{matcher:/executive\s+diary|pen\s+set/i,hsnCode:"4820",gstRate:18},{matcher:/white\s+logo\s+cap|cap/i,hsnCode:"6501",gstRate:18},{matcher:/diary/i,hsnCode:"4820",gstRate:18},{matcher:/\bpen\b/i,hsnCode:"9608",gstRate:18},{matcher:/t\s*-?shirt|polo/i,hsnCode:"6109",gstRate:5}],Gl=(c="")=>{const r=c.toString().trim();return r&&zl.find(h=>h.matcher.test(r))||null},us=["out_of_stock","preorder"],ms=(c=[])=>c.reduce((r,h)=>{if(!h||h.isAvailable===!1)return r;const b=Number(h.stock??0);return Number.isFinite(b)?r+Math.max(b,0):r},0),ql=["XS","S","M","L","XL","XXL"],he=()=>ql.map(c=>({label:c,isAvailable:!0,stock:0})),Vt=(c="")=>{const r=c==null?void 0:c.toString().trim().toUpperCase();if(!r)return"";if(/^P\d{1,2}$/.test(r))return r;const h=parseInt(r.replace(/[^0-9]/g,""),10);return!Number.isNaN(h)&&h>0?`P${h}`:""},Ut=2*1024*1024,$t=c=>new Promise((r,h)=>{const b=new FileReader;b.onload=()=>r(b.result),b.onerror=()=>h(new Error("Failed to read file")),b.readAsDataURL(c)}),Z=(c={})=>{if(!c)return null;const r={...c},h=r.metadata instanceof Map?Object.fromEntries(r.metadata):typeof r.metadata=="object"&&r.metadata!==null?{...r.metadata}:{},j=(Array.isArray(r.gallery)?r.gallery:Array.isArray(r.images)?r.images:[]).map(d=>d!=null?String(d).trim():"").filter(d=>d.length),Y=Array.isArray(r.keyFeatures)?r.keyFeatures.map(d=>d!=null?String(d).trim():"").filter(d=>d.length):[],oe=Array.isArray(r.sizes)?r.sizes.map(d=>({label:(d==null?void 0:d.label)!=null?String(d.label).trim():"",isAvailable:(d==null?void 0:d.isAvailable)!==!1,stock:Number.isFinite(Number(d==null?void 0:d.stock))?Number(d.stock):0})).filter(d=>d.label||d.stock>0):[],be=Array.isArray(r.variants)?r.variants.map(d=>({name:d==null?void 0:d.name,sku:d==null?void 0:d.sku,price:d==null?void 0:d.price,stock:d==null?void 0:d.stock,imageUrl:d==null?void 0:d.imageUrl,attributes:d==null?void 0:d.attributes,isActive:(d==null?void 0:d.isActive)!==!1})):[],{price:ce,originalPrice:ge,discountPercentage:fe,saveAmount:ye}=Bl(r);return{...r,price:ce,originalPrice:ge,discountPercentage:fe,saveAmount:ye,sku:r.sku||r.id||r._id||"",category:r.category||"",brand:r.brand||"",categoryPriority:r.categoryPriority||"",description:r.description||"",shortDescription:r.shortDescription||"",thumbnail:r.thumbnail||"",gallery:j,images:Array.isArray(r.images)?r.images.map(d=>d!=null?String(d).trim():"").filter(d=>d.length):j,keyFeatures:Y,sizes:oe,variants:be,metadata:h,stock:Number.isFinite(Number(r.stock))?Number(r.stock):0,lowStockThreshold:Number.isFinite(Number(r.lowStockThreshold))?Number(r.lowStockThreshold):0,costPrice:Number.isFinite(Number(r.costPrice))?Number(r.costPrice):void 0,availabilityStatus:r.availabilityStatus||"in_stock",status:r.status||"published",isFeatured:!!r.isFeatured,showSizes:!!r.showSizes,hsnCode:r.hsnCode!=null?String(r.hsnCode).trim():"",gstRate:r.gstRate!==void 0&&r.gstRate!==null&&r.gstRate!==""?String(r.gstRate):""}},Bt=(c={})=>{const r=Z(c)||{},h=r.showSizes?Array.isArray(r.sizes)&&r.sizes.length?r.sizes:he():Array.isArray(r.sizes)?r.sizes:[];return{name:r.name||"",sku:r.sku||"",category:r.category||"",brand:r.brand||"",categoryPriority:r.categoryPriority||"",price:r.price!==void 0&&r.price!==null?String(r.price):"",originalPrice:r.originalPrice!==void 0&&r.originalPrice!==null?String(r.originalPrice):"",discountPercentage:r.discountPercentage!==void 0&&r.discountPercentage!==null?String(r.discountPercentage):"",saveAmount:r.saveAmount!==void 0&&r.saveAmount!==null?String(r.saveAmount):"",costPrice:r.costPrice!==void 0&&r.costPrice!==null?String(r.costPrice):"",stock:r.stock!==void 0&&r.stock!==null?String(r.stock):"0",lowStockThreshold:r.lowStockThreshold!==void 0&&r.lowStockThreshold!==null?String(r.lowStockThreshold):"",availabilityStatus:r.availabilityStatus||"in_stock",status:r.status||"published",isFeatured:!!r.isFeatured,showSizes:!!r.showSizes,description:r.description||"",shortDescription:r.shortDescription||"",hsnCode:r.hsnCode||"",gstRate:r.gstRate!==void 0&&r.gstRate!==null?String(r.gstRate):"",keyFeatures:r.keyFeatures&&r.keyFeatures.length?[...r.keyFeatures]:[""],gallery:r.gallery&&r.gallery.length?[...r.gallery]:[],images:r.images&&r.images.length?[...r.images]:[],thumbnail:r.thumbnail||"",sizes:h.map(b=>({label:(b==null?void 0:b.label)||"",isAvailable:(b==null?void 0:b.isAvailable)!==!1,stock:(b==null?void 0:b.stock)!==void 0&&(b==null?void 0:b.stock)!==null?String(b.stock):"0"})),metadata:r.metadata&&typeof r.metadata=="object"?{...r.metadata}:{},variants:r.variants||[]}},zt=["processing","confirmed","picked_up","shipped","out_for_delivery","delivered","returned"],Ql=["pending","paid","failed"],U=c=>(Number.isFinite(Number(c))?Number(c):0).toLocaleString("en-IN",{style:"currency",currency:"INR"}),Fe=c=>{if(!c)return"--";const r=new Date(c);return Number.isNaN(r.getTime())?"--":r.toLocaleString()},ie=({entity:c="item",name:r}={})=>{if(typeof window>"u")return!0;const h=c.toLowerCase(),b=r?` "${r}"`:"";return window.confirm(`Are you sure you want to delete this ${h}${b}? This action cannot be undone.`)},W=({isOpen:c,title:r,onClose:h,children:b,footer:j})=>e.jsx(Gt,{children:c&&e.jsx(Me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:clsx("fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/40","px-4"),children:e.jsxs(Me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},className:clsx("relative","w-full","max-w-2xl","rounded-2xl","border","border-slate-200","bg-white","p-6","shadow-2xl"),children:[e.jsx("button",{type:"button",onClick:h,className:clsx("absolute","right-4","top-4","inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-slate-300","hover:text-slate-700","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-blue-500"),"aria-label":"Close modal",children:e.jsx(Cl,{size:18})}),e.jsx("div",{className:clsx("flex","items-start","justify-between","gap-4","pr-12"),children:e.jsx("h3",{className:clsx("text-lg","font-semibold","text-slate-900"),children:r})}),e.jsx("div",{className:clsx("mt-4","max-h-[60vh]","overflow-y-auto","pr-1","text-sm","text-slate-600"),children:b}),j?e.jsx("div",{className:clsx("mt-6","flex","justify-end","gap-3"),children:j}):null]})},"modal")}),H=({icon:c,title:r,subtitle:h})=>e.jsxs("div",{className:clsx("flex","flex-col","items-center","justify-center","rounded-2xl","border","border-dashed","border-slate-200","bg-white","px-6","py-8","text-center"),children:[e.jsx("div",{className:clsx("rounded-full","bg-blue-50","p-4","text-blue-600"),children:e.jsx(c,{size:24})}),e.jsx("h3",{className:clsx("mt-4","text-base","font-semibold","text-slate-900"),children:r}),e.jsx("p",{className:clsx("mt-2","text-sm","text-slate-500"),children:h})]});H.defaultProps={subtitle:""};const ga=()=>{var it,ot,ct,dt,xt,ut,mt,pt,ht,bt,gt,ft,yt;const{user:c,logout:r}=wl(),[h,b]=n.useState(!1),[j,Y]=n.useState([]),[oe,be]=n.useState(!0),[ce,ge]=n.useState(!1),[fe,ye]=n.useState(""),[d,qt]=n.useState(""),[k,ps]=n.useState("all"),[K,hs]=n.useState([]),[Qt,bs]=n.useState(!0),[_e,gs]=n.useState(!1),[fs,ys]=n.useState(""),[x,de]=n.useState(_t),[v,z]=n.useState(It),[Hl,ee]=n.useState({thumbnail:!1,gallery:!1}),[je,Ne]=n.useState({hasManualHsn:!1,hasManualGst:!1}),[js,ve]=n.useState(""),Ns=n.useRef(null),vs=n.useRef(null),Ie=n.useRef(null),Ee=n.useRef(null),[D,Ss]=n.useState([]),[Te,ws]=n.useState(!0),[xe,ks]=n.useState(!1),[Cs,As]=n.useState(""),[_,Se]=n.useState(()=>new Set),[Ps,Le]=n.useState(1),[ue,Ht]=n.useState(10),[Rs,Ds]=n.useState(null),[Os,Fs]=n.useState(null),[O,te]=n.useState(null),[G,Ms]=n.useState(null),[Ve,_s]=n.useState(!1),[Ue,Is]=n.useState(""),[$e,Es]=n.useState(""),[Be,Ts]=n.useState(""),[ze,Ls]=n.useState(""),[Ge,qe]=n.useState(""),[Qe,He]=n.useState(""),[Ye,Ke]=n.useState(""),[Xe,Je]=n.useState(""),[I,We]=n.useState([]),[Yt,Vs]=n.useState(!0),[Ze,Us]=n.useState(!1),[$s,Bs]=n.useState(""),[E,we]=n.useState(()=>new Set),[zs,es]=n.useState(1),[me,Kt]=n.useState(10),[S,q]=n.useState(null),[F,Gs]=n.useState(null),[w,qs]=n.useState(null),[N,pe]=n.useState(null),[ke,Qs]=n.useState(!1),[ss,Hs]=n.useState(!1),se=n.useCallback(async({silent:s}={silent:!1})=>{try{s?ge(!0):be(!0);const t=await _l();Y(Array.isArray(t)?t:[]),ye("")}catch(t){console.error("Failed to load sellers",t),ye(t.message||"Unable to load sellers")}finally{be(!1),ge(!1)}},[]),T=n.useCallback(async({silent:s}={silent:!1})=>{try{s?gs(!0):bs(!0);const l=await Il(k!=="all"?{sellerId:k}:{}),a=Array.isArray(l)?l.map(i=>Z(i)||i):[];hs(a),ys("")}catch(t){console.error("Failed to load seller products",t),ys(t.message||"Unable to load seller products")}finally{bs(!1),gs(!1)}},[k]),B=n.useCallback(async({silent:s}={silent:!1})=>{try{s?ks(!0):ws(!0);const t={};k!=="all"&&(t.sellerId=k),Ue&&(t.status=Ue),$e&&(t.sellerName=$e),Be&&(t.minAmount=Be),ze&&(t.maxAmount=ze);const l=await Ll(t);Ss(Array.isArray(l)?l:[]),As("")}catch(t){console.error("Failed to load seller orders",t),As(t.message||"Unable to load seller orders")}finally{ws(!1),ks(!1)}},[k,Ue,$e,Be,ze]),le=n.useCallback(async({silent:s}={silent:!1})=>{try{s?Us(!0):Vs(!0);const l=await Ul(k!=="all"?{sellerId:k}:{});We(Array.isArray(l)?l:[]),Bs("")}catch(t){console.error("Failed to load seller coupons",t),Bs(t.message||"Unable to load seller coupons")}finally{Vs(!1),Us(!1)}},[k]),Ce=(s="")=>s.replace(/[^0-9.]/g,""),Xt=n.useCallback(s=>{s.preventDefault();const t=Ge.trim(),l=Qe.trim(),a=Ce(Ye),i=Ce(Xe);qe(t),He(l),Ke(a),Je(i),Is(t),Es(l),Ts(a),Ls(i)},[Ge,Qe,Ye,Xe]),Jt=n.useCallback(()=>{qe(""),He(""),Ke(""),Je(""),Is(""),Es(""),Ts(""),Ls("")},[]),C=n.useMemo(()=>{const s=Math.max(ue,1),t=D.length,l=Math.max(1,Math.ceil(Math.max(t,1)/s)),a=Math.min(Math.max(Ps,1),l),i=(a-1)*s,o=Math.min(i+s,t),u=D.slice(i,o);return{total:t,totalPages:l,currentPage:a,startIndex:i,endIndex:o,items:u}},[D,Ps,ue]),ts=C.items,A=n.useMemo(()=>{const s=Math.max(me,1),t=I.length,l=Math.max(1,Math.ceil(Math.max(t,1)/s)),a=Math.min(Math.max(zs,1),l),i=(a-1)*s,o=Math.min(i+s,t),u=I.slice(i,o);return{total:t,totalPages:l,currentPage:a,startIndex:i,endIndex:o,items:u}},[I,zs,me]),ls=A.items,X=n.useMemo(()=>ts.map(s=>String(s._id)),[ts]),J=n.useMemo(()=>ls.map(s=>String(s._id)),[ls]),as=X.length>0&&X.every(s=>_.has(s)),Ys=X.some(s=>_.has(s)),rs=J.length>0&&J.every(s=>E.has(s)),Ks=J.some(s=>E.has(s)),Wt=n.useCallback(s=>{const t=String(s??"");t&&Se(l=>{const a=new Set(l);return a.has(t)?a.delete(t):a.add(t),a})},[]),Zt=n.useCallback(()=>{X.length&&Se(s=>{const t=new Set(s);return X.every(a=>t.has(a))?X.forEach(a=>t.delete(a)):X.forEach(a=>t.add(a)),t})},[X]),el=n.useCallback(s=>{Ht(Number(s.target.value)||10),Le(1)},[]),Xs=n.useCallback(s=>{const t=Math.min(Math.max(s,1),C.totalPages||1);Le(t)},[C.totalPages]),sl=n.useCallback(s=>{const t=String(s??"");t&&we(l=>{const a=new Set(l);return a.has(t)?a.delete(t):a.add(t),a})},[]),tl=n.useCallback(()=>{J.length&&we(s=>{const t=new Set(s);return J.every(a=>t.has(a))?J.forEach(a=>t.delete(a)):J.forEach(a=>t.add(a)),t})},[J]),ll=n.useCallback(s=>{Kt(Number(s.target.value)||10),es(1)},[]),Js=n.useCallback(s=>{const t=Math.min(Math.max(s,1),A.totalPages||1);es(t)},[A.totalPages]),al=n.useCallback(async()=>{if(!_.size){m.error("Select at least one order");return}if(ie({entity:"seller orders",name:`${_.size} selected`}))try{await Promise.all(Array.from(_).map(t=>Ft(t))),m.success("Selected orders removed"),Se(new Set),await B({silent:!0})}catch(t){console.error("Failed to bulk delete seller orders",t),m.error(t.message||"Unable to delete selected orders")}},[_,B]),rl=n.useCallback(async()=>{if(!E.size){m.error("Select at least one coupon");return}if(ie({entity:"coupons",name:`${E.size} selected`}))try{await Promise.all(Array.from(E).map(t=>Mt(t))),m.success("Selected coupons removed"),we(new Set),await le({silent:!0})}catch(t){console.error("Failed to bulk delete seller coupons",t),m.error(t.message||"Unable to delete selected coupons")}},[E,le]),Ws=n.useCallback(s=>(Array.isArray(s)?s:D).map(l=>{var a,i,o,u,y,p,P;return{orderId:l.orderId||l._id,seller:((a=l.sellerId)==null?void 0:a.name)||((i=l.sellerId)==null?void 0:i.companyName)||((o=l.sellerId)==null?void 0:o.username)||"Seller",customer:l.customerName||l.buyerName||((u=l.shippingAddress)==null?void 0:u.fullName)||"Customer",customerEmail:l.customerEmail||l.buyerEmail||((y=l.shippingAddress)==null?void 0:y.email)||"",revenue:((p=l.totals)==null?void 0:p.revenue)??0,quantity:((P=l.totals)==null?void 0:P.quantity)??0,orderStatus:l.orderStatus,paymentStatus:l.paymentStatus,createdAt:l.createdAt}}),[D]),Zs=n.useCallback(s=>(Array.isArray(s)?s:I).map(l=>{var a,i;return{code:l.code,seller:((a=l.sellerId)==null?void 0:a.name)||((i=l.sellerId)==null?void 0:i.username)||"Seller",discount:l.discountType==="percentage"?`${l.discountValue}%`:l.discountValue,minOrderAmount:l.minOrderAmount||0,usage:`${l.usageCount||0}/${l.maxRedemptions||"∞"}`,isActive:l.isActive?"Yes":"No",createdAt:l.createdAt}}),[I]),Ae=n.useCallback((s,t)=>{if(!s.length){m.error("Nothing to export");return}const l=Object.keys(s[0]),a=[l.join(","),...s.map(y=>l.map(p=>{const P=y[p]??"";return`"${String(P).replace(/"/g,'""')}"`}).join(","))].join(`
`),i=new Blob(["\uFEFF"+a],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),u=document.createElement("a");u.href=o,u.download=`${t}-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o),m.success("CSV exported")},[]),nl=n.useCallback(()=>{const s=_.size>0,t=s?D.filter(a=>_.has(String(a._id))):void 0,l=Ws(t);if(!l.length){m.error(s?"No selected orders to export":"Nothing to export");return}Ae(l,s?"seller-orders-selected":"seller-orders")},[Ae,_,D,Ws]),il=n.useCallback(()=>{const s=E.size>0,t=s?I.filter(a=>E.has(String(a._id))):void 0,l=Zs(t);if(!l.length){m.error(s?"No selected coupons to export":"Nothing to export");return}Ae(l,s?"seller-coupons-selected":"seller-coupons")},[E,I,Ae,Zs]),ol=n.useCallback(async s=>{var i,o,u,y;const t=s==null?void 0:s._id,l=(s==null?void 0:s.orderId)||t,a=l?String(l):"";if(!a){m.error("Order details unavailable");return}try{t&&Fs(String(t));const p=await L.get(`/orders/${a}/invoice`,{responseType:"blob",headers:{Accept:"application/pdf"}}),P=p.data,Q=(((i=p.headers)==null?void 0:i["content-disposition"])||"").match(/filename="?([^";]+)"?/i),f=(Q==null?void 0:Q[1])||`invoice-${a}.pdf`,M=window.URL.createObjectURL(P),R=document.createElement("a");R.href=M,R.download=f,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(M),m.success("Invoice downloaded")}catch(p){console.error("Invoice download failed",p);const P=((u=(o=p==null?void 0:p.response)==null?void 0:o.data)==null?void 0:u.message)||(((y=p==null?void 0:p.response)==null?void 0:y.status)===404?"Invoice not found for this order. Try regenerating from the main order record.":p==null?void 0:p.message)||"Unable to download invoice";m.error(P)}finally{Fs(null)}},[]),cl=n.useCallback(s=>{var a,i,o;const t=String((s==null?void 0:s.paymentStatus)||((a=s==null?void 0:s.payment)==null?void 0:a.status)||"").toLowerCase();return!!((i=s==null?void 0:s.invoice)!=null&&i.url||s!=null&&s.invoiceUrl||(o=s==null?void 0:s.invoice)!=null&&o.number||s!=null&&s.invoiceNumber)||["paid","success","successful","completed","confirmed"].includes(t)},[]),dl=n.useCallback(async s=>{var o,u,y;const t=(s==null?void 0:s.orderId)||(s==null?void 0:s._id)||(s==null?void 0:s.id),l=t?String(t):"",a=((o=s==null?void 0:s.qrfolio)==null?void 0:o.imageUrl)||((u=s==null?void 0:s.qrfolio)==null?void 0:u.image)||"",i=(s==null?void 0:s.customerName)||(s==null?void 0:s.buyerName)||((y=s==null?void 0:s.shippingAddress)==null?void 0:y.fullName)||"Customer";if(!l){m.error("Order reference unavailable");return}if(!a){m.error("QR code not available for this order yet.");return}try{Ds(l),await Pt({qrUrl:a,orderId:l,filePrefix:"order-qr",title:i}),m.success("QR code saved as PDF")}catch(p){m.error((p==null?void 0:p.message)||"Failed to download QR code")}finally{Ds(null)}},[Pt]);n.useEffect(()=>{se()},[se]),n.useEffect(()=>{T(),le()},[T,le]),n.useEffect(()=>{B()},[B]),n.useEffect(()=>{const s=Math.max(ue,1),t=Math.max(1,Math.ceil(Math.max(D.length,1)/s));Le(l=>Math.min(Math.max(l,1),t)),Se(l=>{if(!l.size)return l;const a=new Set(D.map(o=>String(o._id))),i=new Set(Array.from(l).filter(o=>a.has(String(o))));return i.size===l.size?l:i})},[D,ue]),n.useEffect(()=>{const s=Math.max(me,1),t=Math.max(1,Math.ceil(Math.max(I.length,1)/s));es(l=>Math.min(Math.max(l,1),t)),we(l=>{if(!l.size)return l;const a=new Set(I.map(o=>String(o._id))),i=new Set(Array.from(l).filter(o=>a.has(String(o))));return i.size===l.size?l:i})},[I,me]),n.useEffect(()=>{Ie.current&&(Ie.current.indeterminate=Ys&&!as)},[as,Ys]),n.useEffect(()=>{Ee.current&&(Ee.current.indeterminate=Ks&&!rs)},[rs,Ks]);const et=n.useMemo(()=>{const s=d.trim().toLowerCase();return s?j.filter(t=>[t.name,t.username,t.email].filter(Boolean).some(l=>l.toLowerCase().includes(s))):j},[j,d]);n.useMemo(()=>k==="all"?null:j.find(s=>String(s._id)===String(k))||null,[k,j]);const xl=n.useMemo(()=>{const s=j.length,t=j.filter(o=>o.isVerified).length,l=j.reduce((o,u)=>{var y;return o+(((y=u.metrics)==null?void 0:y.products)||0)},0),a=j.reduce((o,u)=>{var y;return o+(((y=u.metrics)==null?void 0:y.orders)||0)},0),i=j.reduce((o,u)=>{var y;return o+(((y=u.metrics)==null?void 0:y.coupons)||0)},0);return[{label:"Sellers",value:s,icon:ds,accent:"text-blue-600"},{label:"Verified Sellers",value:t,icon:Rt,accent:"text-emerald-600"},{label:"Seller Products",value:l,icon:is,accent:"text-indigo-600"},{label:"Seller Orders",value:a,icon:os,accent:"text-purple-600"},{label:"Seller Coupons",value:i,icon:cs,accent:"text-rose-600"}]},[j]),ul=async s=>{var t;if(N){Qs(!0);try{const l={username:((t=s.username)==null?void 0:t.trim())||N.username,role:s.role||N.role,isVerified:!!s.isVerified},a=await Rl(N._id,l);m.success("Seller updated"),Y(i=>i.map(o=>o._id===a._id?{...o,...a,metrics:o.metrics}:o)),pe(null),await se({silent:!0})}catch(l){console.error("Failed to update seller",l),m.error(l.message||"Unable to update seller")}finally{Qs(!1)}}},st=async(s=N)=>{if(!(!s||!ie({entity:"seller",name:s.name||s.username||s.email||s._id}))){Hs(!0);try{await Pl(s._id),m.success("Seller removed"),Y(l=>l.filter(a=>a._id!==s._id)),k===String(s._id)&&ps("all"),pe(null),await se({silent:!0}),await Promise.all([T({silent:!0}),B({silent:!0}),le({silent:!0})])}catch(l){console.error("Failed to delete seller",l),m.error(l.message||"Unable to delete seller")}finally{Hs(!1)}}},ml=n.useCallback(async s=>{const t=K.find(l=>String(l._id)===String(s));de({isOpen:!0,loading:!t,data:t?Z(t):null,error:null});try{const l=await Ot(s),a=Z(l)||l;de({isOpen:!0,loading:!1,data:a,error:null})}catch(l){console.error("Failed to load product",l);const a=(l==null?void 0:l.message)||"Failed to load product";t?(m.error(a),de(i=>({...i,loading:!1,error:a}))):(de({isOpen:!0,loading:!1,data:null,error:a}),await T({silent:!0}))}},[K,T]),pl=n.useCallback(async s=>{const t=D.find(a=>a._id===s);if(ie({entity:"seller order",name:t==null?void 0:t.orderId}))try{await Ft(s),m.success("Seller order removed"),await B({silent:!0})}catch(a){console.error("Failed to delete seller order",a),m.error(a.message||"Unable to delete seller order")}},[D,B]),hl=n.useCallback(async(s,t={})=>{var l,a;if(s){_s(!0);try{const i={...t};i.estimatedDeliveryDate===""&&(i.estimatedDeliveryDate=null);const o=await Vl(s,i);m.success("Order updated"),Ss(u=>{const y=String((o==null?void 0:o._id)??s);return u.map(p=>String(p._id)===y?{...p,...o,orderStatus:(o==null?void 0:o.orderStatus)??i.orderStatus??p.orderStatus,paymentStatus:(o==null?void 0:o.paymentStatus)??i.paymentStatus??p.paymentStatus,estimatedDeliveryDate:(o==null?void 0:o.estimatedDeliveryDate)??i.estimatedDeliveryDate??p.estimatedDeliveryDate}:p)}),te(null),await B({silent:!0})}catch(i){console.error("Failed to update seller order",i);const o=((a=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:a.message)||(i==null?void 0:i.message)||"Unable to update seller order";m.error(o)}finally{_s(!1)}}},[B]),bl=n.useCallback(()=>{de(_t)},[]),g=n.useCallback(s=>{z(t=>{if(!t.draft)return t;const l=s(t.draft);return{...t,draft:l}})},[]),gl=n.useCallback(async s=>{const t=K.find(a=>String(a._id)===String(s)),l=t?Z(t):null;z({isOpen:!0,loading:!t,data:l,draft:l?Bt(l):null,error:null,isSubmitting:!1}),Ne({hasManualHsn:!!(l!=null&&l.hsnCode),hasManualGst:(l==null?void 0:l.gstRate)!==void 0&&(l==null?void 0:l.gstRate)!==null&&(l==null?void 0:l.gstRate)!==""}),ee({thumbnail:!1,gallery:!1}),ve("");try{const a=await Ot(s),i=Z(a)||a,o=Bt(i);z({isOpen:!0,loading:!1,data:i,draft:o,error:null,isSubmitting:!1}),Ne({hasManualHsn:!!(i!=null&&i.hsnCode),hasManualGst:(i==null?void 0:i.gstRate)!==void 0&&(i==null?void 0:i.gstRate)!==null&&(i==null?void 0:i.gstRate)!==""}),ee({thumbnail:!1,gallery:!1}),ve("")}catch(a){console.error("Failed to load product",a);const i=(a==null?void 0:a.message)||"Failed to load product";t?(m.error(i),z(o=>({...o,loading:!1,error:i}))):(z({isOpen:!0,loading:!1,data:null,draft:null,error:i,isSubmitting:!1}),await T({silent:!0}))}},[K,T]),ns=n.useCallback(()=>{z(It),Ne({hasManualHsn:!1,hasManualGst:!1}),ee({thumbnail:!1,gallery:!1}),ve(""),Ns.current&&(Ns.current.value=""),vs.current&&(vs.current.value="")},[]),fl=n.useCallback(async s=>{const t=K.find(a=>a._id===s);if(ie({entity:"product",name:t==null?void 0:t.name}))try{await Tl(s),m.success("Product removed"),await T({silent:!0})}catch(a){console.error("Failed to delete seller product",a),m.error(a.message||"Unable to delete seller product")}},[K,T]),V=n.useCallback((s,t)=>{g(l=>{const a={...l};let i=t;return s==="categoryPriority"&&(i=Vt(i)),["price","originalPrice","discountPercentage","saveAmount","stock","lowStockThreshold","costPrice","gstRate"].includes(s)&&(i=i===""||i===null?"":String(i).replace(/[^0-9.]/g,"")),a[s]=i,a})},[g]);n.useCallback(s=>{V("name",s);const t=Gl(s);t&&g(l=>{const a={...l};return(!je.hasManualHsn||!a.hsnCode)&&(a.hsnCode=t.hsnCode),(!je.hasManualGst||!a.gstRate)&&(a.gstRate=String(t.gstRate)),a})},[V,je.hasManualGst,je.hasManualHsn,g]),n.useCallback((s,t)=>{Ne(l=>({...l,[s==="hsnCode"?"hasManualHsn":"hasManualGst"]:!0})),V(s,t)},[V]);const tt=n.useCallback((s,t)=>{g(l=>{const a={...l,[s]:t};if(s==="showSizes"){const i=t?l.sizes&&l.sizes.length?l.sizes:he().map(o=>({label:o.label,isAvailable:!0,stock:"0"})):l.sizes||[];if(a.sizes=i,us.includes(l.availabilityStatus))a.stock="0";else{const o=ms(i.map(u=>({...u,stock:Number(u.stock??0)})));a.stock=t?String(o):l.stock}}return a})},[g]);n.useCallback(s=>{g(t=>{const l={...t,availabilityStatus:s};if(us.includes(s))l.stock="0";else if(t.showSizes){const a=ms((t.sizes||[]).map(i=>({...i,stock:Number(i.stock??0)})));l.stock=String(a)}return l})},[g]);const lt=n.useCallback((s,t)=>{g(l=>{const a={...l,[s]:t},i=parseFloat(s==="price"?t:l.price),o=parseFloat(s==="originalPrice"?t:l.originalPrice);if(!Number.isNaN(i)&&!Number.isNaN(o)&&o>=i&&o>0){const u=o-i;a.discountPercentage=Math.round(u/o*100).toString(),a.saveAmount=u.toFixed(2)}else a.discountPercentage="",a.saveAmount="";return a})},[g]);n.useCallback((s,t)=>{g(l=>{const a=Array.isArray(l.keyFeatures)?[...l.keyFeatures]:[""];return a[s]=t,{...l,keyFeatures:a}})},[g]),n.useCallback(()=>{g(s=>({...s,keyFeatures:[...s.keyFeatures||[],""]}))},[g]),n.useCallback(s=>{g(t=>{const l=Array.isArray(t.keyFeatures)?t.keyFeatures.filter((a,i)=>i!==s):[];return{...t,keyFeatures:l.length?l:[""]}})},[g]);const ae=n.useCallback((s,t,l)=>{g(a=>{const i=Array.isArray(a.sizes)?[...a.sizes]:[],o=i.length?i:he().map(p=>({label:p.label,isAvailable:!0,stock:"0"})),u=o[s]||{label:"",isAvailable:!0,stock:"0"};o[s]={...u,[t]:t==="stock"?String(l):l};const y=ms(o.map(p=>({...p,stock:Number(p.stock??0)})));return{...a,sizes:o,stock:a.showSizes&&!us.includes(a.availabilityStatus)?String(y):a.stock}})},[g]);n.useCallback(()=>{g(s=>({...s,sizes:[...s.sizes&&s.sizes.length?s.sizes:he().map(t=>({label:t.label,isAvailable:!0,stock:"0"})),{label:"",isAvailable:!0,stock:"0"}]}))},[g]),n.useCallback(s=>{g(t=>{const l=Array.isArray(t.sizes)?t.sizes.filter((a,i)=>i!==s):[];return{...t,sizes:l.length?l:he().map(a=>({label:a.label,isAvailable:!0,stock:"0"}))}})},[g]);const at=n.useCallback((s,t)=>{ae(s,"label",t.toUpperCase())},[ae]),rt=n.useCallback((s,t)=>{ae(s,"stock",t)},[ae]),nt=n.useCallback((s,t)=>{ae(s,"isAvailable",t)},[ae]);n.useCallback(async s=>{var l;const t=(l=s.target.files)==null?void 0:l[0];if(t){if(!t.type.startsWith("image/")){m.error("Please upload an image file for the thumbnail"),s.target.value="";return}if(t.size>Ut){m.error("Thumbnail must be under 2MB"),s.target.value="";return}ee(a=>({...a,thumbnail:!0}));try{const a=await $t(t);g(i=>({...i,thumbnail:a}))}catch{m.error("Failed to load thumbnail image")}finally{ee(a=>({...a,thumbnail:!1})),s.target.value=""}}},[g]),n.useCallback(()=>{g(s=>({...s,thumbnail:""}))},[g]),n.useCallback(async s=>{const t=Array.from(s.target.files||[]);if(!t.length)return;if(t.some(a=>!a.type.startsWith("image/"))){m.error("All gallery files must be images"),s.target.value="";return}if(t.find(a=>a.size>Ut)){m.error("Each gallery image must be under 2MB"),s.target.value="";return}ee(a=>({...a,gallery:!0}));try{const a=await Promise.all(t.map($t));g(i=>{const u=[...Array.isArray(i.gallery)?[...i.gallery]:[],...a];return{...i,gallery:u,images:u}})}catch{m.error("Failed to load gallery images")}finally{ee(a=>({...a,gallery:!1})),s.target.value=""}},[g]),n.useCallback(s=>{g(t=>{const l=Array.isArray(t.gallery)?t.gallery.filter((a,i)=>i!==s):[];return{...t,gallery:l,images:l}})},[g]),n.useCallback(()=>{const s=js.trim();s&&(g(t=>{const l=Array.isArray(t.gallery)?[...t.gallery]:[];return l.includes(s)||l.push(s),{...t,gallery:l,images:l}}),ve(""))},[js,g]),n.useCallback(s=>t=>V(s,t.target.value),[V]),n.useCallback(s=>t=>lt(s,t.target.value),[lt]),n.useCallback(s=>t=>tt(s,t.target.checked),[tt]),n.useCallback(s=>t=>at(s,t.target.value),[at]),n.useCallback(s=>t=>rt(s,t.target.value),[rt]),n.useCallback(s=>t=>nt(s,t.target.checked),[nt]);const yl=n.useCallback(async s=>{var a,i,o,u,y,p,P,re,Q;if(s.preventDefault(),!v.data||!v.draft){m.error("Missing product information");return}z(f=>({...f,isSubmitting:!0,error:null}));const t=v.draft,l={name:((a=t.name)==null?void 0:a.trim())||"",sku:((i=t.sku)==null?void 0:i.trim())||"",category:((o=t.category)==null?void 0:o.trim())||"",brand:((u=t.brand)==null?void 0:u.trim())||"",categoryPriority:Vt(t.categoryPriority),price:Number(t.price)||0,originalPrice:Number(t.originalPrice)||0,discountPercentage:t.discountPercentage!==""&&t.discountPercentage!==null?Number(t.discountPercentage):void 0,saveAmount:t.saveAmount!==""&&t.saveAmount!==null?Number(t.saveAmount):void 0,costPrice:t.costPrice!==""&&t.costPrice!==null?Number(t.costPrice):void 0,stock:Number(t.stock)||0,lowStockThreshold:t.lowStockThreshold!==""&&t.lowStockThreshold!==null?Number(t.lowStockThreshold):void 0,availabilityStatus:t.availabilityStatus||"in_stock",status:t.status||"published",isFeatured:!!t.isFeatured,showSizes:!!t.showSizes,description:((y=t.description)==null?void 0:y.trim())||"",shortDescription:((p=t.shortDescription)==null?void 0:p.trim())||"",hsnCode:((P=t.hsnCode)==null?void 0:P.trim())||"",gstRate:t.gstRate!==""&&t.gstRate!==null?Number(t.gstRate):void 0,thumbnail:t.thumbnail||"",gallery:Array.isArray(t.gallery)?t.gallery:[],images:Array.isArray(t.images)?t.images:[],keyFeatures:Array.isArray(t.keyFeatures)?t.keyFeatures.map(f=>f==null?void 0:f.trim()).filter(Boolean):[],sizes:t.showSizes&&Array.isArray(t.sizes)?t.sizes.map(f=>{var M;return{label:((M=f==null?void 0:f.label)==null?void 0:M.trim())||"",stock:Number(f==null?void 0:f.stock)||0,isAvailable:!!(f!=null&&f.isAvailable)}}):[],metadata:t.metadata&&typeof t.metadata=="object"?t.metadata:void 0};try{const f=await El(v.data._id,l);m.success("Product updated");const M=Z(f)||f;hs(R=>R.map(ne=>String(ne._id)===String(f._id)?Z({...ne,...M}):ne)),z(R=>({...R,isSubmitting:!1,isOpen:!1})),await T({silent:!0})}catch(f){console.error("Failed to update seller product",f);const M=((Q=(re=f==null?void 0:f.response)==null?void 0:re.data)==null?void 0:Q.message)||(f==null?void 0:f.message)||"Unable to update seller product";m.error(M),z(R=>({...R,isSubmitting:!1,error:M}))}},[v,T]),jl=async(s,t)=>{try{const l=await $l(s,t);m.success("Coupon updated"),We(a=>a.map(i=>i._id===l._id?{...i,...l}:i)),q(null),await se({silent:!0})}catch(l){console.error("Failed to update seller coupon",l),m.error(l.message||"Unable to update seller coupon")}},Nl=async s=>{const t=I.find(a=>a._id===s);if(ie({entity:"coupon",name:(t==null?void 0:t.code)||s}))try{await Mt(s),m.success("Coupon removed"),We(a=>a.filter(i=>i._id!==s)),await se({silent:!0})}catch(a){console.error("Failed to delete seller coupon",a),m.error(a.message||"Unable to delete seller coupon")}};return e.jsxs("div",{className:clsx("min-h-screen","md:h-screen","bg-slate-50","text-slate-900","overflow-x-hidden"),children:[e.jsxs("div",{className:clsx("flex","md:h-screen"),children:[e.jsx(At,{active:"Seller Details",className:clsx("hidden","md:flex","md:w-64","md:flex-none"),onNavigate:()=>b(!1)}),e.jsx(Gt,{children:h&&e.jsxs(Me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:clsx("fixed","inset-0","z-40","flex","md:hidden"),children:[e.jsx(Me.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:220,damping:24},className:clsx("bg-white","w-72","max-w-sm","h-full","shadow-xl"),children:e.jsx(At,{active:"Seller Details",className:clsx("flex","w-full"),onNavigate:()=>b(!1)})}),e.jsx("button",{type:"button",onClick:()=>b(!1),className:clsx("flex-1","bg-black/30"),"aria-label":"Close sidebar"})]})}),e.jsxs("div",{className:clsx("flex-1","flex","flex-col","overflow-hidden"),children:[e.jsx(vl,{onToggleSidebar:()=>b(s=>!s),activeRange:"All Time",onSelectRange:()=>{},adminName:(c==null?void 0:c.name)||(c==null?void 0:c.username)||"Admin",adminRole:(c==null?void 0:c.role)==="admin"?"Administrator":c==null?void 0:c.role,notifications:{pendingOrders:0,shippedOrders:0,deliveredOrders:0},showRangeSelector:!1,showNotifications:!1,onLogout:r}),e.jsxs("main",{className:clsx("flex-1","overflow-y-auto","px-4","py-6","md:px-8","space-y-6"),children:[e.jsxs("div",{className:clsx("flex","flex-col","gap-4","md:flex-row","md:items-center","md:justify-between"),children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:clsx("text-sm","text-slate-500"),children:"Dashboard / Sellers"}),e.jsx("h1",{className:clsx("text-2xl","font-semibold","text-slate-900"),children:"Seller Control Centre"})]}),e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","gap-3"),children:[e.jsxs("div",{className:clsx("flex","items-center","gap-2","rounded-xl","border","border-slate-200","px-3","py-2","bg-white"),children:[e.jsx(kl,{className:clsx("h-4","w-4","text-slate-400")}),e.jsx("input",{type:"search",value:d,onChange:s=>qt(s.target.value),placeholder:"Search sellers",className:clsx("w-48","bg-transparent","text-sm","text-slate-600","placeholder:text-slate-400","focus:outline-none")})]}),e.jsxs("button",{type:"button",onClick:()=>se({silent:!0}),disabled:ce,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-60"),children:[e.jsx(Pe,{size:16,className:ce?"animate-spin":void 0}),ce?"Refreshing":"Refresh Sellers"]})]})]}),e.jsx("section",{children:e.jsx("div",{className:clsx("grid","gap-3","sm:grid-cols-2","xl:grid-cols-5"),children:xl.map(({label:s,value:t,icon:l,accent:a})=>e.jsxs("div",{className:clsx("rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm"),children:[e.jsxs("div",{className:`flex items-center gap-3 text-sm font-medium ${a}`,children:[e.jsx(l,{size:18})," ",s]}),e.jsx("p",{className:clsx("mt-2","text-2xl","font-semibold","text-slate-900"),children:t})]},s))})}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("div",{className:clsx("flex","flex-wrap","items-center","justify-between","gap-3"),children:e.jsxs("div",{children:[e.jsx("h2",{className:clsx("text-lg","font-semibold","text-slate-900"),children:"Sellers"}),e.jsx("p",{className:clsx("text-sm","text-slate-500"),children:"Manage every seller account with verification and access controls."})]})}),fe&&e.jsx("div",{className:clsx("rounded-xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"),children:fe}),oe?e.jsx(H,{icon:ds,title:"Loading sellers",subtitle:"Fetching marketplace seller roster..."}):et.length===0?e.jsx(H,{icon:ds,title:"No sellers yet",subtitle:"Approved sellers will appear here for administration."}):e.jsx("div",{className:clsx("overflow-x-auto","rounded-2xl","border","border-slate-200","bg-white","shadow-sm"),children:e.jsxs("table",{className:clsx("min-w-full","divide-y","divide-slate-100","text-sm"),children:[e.jsx("thead",{className:"bg-slate-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Seller"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Verification"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Metrics"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Joined"}),e.jsx("th",{className:clsx("px-4","py-3","text-right","font-semibold","text-slate-500"),children:"Actions"})]})}),e.jsx("tbody",{className:clsx("divide-y","divide-slate-100"),children:et.map(s=>{var t,l,a;return e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","flex-col","gap-1"),children:[e.jsx("span",{className:clsx("text-sm","font-semibold","text-slate-900"),children:s.name||"Seller"}),e.jsxs("span",{className:clsx("text-xs","text-slate-500"),children:[s.email," · @",s.username]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("inline-flex","items-center","gap-2","rounded-full","border","px-3","py-1","text-xs","font-medium"),style:{borderColor:s.isVerified?"#34d399":"#f87171",color:s.isVerified?"#047857":"#b91c1c"},children:[s.isVerified?e.jsx(Rt,{size:14}):e.jsx(Dl,{size:14}),s.isVerified?"Verified":"Pending"]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:e.jsxs("div",{className:clsx("text-xs","text-slate-500","grid","gap-1"),children:[e.jsxs("span",{children:["Products: ",((t=s.metrics)==null?void 0:t.products)||0]}),e.jsxs("span",{children:["Orders: ",((l=s.metrics)==null?void 0:l.orders)||0]}),e.jsxs("span",{children:["Coupons: ",((a=s.metrics)==null?void 0:a.coupons)||0]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:Fe(s.createdAt)}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","items-center","justify-end","gap-2"),children:[e.jsx("button",{type:"button",onClick:()=>qs(s),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"View seller",children:e.jsx(Re,{size:16})}),e.jsx("button",{type:"button",onClick:()=>pe(s),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"Edit seller",children:e.jsx(De,{size:16})}),e.jsx("button",{type:"button",onClick:()=>st(s),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-rose-200","text-rose-500","transition","hover:border-rose-300","hover:text-rose-600"),"aria-label":"Delete seller",children:e.jsx(Oe,{size:16})})]})})]},s._id)})})]})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","justify-between","gap-3"),children:[e.jsxs("div",{children:[e.jsx("h2",{className:clsx("text-lg","font-semibold","text-slate-900"),children:"Seller Products"}),e.jsx("p",{className:clsx("text-sm","text-slate-500"),children:"Review every product launched by sellers and keep listings healthy."})]}),e.jsxs("div",{className:clsx("flex","items-center","gap-3"),children:[e.jsxs("div",{className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-slate-200","bg-white","px-3","py-2","text-sm","text-slate-600"),children:[e.jsx(Ol,{size:16,className:"text-slate-400"}),e.jsxs("select",{value:k,onChange:s=>ps(s.target.value),className:clsx("bg-transparent","focus:outline-none"),children:[e.jsx("option",{value:"all",children:"All sellers"}),j.map(s=>e.jsx("option",{value:s._id,children:s.name||s.username},s._id))]})]}),e.jsxs("button",{type:"button",onClick:()=>T({silent:!0}),disabled:_e,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-60"),children:[e.jsx(Pe,{size:16,className:_e?"animate-spin":void 0}),_e?"Refreshing":"Refresh Products"]})]})]}),fs&&e.jsx("div",{className:clsx("rounded-xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"),children:fs}),Qt?e.jsx(H,{icon:is,title:"Loading seller products",subtitle:"Collecting catalogue items..."}):K.length===0?e.jsx(H,{icon:is,title:"No seller products",subtitle:"Seller product listings will appear here."}):e.jsx("div",{className:clsx("overflow-x-auto","rounded-2xl","border","border-slate-200","bg-white","shadow-sm"),children:e.jsxs("table",{className:clsx("min-w-full","divide-y","divide-slate-100","text-sm"),children:[e.jsx("thead",{className:"bg-slate-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Product"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Seller"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Pricing"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Status"}),e.jsx("th",{className:clsx("px-4","py-3","text-right","font-semibold","text-slate-500"),children:"Actions"})]})}),e.jsx("tbody",{className:clsx("divide-y","divide-slate-100"),children:K.map(s=>{var i,o;const t=xs[s.status]||xs.archived,l=Et[s.availabilityStatus]||Et.in_stock,a=Lt(s.availabilityStatus);return e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","flex-col","gap-1"),children:[e.jsx("span",{className:clsx("text-sm","font-semibold","text-slate-900"),children:s.name}),e.jsxs("span",{className:clsx("text-xs","text-slate-500"),children:["SKU: ",s.sku]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:((i=s.sellerId)==null?void 0:i.name)||((o=s.sellerId)==null?void 0:o.username)||"Seller"}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:e.jsxs("div",{className:clsx("grid","gap-1"),children:[e.jsxs("span",{children:["Price: ",U(s.price)]}),e.jsxs("span",{children:["Stock: ",s.stock??0]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","flex-col","gap-2"),children:[e.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${t.className}`,children:t.label}),e.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${l}`,children:a})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","items-center","justify-end","gap-2"),children:[e.jsx("button",{type:"button",onClick:()=>ml(s._id),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"View product",children:e.jsx(Re,{size:16})}),e.jsx("button",{type:"button",onClick:()=>gl(s._id),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"Edit product",children:e.jsx(De,{size:16})}),e.jsx("button",{type:"button",onClick:()=>fl(s._id),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-rose-200","text-rose-500","transition","hover:border-rose-300","hover:text-rose-600"),"aria-label":"Delete product",children:e.jsx(Oe,{size:16})})]})})]},s._id)})})]})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","justify-between","gap-3"),children:[e.jsxs("div",{children:[e.jsx("h2",{className:clsx("text-lg","font-semibold","text-slate-900"),children:"Seller Orders"}),e.jsx("p",{className:clsx("text-sm","text-slate-500"),children:"Monitor seller fulfilment pipelines and adjust statuses instantly."})]}),e.jsxs("button",{type:"button",onClick:()=>B({silent:!0}),disabled:xe,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-60"),children:[e.jsx(Pe,{size:16,className:xe?"animate-spin":void 0}),xe?"Refreshing":"Refresh Orders"]})]}),e.jsxs("form",{onSubmit:Xt,className:clsx("mt-4","grid","gap-3","md:grid-cols-2","lg:grid-cols-5"),children:[e.jsxs("label",{className:clsx("flex","flex-col","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","font-semibold","uppercase","tracking-wide","text-slate-400"),children:"Order status"}),e.jsxs("select",{value:Ge,onChange:s=>qe(s.target.value),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:[e.jsx("option",{value:"",children:"All statuses"}),zt.map(s=>e.jsx("option",{value:s,children:s.replace(/_/g," ")},s))]})]}),e.jsxs("label",{className:clsx("flex","flex-col","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","font-semibold","uppercase","tracking-wide","text-slate-400"),children:"Seller name"}),e.jsx("input",{type:"text",value:Qe,onChange:s=>He(s.target.value),placeholder:"e.g. Vishal",className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("label",{className:clsx("flex","flex-col","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","font-semibold","uppercase","tracking-wide","text-slate-400"),children:"Min amount (₹)"}),e.jsx("input",{type:"text",inputMode:"decimal",value:Ye,onChange:s=>Ke(Ce(s.target.value)),placeholder:"0",className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("label",{className:clsx("flex","flex-col","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","font-semibold","uppercase","tracking-wide","text-slate-400"),children:"Max amount (₹)"}),e.jsx("input",{type:"text",inputMode:"decimal",value:Xe,onChange:s=>Je(Ce(s.target.value)),placeholder:"1000",className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("div",{className:clsx("flex","items-end","gap-2","md:col-span-2","lg:col-span-1"),children:[e.jsx("button",{type:"submit",disabled:Te||xe,className:clsx("inline-flex","flex-1","items-center","justify-center","rounded-xl","border","border-blue-600","bg-blue-600","px-4","py-2","text-sm","font-semibold","text-white","transition","hover:bg-blue-700","disabled:cursor-not-allowed","disabled:border-blue-300","disabled:bg-blue-300"),children:"Apply filters"}),e.jsx("button",{type:"button",onClick:Jt,disabled:Te||xe,className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-slate-300","hover:text-slate-700","disabled:cursor-not-allowed","disabled:opacity-60"),children:"Reset"})]})]}),Cs&&e.jsx("div",{className:clsx("rounded-xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"),children:Cs}),Te?e.jsx(H,{icon:os,title:"Loading seller orders",subtitle:"Gathering fulfilment data..."}):D.length===0?e.jsx(H,{icon:os,title:"No seller orders",subtitle:"Seller orders will surface as soon as customers purchase."}):e.jsxs("div",{className:clsx("space-y-4","rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm"),children:[e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","justify-between","gap-3","text-sm","text-slate-500"),children:[e.jsxs("span",{children:["Showing"," ",C.total?C.startIndex+1:0,"-",C.endIndex," of ",C.total]}),e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","gap-2"),children:[e.jsx("button",{type:"button",onClick:nl,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-slate-200","px-3","py-2","font-medium","text-slate-600","transition","hover:border-blue-200","hover:text-blue-600"),children:"Export CSV"}),e.jsxs("button",{type:"button",onClick:al,disabled:!_.size,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-rose-200","px-3","py-2","font-medium","text-rose-600","transition","hover:border-rose-300","hover:text-rose-700","disabled:cursor-not-allowed","disabled:opacity-60"),children:["Bulk delete (",_.size,")"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:clsx("min-w-full","divide-y","divide-slate-100","text-sm"),children:[e.jsx("thead",{className:"bg-slate-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:clsx("w-12","px-4","py-3","text-left","font-semibold","text-slate-500"),children:e.jsx("input",{ref:Ie,type:"checkbox",checked:as,onChange:Zt,className:clsx("h-4","w-4","rounded","border","border-slate-300","text-blue-600","focus:ring-blue-500")})}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Order"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Size"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Seller"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Customer"}),e.jsx("th",{className:clsx("px-4","py-3","text-center","font-semibold","text-slate-500"),children:"QR"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Totals"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Status"}),e.jsx("th",{className:clsx("px-4","py-3","text-right","font-semibold","text-slate-500"),children:"Actions"})]})}),e.jsx("tbody",{className:clsx("divide-y","divide-slate-100"),children:ts.map(s=>{var P,re,Q,f,M,R,ne,jt,Nt,vt,St,wt,kt,Ct;const t=String(s._id),l=s.orderId?String(s.orderId):t,a=cl(s),i=_.has(t),o=Array.isArray(s.items)&&s.items.length?s.items[0]:null,u=(o==null?void 0:o.size)||(o==null?void 0:o.selectedSize)||((P=o==null?void 0:o.options)==null?void 0:P.size)||"--",y=((re=s.qrfolio)==null?void 0:re.imageUrl)||((Q=s.qrfolio)==null?void 0:Q.image)||"",p=s.customerName||s.buyerName||((f=s.shippingAddress)==null?void 0:f.fullName)||"Customer";return e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsx("input",{type:"checkbox",checked:i,onChange:()=>Wt(t),className:clsx("h-4","w-4","rounded","border","border-slate-300","text-blue-600","focus:ring-blue-500")})}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","flex-col","gap-1"),children:[e.jsx("span",{className:clsx("text-sm","font-semibold","text-slate-900"),children:s.orderId||t}),e.jsxs("span",{className:clsx("text-xs","text-slate-500"),children:[((M=s.items)==null?void 0:M.length)||0," item(s)"]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:u}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:((R=s.sellerId)==null?void 0:R.name)||((ne=s.sellerId)==null?void 0:ne.companyName)||((jt=s.sellerId)==null?void 0:jt.username)||"Seller"}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:e.jsxs("div",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-sm","font-medium","text-slate-700"),children:p}),s.customerEmail||s.buyerEmail||(Nt=s.shippingAddress)!=null&&Nt.email?e.jsx("span",{className:clsx("break-all","text-xs","text-slate-500"),children:s.customerEmail||s.buyerEmail||((vt=s.shippingAddress)==null?void 0:vt.email)}):null]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-center"),children:e.jsx("button",{type:"button",onClick:()=>dl(s),disabled:!y||Rs===l,className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:bg-blue-50","hover:text-blue-600","disabled:cursor-not-allowed","disabled:border-slate-200","disabled:text-slate-300"),"aria-label":`Download QR for order ${l}`,children:Rs===l?e.jsx(Dt,{size:16,className:"animate-spin"}):e.jsx(Al,{size:16})})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:e.jsxs("div",{className:clsx("grid","gap-1"),children:[e.jsxs("span",{children:["Total:"," ",U(((St=s.orderPricing)==null?void 0:St.total)??((wt=s.totals)==null?void 0:wt.revenue))]}),e.jsxs("span",{children:["Quantity:"," ",((kt=s.orderPricing)==null?void 0:kt.quantity)??((Ct=s.totals)==null?void 0:Ct.quantity)??0]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:e.jsxs("div",{className:clsx("grid","gap-1"),children:[e.jsxs("span",{children:["Order: ",s.orderStatus]}),e.jsxs("span",{children:["Payment: ",s.paymentStatus]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","items-center","justify-end","gap-2"),children:[e.jsx("button",{type:"button",onClick:()=>Ms(s),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"View order",children:e.jsx(Re,{size:16})}),e.jsx("button",{type:"button",onClick:()=>ol(s),disabled:!a||Os===t,className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:border-slate-200","disabled:text-slate-300"),"aria-label":"Download invoice",title:a?"Download invoice":"Invoice available after payment",children:Os===t?e.jsx(Dt,{size:16,className:"animate-spin"}):e.jsx(Fl,{size:16})}),e.jsx("button",{type:"button",onClick:()=>te(s),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"Edit order",children:e.jsx(De,{size:16})}),e.jsx("button",{type:"button",onClick:()=>pl(s._id),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-rose-200","text-rose-500","transition","hover:border-rose-300","hover:text-rose-600"),"aria-label":"Delete order",children:e.jsx(Oe,{size:16})})]})})]},t)})})]})}),e.jsxs("div",{className:clsx("flex","flex-col","gap-3","border-t","border-slate-100","pt-4","text-sm","text-slate-600","md:flex-row","md:items-center","md:justify-between"),children:[e.jsxs("div",{className:clsx("flex","items-center","gap-2"),children:["Rows per page",e.jsx("select",{value:ue,onChange:el,className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:[10,20,50].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:clsx("flex","items-center","gap-2"),children:[e.jsx("button",{type:"button",onClick:()=>Xs(C.currentPage-1),disabled:C.currentPage<=1,className:clsx("rounded-xl","border","border-slate-200","px-3","py-1","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-50"),children:"Prev"}),e.jsxs("span",{children:["Page"," ",e.jsx("span",{className:"font-semibold",children:C.currentPage})," ","of",e.jsxs("span",{className:"font-semibold",children:[" ",C.totalPages]})]}),e.jsx("button",{type:"button",onClick:()=>Xs(C.currentPage+1),disabled:C.currentPage>=C.totalPages,className:clsx("rounded-xl","border","border-slate-200","px-3","py-1","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-50"),children:"Next"})]})]})]})]}),e.jsxs("section",{className:clsx("space-y-4","pb-12"),children:[e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","justify-between","gap-3"),children:[e.jsxs("div",{children:[e.jsx("h2",{className:clsx("text-lg","font-semibold","text-slate-900"),children:"Seller Coupons"}),e.jsx("p",{className:clsx("text-sm","text-slate-500"),children:"Keep seller coupons in sync with platform-wide promotional policies."})]}),e.jsxs("button",{type:"button",onClick:()=>le({silent:!0}),disabled:Ze,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-60"),children:[e.jsx(Pe,{size:16,className:Ze?"animate-spin":void 0}),Ze?"Refreshing":"Refresh Coupons"]})]}),$s&&e.jsx("div",{className:clsx("rounded-xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"),children:$s}),Yt?e.jsx(H,{icon:cs,title:"Loading seller coupons",subtitle:"Syncing incentive programs..."}):I.length===0?e.jsx(H,{icon:cs,title:"No seller coupons",subtitle:"Seller-generated coupons will surface here."}):e.jsxs("div",{className:clsx("space-y-4","rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm"),children:[e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","justify-between","gap-3","text-sm","text-slate-500"),children:[e.jsxs("span",{children:["Showing"," ",A.total?A.startIndex+1:0,"-",A.endIndex," of ",A.total]}),e.jsxs("div",{className:clsx("flex","flex-wrap","items-center","gap-2"),children:[e.jsx("button",{type:"button",onClick:il,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-slate-200","px-3","py-2","font-medium","text-slate-600","transition","hover:border-blue-200","hover:text-blue-600"),children:"Export CSV"}),e.jsxs("button",{type:"button",onClick:rl,disabled:!E.size,className:clsx("inline-flex","items-center","gap-2","rounded-xl","border","border-rose-200","px-3","py-2","font-medium","text-rose-600","transition","hover:border-rose-300","hover:text-rose-700","disabled:cursor-not-allowed","disabled:opacity-60"),children:["Bulk delete (",E.size,")"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:clsx("min-w-full","divide-y","divide-slate-100","text-sm"),children:[e.jsx("thead",{className:"bg-slate-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:clsx("w-12","px-4","py-3","text-left","font-semibold","text-slate-500"),children:e.jsx("input",{ref:Ee,type:"checkbox",checked:rs,onChange:tl,className:clsx("h-4","w-4","rounded","border","border-slate-300","text-blue-600","focus:ring-blue-500")})}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Code"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Seller"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Discount"}),e.jsx("th",{className:clsx("px-4","py-3","text-left","font-semibold","text-slate-500"),children:"Usage"}),e.jsx("th",{className:clsx("px-4","py-3","text-right","font-semibold","text-slate-500"),children:"Actions"})]})}),e.jsx("tbody",{className:clsx("divide-y","divide-slate-100"),children:ls.map(s=>{var a,i;const t=String(s._id),l=E.has(t);return e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsx("input",{type:"checkbox",checked:l,onChange:()=>sl(t),className:clsx("h-4","w-4","rounded","border","border-slate-300","text-blue-600","focus:ring-blue-500")})}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","flex-col","gap-1"),children:[e.jsx("span",{className:clsx("text-sm","font-semibold","text-slate-900"),children:s.code}),e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:s.description||"—"})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:((a=s.sellerId)==null?void 0:a.name)||((i=s.sellerId)==null?void 0:i.username)||"Seller"}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:e.jsxs("div",{className:clsx("grid","gap-1"),children:[e.jsx("span",{children:s.discountType==="percentage"?`${s.discountValue}%`:U(s.discountValue)}),e.jsxs("span",{children:["Min order:"," ",U(s.minOrderAmount||0)]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top","text-xs","text-slate-500"),children:e.jsxs("div",{className:clsx("grid","gap-1"),children:[e.jsxs("span",{children:["Active: ",s.isActive?"Yes":"No"]}),e.jsxs("span",{children:["Redeemed: ",s.usageCount||0," /"," ",s.maxRedemptions||"∞"]})]})}),e.jsx("td",{className:clsx("px-4","py-3","align-top"),children:e.jsxs("div",{className:clsx("flex","items-center","justify-end","gap-2"),children:[e.jsx("button",{type:"button",onClick:()=>Gs(s),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"View coupon",children:e.jsx(Re,{size:16})}),e.jsx("button",{type:"button",onClick:()=>q(s),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-slate-200","text-slate-500","transition","hover:border-blue-200","hover:text-blue-600"),"aria-label":"Edit coupon",children:e.jsx(De,{size:16})}),e.jsx("button",{type:"button",onClick:()=>Nl(s._id),className:clsx("inline-flex","h-9","w-9","items-center","justify-center","rounded-xl","border","border-rose-200","text-rose-500","transition","hover:border-rose-300","hover:text-rose-600"),"aria-label":"Delete coupon",children:e.jsx(Oe,{size:16})})]})})]},t)})})]})}),e.jsxs("div",{className:clsx("flex","flex-col","gap-3","border-t","border-slate-100","pt-4","text-sm","text-slate-600","md:flex-row","md:items-center","md:justify-between"),children:[e.jsxs("div",{className:clsx("flex","items-center","gap-2"),children:["Rows per page",e.jsx("select",{value:me,onChange:ll,className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:[10,20,50].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:clsx("flex","items-center","gap-2"),children:[e.jsx("button",{type:"button",onClick:()=>Js(A.currentPage-1),disabled:A.currentPage<=1,className:clsx("rounded-xl","border","border-slate-200","px-3","py-1","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-50"),children:"Prev"}),e.jsxs("span",{children:["Page"," ",e.jsx("span",{className:"font-semibold",children:A.currentPage})," ","of",e.jsxs("span",{className:"font-semibold",children:[" ",A.totalPages]})]}),e.jsx("button",{type:"button",onClick:()=>Js(A.currentPage+1),disabled:A.currentPage>=A.totalPages,className:clsx("rounded-xl","border","border-slate-200","px-3","py-1","transition","hover:border-blue-200","hover:text-blue-600","disabled:cursor-not-allowed","disabled:opacity-50"),children:"Next"})]})]})]})]})]})]})]}),e.jsx(W,{isOpen:!!w,title:w?w.companyName||w.name||w.username:"Seller",onClose:()=>qs(null),children:w?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Contact"}),e.jsxs("div",{className:clsx("mt-1","text-sm","text-slate-600"),children:[e.jsxs("p",{children:["Company: ",w.companyName||"--"]}),e.jsxs("p",{children:["Email: ",w.email]}),e.jsxs("p",{children:["Location: ",w.location||"--"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Status"}),e.jsxs("div",{className:clsx("mt-1","text-sm","text-slate-600"),children:[e.jsxs("p",{children:["Verified: ",w.isVerified?"Yes":"No"]}),e.jsxs("p",{children:["Role: ",w.role||"--"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Metrics"}),e.jsxs("div",{className:clsx("mt-1","text-sm","text-slate-600"),children:[e.jsxs("p",{children:["Products: ",((it=w.metrics)==null?void 0:it.products)||0]}),e.jsxs("p",{children:["Orders: ",((ot=w.metrics)==null?void 0:ot.orders)||0]}),e.jsxs("p",{children:["Coupons: ",((ct=w.metrics)==null?void 0:ct.coupons)||0]}),e.jsxs("p",{children:["Revenue: ",U(((dt=w.metrics)==null?void 0:dt.revenue)||0)]})]})]}),e.jsxs("p",{className:clsx("text-xs","text-slate-500"),children:["Joined ",Fe(w.createdAt)]})]}):null}),e.jsx(W,{isOpen:!!N,title:N?`Edit ${N.name||N.username}`:"Edit seller",onClose:()=>!ke&&!ss&&pe(null),footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>pe(null),disabled:ke,className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","hover:border-slate-300","hover:text-slate-700","disabled:cursor-not-allowed","disabled:opacity-60"),children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>ul({username:N==null?void 0:N.username,role:N==null?void 0:N.role,isVerified:!(N!=null&&N.isVerified)}),disabled:ke,className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-blue-600","bg-blue-600","px-4","py-2","text-sm","font-semibold","text-white","transition","hover:bg-blue-700","disabled:cursor-not-allowed","disabled:bg-blue-300"),children:ke?"Saving...":N!=null&&N.isVerified?"Mark Unverified":"Mark Verified"}),e.jsx("button",{type:"button",onClick:st,disabled:ss,className:clsx("inline-flex","items-center","justify-center","gap-2","rounded-xl","border","border-rose-200","px-4","py-2","text-sm","font-semibold","text-rose-600","hover:border-rose-300","hover:text-rose-700","disabled:cursor-not-allowed","disabled:opacity-60"),children:ss?"Removing...":"Delete Seller"})]}),children:N?e.jsxs("div",{className:clsx("space-y-3","text-sm","text-slate-600"),children:[e.jsxs("p",{children:["Username:"," ",e.jsxs("span",{className:"font-medium",children:["@",N.username]})]}),e.jsxs("p",{children:["Email: ",N.email]}),e.jsxs("p",{children:["Current status:"," ",N.isVerified?"Verified":"Pending verification"]})]}):null}),e.jsx(W,{isOpen:x.isOpen,title:"Product Details",onClose:bl,children:x.loading?e.jsx("div",{className:clsx("flex","items-center","justify-center","py-8","text-sm","text-gray-500"),children:"Loading product details..."}):x.error?e.jsx("div",{className:clsx("rounded-xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"),children:x.error}):x.data?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:clsx("grid","gap-4","sm:grid-cols-[1.2fr,0.8fr]"),children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:clsx("grid","gap-2","sm:grid-cols-2"),children:[e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Name"}),e.jsx("p",{className:clsx("text-base","font-semibold","text-slate-900"),children:x.data.name||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"SKU"}),e.jsx("p",{className:clsx("text-sm","font-medium","text-slate-700"),children:x.data.sku||x.data._id||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Category"}),e.jsx("p",{className:clsx("text-sm","text-slate-700"),children:x.data.category||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Brand"}),e.jsx("p",{className:clsx("text-sm","text-slate-700"),children:x.data.brand||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Seller"}),e.jsx("p",{className:clsx("text-sm","text-slate-700"),children:((xt=x.data.sellerId)==null?void 0:xt.companyName)||((ut=x.data.sellerId)==null?void 0:ut.name)||((mt=x.data.sellerId)==null?void 0:mt.username)||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"HSN / GST"}),e.jsxs("p",{className:clsx("text-sm","text-slate-700"),children:[x.data.hsnCode||"—"," ·"," ",x.data.gstRate!==void 0&&x.data.gstRate!==null?`${x.data.gstRate}%`:"—"]})]})]}),e.jsxs("div",{className:clsx("grid","gap-3","sm:grid-cols-2"),children:[e.jsxs("div",{className:clsx("rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm"),children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Price"}),e.jsx("p",{className:clsx("text-lg","font-semibold","text-slate-900"),children:U(x.data.price)}),e.jsxs("p",{className:clsx("text-xs","text-slate-500"),children:["Original"," ",U(x.data.originalPrice)]})]}),e.jsxs("div",{className:clsx("rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm"),children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Stock"}),e.jsx("p",{className:clsx("text-lg","font-semibold","text-slate-900"),children:x.data.stock??0}),e.jsxs("p",{className:clsx("text-xs","text-slate-500"),children:["Availability:"," ",Lt(x.data.availabilityStatus)]})]}),e.jsxs("div",{className:clsx("rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm"),children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Status"}),e.jsx("p",{className:clsx("text-lg","font-semibold","text-slate-900"),children:((pt=xs[x.data.status])==null?void 0:pt.label)||x.data.status}),e.jsxs("p",{className:clsx("text-xs","text-slate-500"),children:["Featured:"," ",x.data.isFeatured?"Yes":"No"]})]}),e.jsxs("div",{className:clsx("rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm"),children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Discount"}),e.jsxs("p",{className:clsx("text-lg","font-semibold","text-slate-900"),children:[Number(x.data.discountPercentage??0),"%"]}),e.jsxs("p",{className:clsx("text-xs","text-slate-500"),children:["Savings:"," ",U(x.data.saveAmount??0)]})]})]}),x.data.shortDescription?e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Short Description"}),e.jsx("p",{className:clsx("mt-1","rounded-xl","border","border-slate-200","bg-white","p-3","text-sm","text-slate-600"),children:x.data.shortDescription})]}):null,x.data.description?e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Description"}),e.jsx("p",{className:clsx("mt-1","whitespace-pre-line","rounded-xl","border","border-slate-200","bg-white","p-3","text-sm","text-slate-600"),children:x.data.description})]}):null,Array.isArray(x.data.keyFeatures)&&x.data.keyFeatures.length?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Key Features"}),e.jsx("ul",{className:clsx("grid","gap-2","sm:grid-cols-2"),children:x.data.keyFeatures.map((s,t)=>e.jsx("li",{className:clsx("rounded-xl","border","border-slate-200","bg-white","p-3","text-sm","text-slate-600"),children:s},`${s}-${t}`))})]}):null,Array.isArray(x.data.sizes)&&x.data.sizes.length?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Sizes"}),e.jsx("div",{className:clsx("grid","gap-2","sm:grid-cols-3"),children:x.data.sizes.map((s,t)=>e.jsxs("div",{className:clsx("rounded-xl","border","border-slate-200","bg-white","p-3","text-sm","text-slate-600"),children:[e.jsx("p",{className:clsx("text-xs","font-semibold","text-slate-500"),children:(s==null?void 0:s.label)||"—"}),e.jsxs("p",{className:clsx("text-sm","text-slate-700"),children:["Stock: ",(s==null?void 0:s.stock)??0]}),e.jsx("p",{className:clsx("text-xs","text-slate-500"),children:s!=null&&s.isAvailable?"Available":"Not available"})]},`${(s==null?void 0:s.label)||"size"}-${t}`))})]}):null]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:clsx("overflow-hidden","rounded-2xl","border","border-dashed","border-slate-200","bg-slate-50"),children:e.jsx("img",{src:x.data.thumbnail||((ht=x.data.gallery)==null?void 0:ht[0])||"https://placehold.co/480x480/f8fafc/e2e8f0?text=Thumbnail",alt:x.data.name||"Product thumbnail",className:clsx("h-64","w-full","object-cover"),onError:s=>{s.currentTarget.src="https://placehold.co/480x480/f8fafc/e2e8f0?text=Image"}})}),Array.isArray(x.data.gallery)&&x.data.gallery.length>1?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Gallery"}),e.jsx("div",{className:clsx("grid","grid-cols-3","gap-2"),children:x.data.gallery.map((s,t)=>e.jsx("div",{className:clsx("overflow-hidden","rounded-xl","border","border-slate-200","bg-white"),children:e.jsx("img",{src:s,alt:`${x.data.name||"Product"} ${t+1}`,className:clsx("h-24","w-full","object-cover"),onError:l=>{l.currentTarget.src="https://placehold.co/200x200/f8fafc/e2e8f0?text=Image"}})},`${s}-${t}`))})]}):null]})]})}):null}),e.jsx(W,{isOpen:v.isOpen,title:(bt=v.data)!=null&&bt.name?`Edit ${v.data.name}`:"Edit product",onClose:()=>{v.isSubmitting||ns()},children:v.loading?e.jsx("div",{className:clsx("flex","items-center","justify-center","py-8","text-sm","text-gray-500"),children:"Loading product details..."}):v.error?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:clsx("rounded-xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"),children:v.error}),e.jsx("div",{className:clsx("flex","justify-end"),children:e.jsx("button",{type:"button",onClick:ns,className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-slate-300","hover:text-slate-700"),children:"Close"})})]}):v.data&&v.draft?e.jsxs("form",{onSubmit:yl,className:"space-y-6",children:[e.jsxs("div",{className:clsx("grid","gap-4","sm:grid-cols-2"),children:[e.jsxs("label",{className:clsx("grid","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","uppercase","tracking-wide","text-slate-400"),children:"Price (₹)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:v.draft.price,onChange:s=>V("price",s.target.value),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("label",{className:clsx("grid","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","uppercase","tracking-wide","text-slate-400"),children:"Original price (₹)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:v.draft.originalPrice,onChange:s=>V("originalPrice",s.target.value),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("label",{className:clsx("grid","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","uppercase","tracking-wide","text-slate-400"),children:"Stock"}),e.jsx("input",{type:"number",min:"0",value:v.draft.stock,onChange:s=>V("stock",s.target.value),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("label",{className:clsx("grid","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","uppercase","tracking-wide","text-slate-400"),children:"Availability status"}),e.jsxs("select",{value:v.draft.availabilityStatus,onChange:s=>V("availabilityStatus",s.target.value),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:[e.jsx("option",{value:"in_stock",children:"In stock"}),e.jsx("option",{value:"low_stock",children:"Low stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of stock"}),e.jsx("option",{value:"preorder",children:"Pre-order"})]})]}),e.jsxs("label",{className:clsx("grid","gap-1","text-sm","text-slate-600"),children:[e.jsx("span",{className:clsx("text-xs","uppercase","tracking-wide","text-slate-400"),children:"Status"}),e.jsxs("select",{value:v.draft.status,onChange:s=>V("status",s.target.value),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:[e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:clsx("flex","justify-end","gap-3"),children:[e.jsx("button",{type:"button",onClick:ns,disabled:v.isSubmitting,className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-slate-300","hover:text-slate-700","disabled:cursor-not-allowed","disabled:opacity-60"),children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v.isSubmitting,className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-blue-600","bg-blue-600","px-4","py-2","text-sm","font-semibold","text-white","transition","hover:bg-blue-700","disabled:cursor-not-allowed","disabled:border-blue-300","disabled:bg-blue-300"),children:v.isSubmitting?"Saving...":"Save changes"})]})]}):e.jsx("p",{className:clsx("text-sm","text-slate-600"),children:"No product selected"})}),e.jsx(W,{isOpen:!!G,title:G?`Order ${G.orderId}`:"Order",onClose:()=>Ms(null),children:G?e.jsxs("div",{className:clsx("space-y-3","text-sm","text-slate-600"),children:[e.jsxs("div",{className:clsx("grid","gap-1"),children:[e.jsxs("p",{children:["Status: ",G.orderStatus]}),e.jsxs("p",{children:["Payment: ",G.paymentStatus]}),e.jsxs("p",{children:["Revenue: ",U((gt=G.totals)==null?void 0:gt.revenue)]}),e.jsxs("p",{children:["Quantity: ",((ft=G.totals)==null?void 0:ft.quantity)??0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:clsx("text-xs","uppercase","text-slate-400"),children:"Items"}),e.jsx("ul",{className:clsx("mt-2","space-y-2","text-sm","text-slate-600"),children:(yt=G.items)==null?void 0:yt.map(s=>e.jsxs("li",{className:clsx("rounded-xl","border","border-slate-200","px-3","py-2"),children:[e.jsx("p",{className:clsx("font-medium","text-slate-800"),children:s.name}),e.jsxs("p",{className:clsx("text-xs","text-slate-500"),children:["Qty ",s.quantity," · ",U(s.price)]})]},`${s.productId}-${s.name}`))})]})]}):null}),e.jsx(W,{isOpen:!!O,title:O?`Update order ${O.orderId}`:"Update order",onClose:()=>{Ve||te(null)},footer:e.jsx("button",{type:"button",onClick:()=>{O&&hl(O._id,{orderStatus:O.orderStatus,paymentStatus:O.paymentStatus,estimatedDeliveryDate:O.estimatedDeliveryDate})},disabled:Ve,className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-blue-600","bg-blue-600","px-4","py-2","text-sm","font-semibold","text-white","transition","hover:bg-blue-700"),children:Ve?"Saving...":"Save Changes"}),children:O?e.jsxs("div",{className:clsx("space-y-3","text-sm","text-slate-600"),children:[e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:"Order status"}),e.jsx("select",{value:O.orderStatus||"processing",onChange:s=>te(t=>({...t,orderStatus:s.target.value})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:zt.map(s=>e.jsx("option",{value:s,children:s.replace(/_/g," ")},s))})]}),e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:"Payment status"}),e.jsx("select",{value:O.paymentStatus||"pending",onChange:s=>te(t=>({...t,paymentStatus:s.target.value})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:Ql.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:"Estimated delivery"}),e.jsx("input",{type:"date",value:O.estimatedDeliveryDate?O.estimatedDeliveryDate.split("T")[0]:"",onChange:s=>te(t=>({...t,estimatedDeliveryDate:s.target.value?new Date(s.target.value).toISOString():null})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]})]}):null}),e.jsx(W,{isOpen:!!F,title:F?`Coupon ${F.code}`:"Coupon",onClose:()=>Gs(null),children:F?e.jsxs("div",{className:clsx("space-y-3","text-sm","text-slate-600"),children:[e.jsxs("p",{children:["Description: ",F.description||"—"]}),e.jsxs("p",{children:["Discount:"," ",F.discountType==="percentage"?`${F.discountValue}%`:U(F.discountValue)]}),e.jsxs("p",{children:["Usage: ",F.usageCount||0," /"," ",F.maxRedemptions||"∞"]}),e.jsxs("p",{children:["Active: ",F.isActive?"Yes":"No"]}),e.jsxs("p",{children:["Valid from: ",Fe(F.startDate)," ·"," ",Fe(F.endDate)]})]}):null}),e.jsx(W,{isOpen:!!S,title:S?`Edit coupon ${S.code}`:"Edit coupon",onClose:()=>q(null),footer:e.jsx("button",{type:"button",onClick:()=>{S&&jl(S._id,{description:S.description,discountType:S.discountType,discountValue:(S.discountType==="percentage",Number(S.discountValue)||0),minOrderAmount:Number(S.minOrderAmount)||0,maxRedemptions:Number(S.maxRedemptions)||0,isActive:!!S.isActive})},className:clsx("inline-flex","items-center","justify-center","rounded-xl","border","border-blue-600","bg-blue-600","px-4","py-2","text-sm","font-semibold","text-white","transition","hover:bg-blue-700"),children:"Save Changes"}),children:S?e.jsxs("div",{className:clsx("space-y-4","text-sm","text-slate-600"),children:[e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:"Description"}),e.jsx("textarea",{value:S.description||"",onChange:s=>q(t=>({...t,description:s.target.value})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),rows:3})]}),e.jsxs("div",{className:clsx("grid","gap-4","sm:grid-cols-2"),children:[e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:"Discount type"}),e.jsxs("select",{value:S.discountType||"percentage",onChange:s=>q(t=>({...t,discountType:s.target.value,discountValue:t.discountValue})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none"),children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"amount",children:"Flat amount"})]})]}),e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:S.discountType==="amount"?"Discount amount (₹)":"Discount percentage (%)"}),e.jsx("input",{type:"number",min:"0",step:S.discountType==="amount"?"0.01":"1",value:S.discountValue??"",onChange:s=>q(t=>({...t,discountValue:s.target.value})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:"Minimum order amount (₹)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:S.minOrderAmount??"",onChange:s=>q(t=>({...t,minOrderAmount:s.target.value})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]}),e.jsxs("label",{className:clsx("grid","gap-1"),children:[e.jsx("span",{className:clsx("text-xs","text-slate-500"),children:"Max redemptions"}),e.jsx("input",{type:"number",min:"1",value:S.maxRedemptions??"",onChange:s=>q(t=>({...t,maxRedemptions:s.target.value})),className:clsx("rounded-xl","border","border-slate-200","px-3","py-2","focus:border-blue-400","focus:outline-none")})]})]}),e.jsxs("label",{className:clsx("inline-flex","items-center","gap-3","rounded-xl","border","border-slate-200","px-3","py-2"),children:[e.jsx("input",{type:"checkbox",checked:!!S.isActive,onChange:s=>q(t=>({...t,isActive:s.target.checked})),className:clsx("h-4","w-4","rounded","border-slate-300","text-blue-600","focus:ring-blue-500")}),e.jsx("span",{className:clsx("text-sm","text-slate-600"),children:"Coupon is active"})]})]}):null})]})};export{ga as default};
