import{r as a,j as e,m as c,A as pe}from"./vendor-2d1PFKo4.js";import{c as Ee,d as Fe,X as L,a6 as h,a as X,aa as i}from"./index-Bpx0OnSg.js";import{E as K}from"./eye-DjBlpBi-.js";import{T as W}from"./trash-2-Chc1geHF.js";import{S as E}from"./shield-check-ZginSkgb.js";import{S as F}from"./shield-alert-l_ssT4iu.js";import{P as ue}from"./pencil-line-CoX3LYzN.js";import{I as Te}from"./info-GXZN73e0.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Oe=Ee("file-down",Re),S=w=>{const b=String(w||"").trim().toLowerCase();return["admin","seller","customer"].includes(b)?b:"customer"},D={admin:{label:"Admin",badgeClass:"bg-blue-100 text-blue-600"},seller:{label:"Seller",badgeClass:"bg-purple-100 text-purple-600"},customer:{label:"Customer",badgeClass:"bg-slate-100 text-slate-500"}},$e=[10,25,50,100],he=({users:w,isLoading:b,error:k,onUserUpdated:f,enableManagement:n})=>{var xe,me;const[be,B]=a.useState(!1),[T,q]=a.useState(!1),[ee,U]=a.useState(null),[j,te]=a.useState({name:"",username:"",email:"",mobile:"",role:"customer",isVerified:!1}),[g,se]=a.useState(null),[R,J]=a.useState(!1),[z,Q]=a.useState(null),[O,fe]=a.useState(""),[V,je]=a.useState("all"),[P,ge]=a.useState("all"),[d,_]=a.useState([]),[C,le]=a.useState(!1),[ye,I]=a.useState(!1),[Ne,$]=a.useState(!1),[N,ve]=a.useState(10),[p,Y]=a.useState(0);a.useEffect(()=>{if(!n){_([]);return}_(t=>t.filter(s=>w.some(l=>l._id===s)))},[n,w]),a.useEffect(()=>{d.length||$(!1)},[d]);const ae=t=>{U(t),te({name:t.name||"",username:t.username||"",email:t.email||"",mobile:t.mobile||"",role:S(t.role),isVerified:!!t.isVerified}),B(!0)},Z=()=>{T||(B(!1),U(null))},ie=t=>{se(t)},re=()=>se(null),ne=t=>{Q(t)},de=()=>{R||Q(null)},G=t=>{const{name:s,value:l,type:r,checked:o}=t.target;te(m=>({...m,[s]:r==="checkbox"?o:l}))},we=async t=>{var r,o;if(t.preventDefault(),!ee)return;const s=j.username.trim();if(!s){h.error("Username is required");return}const l=j.mobile.trim();if(!l){h.error("Mobile number is required");return}q(!0);try{const m={username:s,mobile:l,role:j.role,isVerified:j.isVerified},{data:u}=await X.put(`/admin/users/${ee._id}`,m);h.success("Team member updated"),q(!1),B(!1),U(null),f==null||f(u.data)}catch(m){console.error("Failed to update member",m);const u=((o=(r=m.response)==null?void 0:r.data)==null?void 0:o.message)||"Unable to update team member. Please try again.";h.error(u),q(!1)}},M=a.useMemo(()=>[...w].map(t=>({...t,role:S(t.role)})).sort((t,s)=>new Date(s.createdAt)-new Date(t.createdAt)),[w]),x=a.useMemo(()=>{const t=O.trim().toLowerCase();return M.filter(s=>{const l=t?[s.name,s.username,s.email,s.mobile].filter(Boolean).some(m=>m.toLowerCase().includes(t)):!0,r=V==="all"?!0:S(s.role)===V,o=P==="all"?!0:P==="verified"?!!s.isVerified:!s.isVerified;return l&&r&&o})},[M,O,V,P]);a.useEffect(()=>{Y(0)},[O,V,P,N,w]);const y=Math.max(1,Math.ceil(x.length/N));a.useEffect(()=>{Y(t=>Math.min(t,y-1))},[y]);const v=a.useMemo(()=>{const t=p*N;return x.slice(t,t+N)},[x,p,N]),ke=a.useMemo(()=>{if(x.length===0)return[];if(y<=5)return Array.from({length:y},(s,l)=>l);const t=Math.max(0,Math.min(p-2,y-5));return Array.from({length:5},(s,l)=>t+l)},[x.length,y,p]),Ce=x.length===0?0:p*N+1,Se=Math.min(x.length,(p+1)*N),De=t=>{ve(Number(t.target.value))},H=t=>{Y(Math.max(0,Math.min(t,y-1)))},ze=()=>{p!==0&&H(p-1)},Ae=()=>{p>=y-1||x.length===0||H(p+1)},Ve=()=>{if(!M.length){h.info("No team members to export");return}const t=["Name","Username","Email","Mobile","Role","Verified","Joined"],s=M.map(u=>[(u.name||"").replace(/\n|\r|"/g," "),(u.username||"").replace(/\n|\r|"/g," "),u.email,u.mobile||"",D[S(u.role)].label,u.isVerified?"Yes":"No",new Intl.DateTimeFormat("en-IN",{dateStyle:"medium",timeStyle:"short"}).format(new Date(u.createdAt))]),l=[t,...s].map(u=>u.map(Ie=>`"${String(Ie??"").replace(/"/g,'""')}"`).join(",")).join(`
`),r=new Blob(["\uFEFF"+l],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(r),m=document.createElement("a");m.href=o,m.setAttribute("download",`team-members-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(o)},Pe=async()=>{var t,s;if(z){J(!0);try{await X.delete(`/admin/users/${z._id}`),h.success("Team member deleted"),f==null||f({_id:z._id,__delete:!0}),J(!1),Q(null)}catch(l){console.error("Failed to delete member",l);const r=((s=(t=l.response)==null?void 0:t.data)==null?void 0:s.message)||"Unable to delete team member. Please try again.";h.error(r),J(!1)}}},oe=()=>{if(!n)return;const t=v.map(l=>l._id),s=t.some(l=>!d.includes(l));_(s?t:[])},ce=t=>{n&&_(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},_e=async()=>{var t,s;if(!d.length){h.info("Select at least one user to delete");return}le(!0);try{const{data:l}=await X.post("/admin/users/bulk-delete",{ids:d}),r=(l==null?void 0:l.deletedIds)||[],o=(l==null?void 0:l.skippedIds)||[];r.length&&(h.success(`Deleted ${r.length} user${r.length>1?"s":""}`),f==null||f({__bulkDelete:!0,deletedIds:r})),o.length&&h.warn(`Skipped ${o.length} user${o.length>1?"s":""}`),_([]),I(!1)}catch(l){console.error("Failed to bulk delete",l);const r=((s=(t=l.response)==null?void 0:t.data)==null?void 0:s.message)||"Unable to delete selected users.";h.error(r)}finally{le(!1)}},A=a.useMemo(()=>x.filter(t=>d.includes(t._id)),[x,d]);return e.jsxs(c.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.45,delay:.15},className:"bg-white border border-slate-100 rounded-2xl shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-100 px-6 py-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Customers"})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-slate-400"}),e.jsx("input",{type:"search",value:O,onChange:t=>fe(t.target.value),placeholder:"Search name, email, username",className:"w-48 bg-transparent text-[11px] text-slate-600 placeholder:text-slate-400 focus:outline-none"})]}),e.jsxs("select",{value:V,onChange:t=>je(t.target.value),className:"rounded-xl border border-slate-200 px-3 py-2 text-xs text-slate-600 focus:outline-none focus:border-blue-400",children:[e.jsx("option",{value:"all",children:"All roles"}),e.jsx("option",{value:"customer",children:"Customers"}),e.jsx("option",{value:"seller",children:"Sellers"}),e.jsx("option",{value:"admin",children:"Admins"})]}),e.jsxs("select",{value:P,onChange:t=>ge(t.target.value),className:"rounded-xl border border-slate-200 px-3 py-2 text-xs text-slate-600 focus:outline-none focus:border-blue-400",children:[e.jsx("option",{value:"all",children:"All status"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 text-xs text-slate-600",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Show"}),e.jsx("select",{value:N,onChange:De,className:"rounded-lg border border-slate-200 bg-white px-2 py-1 text-xs focus:outline-none focus:border-blue-400",children:$e.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("span",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"entries"})]}),e.jsxs("button",{type:"button",onClick:Ve,className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-[11px] text-slate-600 hover:border-blue-200 hover:text-blue-600 transition",children:[e.jsx(Oe,{size:18})," Export CSV"]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>$(!0),disabled:d.length===0,className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-[11px] font-medium text-slate-600 transition hover:border-blue-200 hover:text-blue-600 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-300",children:[e.jsx(K,{size:16})," Bulk View"]}),e.jsxs("button",{type:"button",onClick:()=>I(!0),disabled:d.length===0,className:"inline-flex items-center gap-2 rounded-xl border border-red-200 px-4 py-2 text-[11px] font-medium text-red-500 transition hover:border-red-300 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-300",children:[e.jsx(W,{size:16})," Bulk Delete"]})]})]})]}),e.jsx("div",{className:"hidden overflow-x-auto md:block",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[e.jsx("thead",{className:"bg-slate-50/80",children:e.jsxs("tr",{children:[n&&e.jsx("th",{className:"px-6 py-3",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:v.length>0&&v.every(t=>d.includes(t._id)),onChange:oe,className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"})})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Mobile"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:b?e.jsx("tr",{children:e.jsx("td",{colSpan:n?8:7,className:"px-6 py-12 text-center text-slate-400",children:"Loading team members..."})}):k?e.jsx("tr",{children:e.jsx("td",{colSpan:n?8:7,className:"px-6 py-12 text-center text-red-400",children:k})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:n?8:7,className:"px-6 py-12 text-center text-slate-400",children:"No users found."})}):v.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/60 transition",children:[n&&e.jsx("td",{className:"px-5 py-3",children:e.jsx("input",{type:"checkbox",checked:d.includes(t._id),onChange:()=>ce(t._id),className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-5 py-2.5 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 text-white grid place-items-center font-semibold",children:(t.name||t.username||"U").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[13px] font-semibold text-slate-900 leading-tight",children:t.name||t.username}),e.jsx("p",{className:"text-[10px] text-slate-400",children:t.username})]})]})}),e.jsx("td",{className:"px-5 py-2.5 whitespace-nowrap text-[11px] text-slate-600",children:t.email}),e.jsx("td",{className:"px-5 py-2.5 whitespace-nowrap text-[11px] text-slate-600",children:t.mobile||"—"}),e.jsx("td",{className:"px-5 py-2.5 whitespace-nowrap text-[11px]",children:(()=>{const s=S(t.role),{label:l,badgeClass:r}=D[s]||D.customer;return e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${r}`,children:l})})()}),e.jsx("td",{className:"px-5 py-2.5 whitespace-nowrap",children:t.isVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-600",children:[e.jsx(E,{size:14})," Verified"]}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-medium text-orange-500",children:[e.jsx(F,{size:14})," Pending"]})}),e.jsx("td",{className:"px-5 py-2.5 whitespace-nowrap text-right text-[11px] text-slate-500",children:new Intl.DateTimeFormat("en-IN",{dateStyle:"medium"}).format(new Date(t.createdAt))}),e.jsx("td",{className:"px-5 py-2.5 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex justify-end gap-1.5 text-[11px]",children:[e.jsx("button",{type:"button",onClick:()=>ie(t),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-2.5 py-1 text-[10px] font-medium text-slate-500 hover:border-blue-200 hover:text-blue-600 transition",children:e.jsx(K,{size:14})}),n&&e.jsx("button",{type:"button",onClick:()=>ae(t),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-2.5 py-1 text-[10px] font-medium text-slate-500 hover:border-blue-200 hover:text-blue-600 transition",children:e.jsx(ue,{size:14})}),n&&e.jsx("button",{type:"button",onClick:()=>ne(t),className:"inline-flex items-center gap-1 rounded-full border border-red-200 px-2.5 py-1 text-[10px] font-medium text-red-500 hover:border-red-300 hover:text-red-600 transition",children:e.jsx(W,{size:14})})]})})]},t._id))})]})}),e.jsxs("div",{className:"space-y-3 px-4 md:hidden",children:[n&&v.length>0&&e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Selection"}),e.jsxs("p",{className:"text-xs font-medium text-slate-700",children:[d.length," selected"]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-600",children:[e.jsx("input",{type:"checkbox",checked:v.length>0&&v.every(t=>d.includes(t._id)),onChange:oe,className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Select all"]})]}),e.jsxs(pe,{children:[b&&e.jsx(c.div,{className:"rounded-2xl border border-slate-200 bg-white p-6 text-center text-slate-500",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:"Loading team members..."}),!b&&k&&e.jsx(c.div,{className:"rounded-2xl border border-rose-200 bg-white p-6 text-center text-rose-600",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:k}),!b&&!k&&x.length===0&&e.jsx(c.div,{className:"rounded-2xl border border-slate-200 bg-white p-6 text-center text-slate-500",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:"No users found."}),!b&&!k&&v.map(t=>{const s=d.includes(t._id);return e.jsxs(c.div,{className:`relative rounded-2xl border bg-white p-4 shadow-sm transition focus-within:ring-2 focus-within:ring-blue-100 ${n&&s?"border-blue-300 ring-2 ring-blue-100":"border-slate-200"}`,initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},children:[n&&e.jsx("div",{className:"absolute -top-2 -left-2",children:e.jsxs("label",{className:"flex items-center gap-2 rounded-full bg-white/80 px-2 py-1 shadow-sm",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:()=>ce(t._id),className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-[11px] font-medium text-slate-600",children:"Select"})]})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-12 w-12 flex-shrink-0 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 text-white grid place-items-center font-semibold",children:(t.name||t.username||"U").charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:t.name||t.username}),e.jsx("p",{className:"text-xs text-slate-500",children:t.email}),e.jsx("p",{className:"text-xs text-slate-400",children:t.username})]}),(()=>{const l=S(t.role),{label:r,badgeClass:o}=D[l]||D.customer;return e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${o}`,children:r})})()]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-slate-500",children:[e.jsxs("div",{className:"rounded-xl bg-slate-50 p-2.5",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Status"}),t.isVerified?e.jsxs("span",{className:"mt-1 inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-[11px] font-medium text-emerald-600",children:[e.jsx(E,{size:12})," Verified"]}):e.jsxs("span",{className:"mt-1 inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-[11px] font-medium text-orange-500",children:[e.jsx(F,{size:12})," Pending"]})]}),e.jsxs("div",{className:"rounded-xl bg-slate-50 p-2.5",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Joined"}),e.jsx("p",{className:"mt-1 text-[11px] font-medium text-slate-700",children:new Intl.DateTimeFormat("en-IN",{dateStyle:"medium"}).format(new Date(t.createdAt))})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-end gap-1.5 text-[11px]",children:[e.jsxs("button",{type:"button",onClick:()=>ie(t),className:"inline-flex items-center gap-1.5 rounded-full border border-slate-200 px-3 py-1.5 font-semibold text-slate-600 hover:border-blue-200 hover:text-blue-600",children:[e.jsx(K,{size:14})," View"]}),n&&e.jsxs("button",{type:"button",onClick:()=>ae(t),className:"inline-flex w-full items-center justify-center gap-2 rounded-full border border-slate-200 px-3 py-2 text-xs font-medium text-slate-600 transition hover:border-blue-200 hover:text-blue-600",children:[e.jsx(ue,{size:14})," Edit"]}),n&&e.jsxs("button",{type:"button",onClick:()=>ne(t),className:"inline-flex items-center gap-1.5 rounded-full border border-rose-200 px-3 py-1.5 font-semibold text-rose-500 hover:border-rose-300",children:[e.jsx(W,{size:14})," Delete"]})]})]})]})]},t._id)})]})]}),!b&&!k&&x.length>0&&e.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-100 px-6 py-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:["Showing ",e.jsx("span",{className:"text-slate-600",children:Ce})," to",e.jsxs("span",{className:"text-slate-600",children:[" ",Se]})," of",e.jsxs("span",{className:"text-slate-600",children:[" ",x.length]})," ","entries"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:ze,disabled:p===0,className:"rounded-full border border-slate-200 px-3 py-1 text-xs text-slate-500 transition hover:border-blue-200 hover:text-blue-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:"Prev"}),ke.map(t=>e.jsx("button",{type:"button",onClick:()=>H(t),className:`rounded-full border px-3 py-1 text-xs transition ${t===p?"border-blue-500 bg-blue-50 text-blue-600":"border-slate-200 text-slate-500 hover:border-blue-200 hover:text-blue-600"}`,children:t+1},t)),e.jsx("button",{type:"button",onClick:Ae,disabled:p>=y-1,className:"rounded-full border border-slate-200 px-3 py-1 text-xs text-slate-500 transition hover:border-blue-200 hover:text-blue-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:"Next"})]})]}),e.jsxs(pe,{children:[g&&e.jsxs(c.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:re,"aria-label":"Close view modal"}),e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:240,damping:24},className:"relative z-10 w-full max-w-lg rounded-2xl bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Team Member Details"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Quick snapshot of account information."})]}),e.jsx("button",{type:"button",onClick:re,className:"rounded-full border border-slate-200 text-slate-400 hover:text-slate-600 hover:border-slate-300 p-1","aria-label":"Close",children:e.jsx(L,{size:18})})]}),e.jsxs("div",{className:"px-6 py-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Name"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:g.name||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Username"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:g.username||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:g.email})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[(()=>{const t=S(g.role),{label:s,badgeClass:l}=D[t]||D.customer;return e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${l}`,children:s})})(),g.isVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-600",children:[e.jsx(E,{size:14})," Verified"]}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-medium text-orange-500",children:[e.jsx(F,{size:14})," Pending Verification"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Joined"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:new Intl.DateTimeFormat("en-IN",{dateStyle:"medium",timeStyle:"short"}).format(new Date(g.createdAt))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Addresses"}),!((xe=g.addresses)!=null&&xe.length)&&e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"No saved addresses"}),(me=g.addresses)==null?void 0:me.map(t=>e.jsxs("div",{className:"mt-3 rounded-xl border border-slate-100 bg-slate-50 px-4 py-3 text-sm text-slate-700",children:[e.jsxs("p",{className:"font-semibold text-slate-900",children:[t.fullName,t.isDefault?e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-[11px] font-medium text-blue-600",children:"Default"}):null]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[t.mobile,t.alternatePhone?` · Alt: ${t.alternatePhone}`:""]}),e.jsxs("p",{className:"mt-1 leading-relaxed",children:[t.addressLine,", ",t.city,", ",t.state," -"," ",t.pincode]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t.email})]},t._id))]})]})]})]}),ye&&e.jsxs(c.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>{C||I(!1)},"aria-label":"Close selection overview"}),e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:240,damping:24},className:"relative z-10 w-full max-w-3xl rounded-2xl bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between px-6 py-4 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:["Selected users (",d.length,")"]}),e.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx(Te,{size:16,className:"text-blue-500"})," Review the list before deleting accounts."]})]}),e.jsx("button",{type:"button",onClick:()=>{C||I(!1)},className:"rounded-full border border-slate-200 text-slate-400 hover:text-slate-600 hover:border-slate-300 p-1","aria-label":"Close",disabled:C,children:e.jsx(L,{size:18})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto px-6 py-4",children:A.length?e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs uppercase tracking-wide text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Name"}),e.jsx("th",{className:"px-4 py-3",children:"Email"}),e.jsx("th",{className:"px-4 py-3",children:"Role"}),e.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 bg-white text-slate-700",children:A.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:t.name||t.username}),e.jsx("p",{className:"text-xs text-slate-400",children:t.username})]}),e.jsx("td",{className:"px-4 py-3",children:t.email}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium ${t.role==="admin"?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-600"}`,children:t.role==="admin"?"Admin":"Customer"})}),e.jsx("td",{className:"px-4 py-3",children:t.isVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-[11px] font-medium text-emerald-600",children:[e.jsx(E,{size:12})," Verified"]}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-[11px] font-medium text-orange-500",children:[e.jsx(F,{size:12})," Pending"]})})]},t._id))})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No users selected or some accounts are no longer available."})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-100",children:[e.jsx("button",{type:"button",onClick:()=>{C||I(!1)},className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-500 hover:text-slate-700 hover:border-slate-300 transition",disabled:C,children:"Cancel"}),e.jsx("button",{type:"button",onClick:_e,className:"inline-flex items-center gap-2 rounded-xl bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition disabled:opacity-60",disabled:C||!A.length,children:C?"Deleting...":"Delete Selected"})]})]})]}),be&&e.jsxs(c.div,{className:"fixed inset-0 z-50 flex",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("button",{type:"button",className:"flex-1 bg-black/40",onClick:Z,"aria-label":"Close edit panel"}),e.jsxs(c.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:200,damping:26},className:"w-full max-w-md bg-white h-full overflow-y-auto shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Edit Team Member"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Update profile details and access for this account."})]}),e.jsx("button",{type:"button",onClick:Z,className:"rounded-full border border-slate-200 text-slate-400 hover:text-slate-600 hover:border-slate-300 p-1","aria-label":"Close",children:e.jsx(L,{size:18})})]}),e.jsxs("form",{className:"px-6 py-6 space-y-5",onSubmit:we,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",htmlFor:"name",children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",value:j.name,readOnly:!0,className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:outline-none",placeholder:"e.g. Priya Sharma","aria-readonly":"true"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Name changes must be requested by the user."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",htmlFor:"username",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",value:j.username,onChange:G,className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100",placeholder:"e.g. priyash",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",value:j.email,readOnly:!0,className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:outline-none",placeholder:"e.g. priya@example.com",required:!0,"aria-readonly":"true"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Email cannot be modified by admin."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",htmlFor:"role",children:"Role"}),e.jsxs("select",{id:"role",name:"role",value:j.role,onChange:G,className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-600 focus:border-blue-400 focus:outline-none",children:[e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"seller",children:"Seller"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 rounded-xl border border-slate-200 px-3 py-3 text-sm text-slate-600",children:[e.jsx("input",{type:"checkbox",name:"isVerified",checked:j.isVerified,onChange:G,className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Mark email as verified"]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[e.jsx("button",{type:"button",onClick:Z,className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-500 hover:text-slate-700 hover:border-slate-300 transition",disabled:T,children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition disabled:opacity-60",disabled:T,children:T?"Saving...":"Save Changes"})]})]})]})]}),z&&e.jsxs(c.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:de,"aria-label":"Dismiss delete confirmation"}),e.jsx(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:240,damping:24},className:"relative z-10 w-full max-w-md rounded-2xl bg-white shadow-2xl",children:e.jsxs("div",{className:"px-6 py-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Delete Team Member"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["This will permanently remove"," ",z.name||z.username,"'s account access."]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:de,className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-500 hover:text-slate-700 hover:border-slate-300 transition",disabled:R,children:"Cancel"}),e.jsx("button",{type:"button",onClick:Pe,className:"inline-flex items-center gap-2 rounded-xl bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition disabled:opacity-60",disabled:R,children:R?"Deleting...":"Delete"})]})]})})]}),Ne&&e.jsxs(c.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>$(!1),"aria-label":"Close bulk view"}),e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:240,damping:24},className:"relative z-10 w-full max-w-4xl rounded-2xl bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between px-6 py-4 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:["Selected customers (",A.length,")"]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Review key details before performing a bulk action."})]}),e.jsx("button",{type:"button",onClick:()=>$(!1),className:"rounded-full border border-slate-200 text-slate-400 hover:text-slate-600 hover:border-slate-300 p-1","aria-label":"Close",children:e.jsx(L,{size:18})})]}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto px-6 py-5 space-y-4",children:A.length?A.map(t=>e.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50 px-4 py-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:t.name||t.username||"Unnamed"}),e.jsx("p",{className:"text-xs text-slate-500",children:t.email})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${t.role==="admin"?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-500"}`,children:t.role==="admin"?"Admin":"Customer"}),t.isVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-600",children:[e.jsx(E,{size:14})," Verified"]}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-medium text-orange-500",children:[e.jsx(F,{size:14})," Pending"]})]})]}),e.jsxs("div",{className:"mt-3 grid gap-3 text-xs text-slate-600 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Username"}),e.jsx("p",{className:"mt-1 font-medium text-slate-700",children:t.username||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Joined"}),e.jsx("p",{className:"mt-1 font-medium text-slate-700",children:new Intl.DateTimeFormat("en-IN",{dateStyle:"medium"}).format(new Date(t.createdAt))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Addresses saved"}),e.jsx("p",{className:"mt-1 font-medium text-slate-700",children:Array.isArray(t.addresses)?t.addresses.length:0})]})]})]},t._id)):e.jsx("p",{className:"text-sm text-slate-500",children:"No customers selected."})})]})]})]})]})};he.propTypes={users:i.arrayOf(i.shape({_id:i.string.isRequired,name:i.string,username:i.string,email:i.string.isRequired,role:i.string,isVerified:i.bool,createdAt:i.string,addresses:i.arrayOf(i.shape({_id:i.string,fullName:i.string,mobile:i.string,email:i.string,pincode:i.string,state:i.string,city:i.string,addressLine:i.string,alternatePhone:i.string,isDefault:i.bool}))})),isLoading:i.bool,error:i.string,onUserUpdated:i.func,enableManagement:i.bool};he.defaultProps={users:[],isLoading:!1,error:"",onUserUpdated:void 0,enableManagement:!1};export{he as A};
