import{r as c,j as e,m as i,A as Q,R as q}from"./vendor-2d1PFKo4.js";import{c as T,j as R,u as I,z as L,A as H,L as j,r as M,s as A,o as D,w as E}from"./index-Bpx0OnSg.js";import{p as v,s as F,a as _,c as K}from"./animations-CMxtCVje.js";import{P as V}from"./plus-BZuZgauU.js";import{T as Y}from"./trash-2-Chc1geHF.js";import"./react-BzrpNAyj.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M5 12h14",key:"1ays0h"}]],G=T("minus",B),tt=()=>{const{cartItems:m,updateQuantity:u,removeItem:N,cartCount:b,cartTotal:k}=R(),w=I(),x=L(),[p,g]=c.useState({}),d=c.useCallback(t=>{if(!t)return"";const s=t.id||t.product||t.mongoId||t._id||t.slug||"",a=t.size||"";return`${s}::${a}`},[]),C=c.useCallback(t=>{const s=d(t),a=p[s];return a===void 0?String(t.quantity):a},[p,d]),S=c.useCallback((t,s)=>{const a=d(t),r=s.replace(/[^0-9]/g,"");g(o=>({...o,[a]:r}))},[d]),h=c.useCallback(t=>{const s=d(t),a=p[s];if(a===void 0)return;const r=Number(a);if(!Number.isFinite(r)||r<=0){u(t.id,1,t.size),g(o=>{const n={...o};return delete n[s],n});return}u(t.id,r,t.size),g(o=>{const n={...o};return delete n[s],n})},[d,p,u]),z=c.useCallback(t=>{h(t)},[h]),P=c.useCallback((t,s)=>{t.key==="Enter"&&(t.preventDefault(),h(s))},[h]),y=c.useMemo(()=>{const t=/^[a-f\d]{24}$/i,s=a=>{if(!a||typeof a!="object")return null;const r=[a.product,a.mongoId,a._id,a.id,a.slug,a.productId],o=new Set;for(;r.length;){const n=r.shift();if(n!=null){if(typeof n=="string"||typeof n=="number"){const f=String(n).trim();if(t.test(f))return f;continue}if(typeof n=="object"){if(o.has(n))continue;if(o.add(n),typeof n.$oid=="string"&&t.test(n.$oid))return n.$oid.trim();if(typeof n.toHexString=="function"){const l=n.toHexString();if(t.test(l))return l}const f=[n._id,n.mongoId,n.id,n.product,n.slug,n.$id];if(r.push(...f.filter(l=>l!==void 0)),n.toString&&n.toString!==Object.prototype.toString&&typeof n.toString=="function"){const l=n.toString();if(typeof l=="string"&&t.test(l.trim()))return l.trim()}}}}return null};return m.map(a=>{const r=s(a);return{...a,product:r||a.product,quantity:Number(a.quantity)||1,price:Number(a.price)||0}})},[m]),$=()=>{y.length&&(x(M()),x(A(y)),x(D({subtotal:y.reduce((t,s)=>t+s.price*s.quantity,0),shippingFee:0,taxAmount:0,discount:0,total:y.reduce((t,s)=>t+s.price*s.quantity,0)})),x(E("order")),w("/checkout/order"))};return b===0?e.jsxs(i.div,{className:"container mx-auto px-4 py-16 text-center",variants:v,initial:"initial",animate:"animate",exit:"exit",children:[e.jsx(i.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:e.jsx(H,{className:"mx-auto h-24 w-24 text-gray-300"})}),e.jsx(i.h2,{className:"mt-6 text-2xl font-bold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:"Your Cart is Empty"}),e.jsx(i.p,{className:"mt-2 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"Looks like you haven't added anything to your cart yet."}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(j,{to:"/",className:"mt-6 inline-block bg-primary text-white font-bold py-3 px-6 rounded-md hover:bg-primary-dark transition-colors",children:"Start Shopping"})})]}):e.jsxs(i.div,{className:"container mx-auto max-w-4xl px-4 py-8 overflow-x-hidden",variants:v,initial:"initial",animate:"animate",exit:"exit",children:[e.jsxs(i.h1,{className:"text-3xl font-bold mb-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:["Your Shopping Cart (",b," items)"]}),e.jsx(i.div,{className:"space-y-4",variants:F,initial:"initial",animate:"animate",children:e.jsx(Q,{children:m.map(t=>e.jsx(i.div,{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm backdrop-blur-sm",variants:_,layout:!0,exit:{opacity:0,x:-100,transition:{duration:.3}},children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start",children:[e.jsx("img",{src:t.image,alt:t.name,className:"h-24 w-24 flex-shrink-0 rounded-lg object-contain bg-slate-50"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(j,{to:`/product/${t.id}`,className:"text-base font-semibold text-slate-800 hover:text-primary",children:t.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Unit price: ₹",t.price.toLocaleString()]}),(()=>{const s=[];if(t!=null&&t.hsnCode&&s.push(`HSN: ${t.hsnCode}`),Number.isFinite(Number(t==null?void 0:t.gstRate))){const a=Number(t.gstRate).toFixed(2).replace(/\.00$/,"");s.push(`GST: ${a}%`)}return t!=null&&t.size&&s.push(`Size: ${t.size}`),s.length?e.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:s.map((a,r)=>e.jsxs(q.Fragment,{children:[r>0?e.jsx("span",{className:"text-slate-300",children:"|"}):null,e.jsx("span",{children:a})]},`${t.id}-meta-${a}`))}):null})()]}),e.jsxs("div",{className:"flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 rounded-full border border-slate-200 bg-white px-3 py-1.5 shadow-sm",children:[e.jsx("button",{onClick:()=>u(t.id,t.quantity-1,t.size),className:"rounded-full p-1.5 transition hover:bg-slate-100","aria-label":"Decrease quantity",children:e.jsx(G,{size:16})}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-14 text-center text-sm font-semibold text-slate-700 border border-transparent focus:border-primary focus:outline-none rounded-md py-1",value:C(t),onChange:s=>S(t,s.target.value),onBlur:()=>z(t),onKeyDown:s=>P(s,t),"aria-label":`Quantity for ${t.name}`}),e.jsx("button",{onClick:()=>u(t.id,t.quantity+1,t.size),disabled:t!=null&&t.isSellerProduct&&(t!=null&&t.maxPurchaseQuantity)?t.quantity>=t.maxPurchaseQuantity:!1,className:`rounded-full p-1.5 transition ${t!=null&&t.isSellerProduct&&(t!=null&&t.maxPurchaseQuantity)&&t.quantity>=t.maxPurchaseQuantity?"cursor-not-allowed bg-slate-100 text-slate-300":"hover:bg-slate-100"}`,"aria-label":"Increase quantity",children:e.jsx(V,{size:16})})]}),e.jsxs("p",{className:"text-base font-semibold text-slate-900 sm:text-right sm:text-lg",children:["₹",(t.price*t.quantity).toLocaleString()]})]}),e.jsx("div",{className:"flex flex-col gap-3 border-t border-slate-200 pt-3 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs(i.button,{onClick:()=>N(t.id,t.size),className:"inline-flex items-center gap-2 text-sm font-medium text-slate-500 transition hover:text-rose-500",whileHover:{scale:1.03},whileTap:{scale:.97},type:"button",children:[e.jsx(Y,{size:18})," Remove"]})})]})]})},t.id))})}),e.jsxs(i.div,{className:"mt-8 rounded-3xl border border-slate-200 bg-white/95 p-6 shadow-sm backdrop-blur-sm",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,type:"spring",stiffness:140},children:[e.jsxs("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-xs font-semibold tracking-[0.2em] text-slate-500",children:"ORDER SUMMARY"}),e.jsxs("p",{className:"mt-1 text-3xl font-semibold text-secondary",children:["₹",k.toLocaleString()]}),e.jsx("p",{className:"mt-1 text-xs text-slate-400 sm:hidden",children:"Taxes and shipping calculated at checkout."})]}),e.jsx(i.button,{onClick:$,className:"inline-flex w-full items-center justify-center rounded-2xl bg-primary px-6 py-4 text-sm font-semibold text-white shadow-md transition hover:bg-primary-dark sm:w-auto sm:rounded-full",variants:K,whileHover:"hover",whileTap:"tap",type:"button",children:"Proceed to Checkout"})]}),e.jsx("p",{className:"mt-3 hidden text-xs text-slate-400 sm:block",children:"Taxes and shipping will be calculated at checkout."})]})]})};export{tt as default};
