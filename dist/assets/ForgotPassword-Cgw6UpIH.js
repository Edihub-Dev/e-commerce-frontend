import{r as o,j as s,m}from"./vendor-2d1PFKo4.js";import{u as N,L as k,a7 as S,a6 as u}from"./index-Bpx0OnSg.js";import{p as C,d as E,c as R}from"./animations-CMxtCVje.js";import{E as p,a as F}from"./validators-C0nLAwdN.js";import{E as x}from"./eye-DjBlpBi-.js";import"./react-BzrpNAyj.js";const O=()=>{const[r,w]=o.useState({email:"",password:"",confirmPassword:""}),[a,f]=o.useState({}),[i,h]=o.useState(!1),[n,y]=o.useState(!1),[l,c]=o.useState(!1),b=N(),d=e=>{const{name:t,value:v}=e.target;w(P=>({...P,[t]:v}))},g=()=>{const e={};if(r.email||(e.email="Email is required"),!r.password)e.password="Password is required";else{const{error:t}=F.validate(r.password);t&&(e.password=t.message)}return r.confirmPassword?r.password!==r.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",f(e),Object.keys(e).length===0},j=async e=>{if(e.preventDefault(),!!g())try{c(!0),await S({email:r.email,newPassword:r.password}),u.success("Reset code sent to your email. Please check your inbox.",{autoClose:1e3}),b("/reset-password-otp",{state:{email:r.email}})}catch(t){u.error(t.message,{autoClose:1e3})}finally{c(!1)}};return s.jsx(m.div,{className:"container mx-auto px-4 py-16 flex justify-center",variants:C,initial:"initial",animate:"animate",exit:"exit",children:s.jsxs(m.div,{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md border",variants:E,initial:"initial",animate:"animate",children:[s.jsx("h2",{className:"text-2xl font-bold text-center",children:"Reset your password"}),s.jsx("p",{className:"text-sm text-center text-gray-600",children:"Enter your account email and choose a new password. We'll send a verification code to confirm the change."}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),s.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:d,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${a.email?"border-red-500":"border-gray-300"}`}),a.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:i?"text":"password",id:"password",name:"password",value:r.password,onChange:d,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${a.password?"border-red-500":"border-gray-300"}`}),s.jsx("button",{type:"button",onClick:()=>h(e=>!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":i?"Hide password":"Show password",children:i?s.jsx(p,{size:18}):s.jsx(x,{size:18})})]}),a.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:n?"text":"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:d,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${a.confirmPassword?"border-red-500":"border-gray-300"}`}),s.jsx("button",{type:"button",onClick:()=>y(e=>!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":n?"Hide confirm password":"Show confirm password",children:n?s.jsx(p,{size:18}):s.jsx(x,{size:18})})]}),a.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword})]}),s.jsx("div",{children:s.jsx(m.button,{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-70",variants:R,whileHover:"hover",whileTap:"tap",children:l?"Sending code...":"Reset Password"})})]}),s.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Remembered your password?"," ",s.jsx(k,{to:"/login",className:"font-medium text-primary hover:underline",children:"Back to login"})]})]})})};export{O as default};
