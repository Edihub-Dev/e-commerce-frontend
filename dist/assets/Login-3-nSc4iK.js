import{r as o,j as e,m as c}from"./vendor-2d1PFKo4.js";import{I as k,u as D,k as C,L as g,a6 as F}from"./index-Bpx0OnSg.js";import{E as L,l as I}from"./validators-C0nLAwdN.js";import{p as P,d as $,c as H}from"./animations-CMxtCVje.js";import{E as R}from"./eye-DjBlpBi-.js";import"./react-BzrpNAyj.js";const q=()=>{var y;const[i,w]=o.useState({email:"",password:""}),[m,b]=o.useState(!1),[r,u]=o.useState({}),[p,x]=o.useState(!1),f=o.useRef(null),{login:j}=k(),v=D(),d=C(),N=(y=d.state)!=null&&y.from?`${d.state.from.pathname||""}${d.state.from.search||""}`:"/",h=t=>{const{name:a,value:n}=t.target;w(s=>({...s,[a]:n}))},E=t=>{var a;t.key==="Enter"&&(t.preventDefault(),(a=f.current)==null||a.focus())},S=async t=>{var n;t.preventDefault();const{error:a}=I.validate(i,{abortEarly:!1});if(a){const s={};a.details.forEach(l=>{s[l.path[0]]=l.message}),u(s);return}u({});try{x(!0);const s=await j(i),l=((n=s==null?void 0:s.user)==null?void 0:n.role)==="seller"?"/seller/dashboard":N;v(l,{replace:!0})}catch(s){F.error(s.message||"Failed to log in.",{autoClose:1e3})}finally{x(!1)}};return e.jsx(c.div,{className:"container mx-auto px-4 py-16 flex justify-center",variants:P,initial:"initial",animate:"animate",exit:"exit",children:e.jsxs(c.div,{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md border",variants:$,initial:"initial",animate:"animate",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:"Login to p2pdeal"}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",id:"email",value:i.email,onChange:h,onKeyDown:E,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.email?"border-red-500":"border-gray-300"}`}),r.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx(g,{to:"/forgot-password",className:"text-xs font-medium text-primary hover:underline",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:m?"text":"password",name:"password",id:"password",value:i.password,onChange:h,ref:f,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.password?"border-red-500":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>b(t=>!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":m?"Hide password":"Show password",children:m?e.jsx(L,{size:18}):e.jsx(R,{size:18})})]}),r.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.password})]}),e.jsx("div",{children:e.jsx(c.button,{type:"submit",disabled:p,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-70",variants:H,whileHover:"hover",whileTap:"tap",children:p?"Signing in...":"Sign In"})})]}),e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Don't have an account?"," ",e.jsx(g,{to:"/signup",className:"font-medium text-primary hover:underline",children:"Sign up"})]})]})})};export{q as default};
