import{r as f,j as e,m as j}from"./vendor-2d1PFKo4.js";import{z as N,u as w,B as b,$ as o,a0 as v,a1 as O,a2 as h,J as A}from"./index-Bpx0OnSg.js";import"./react-BzrpNAyj.js";const k=r=>r?String(r).replace(/_/g," ").toLowerCase().split(" ").filter(Boolean).map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "):"",L=()=>{const r=N(),i=w(),{list:n,loading:x,error:d}=b(t=>t.orders),m=f.useCallback(t=>{t&&i(`/orders/${t}`)},[i]);f.useEffect(()=>{let t=!0,a=!1;const c=s=>{var l;return Array.isArray(s)?s:Array.isArray(s==null?void 0:s.data)?s.data:Array.isArray((l=s==null?void 0:s.data)==null?void 0:l.data)?s.data.data:Array.isArray(s==null?void 0:s.orders)?s.orders:[]},u=async({showLoader:s=!1}={})=>{try{s&&r(o(!0));const l=await v();if(!t)return;const g=c(l);r(O(g)),r(h(null))}catch(l){console.error("Failed to load orders",l),a||(A.error(l.message||"Failed to load orders"),a=!0),t&&r(h(l.message||"Failed to load orders"))}finally{t&&s&&r(o(!1))}};u({showLoader:!0});const p=setInterval(()=>u({showLoader:!1}),15e3);return()=>{t=!1,clearInterval(p),r(o(!1))}},[r]);const y=t=>e.jsxs(j.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"border border-slate-200 rounded-3xl p-6 space-y-4 bg-white transition-shadow cursor-pointer hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary/30",role:"button",tabIndex:0,onClick:()=>m(t._id),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),m(t._id))},"aria-label":`View details for order ${t._id}`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-secondary break-words",children:["Order #",t._id]}),e.jsxs("p",{className:"text-xs sm:text-sm text-medium-text break-words",children:["Placed on ",new Date(t.createdAt).toLocaleString()]})]}),e.jsx("span",{className:"text-xs font-medium px-3 py-1 rounded-full bg-primary/10 text-primary flex-shrink-0 text-center",children:k(t.status)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-secondary",children:"Items"}),e.jsx("ul",{className:"space-y-3",children:(t.items||[]).map((a,c)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-16 w-16 rounded-xl overflow-hidden bg-slate-100 flex-shrink-0",children:a.image?e.jsx("img",{src:a.image,alt:a.name,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-medium-text",children:"No image"})}),e.jsxs("div",{className:"min-w-0 text-sm text-medium-text",children:[e.jsx("p",{className:"font-medium text-secondary break-words",children:a.name}),e.jsxs("p",{className:"text-xs sm:text-sm",children:["Qty: ",a.quantity,a.size?` • Size: ${a.size}`:""]}),a.price?e.jsxs("p",{className:"text-xs sm:text-sm",children:["₹",(a.price*a.quantity).toLocaleString()]}):null]})]},`${a.product||a._id||c}`))})]}),e.jsx("div",{className:"flex justify-end text-sm font-semibold text-primary",children:e.jsx("span",{className:"inline-flex items-center gap-1",children:"View order details"})})]},t._id);return x&&!n.length?e.jsx("div",{className:"max-w-5xl mx-auto px-4 lg:px-6 py-12 text-center text-medium-text",children:"Fetching your latest orders..."}):!x&&!n.length?e.jsxs("div",{className:"max-w-5xl mx-auto px-4 lg:px-6 py-12 text-center space-y-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-secondary",children:"No orders yet"}),e.jsx("p",{className:"text-medium-text",children:"Orders will appear here as soon as you place one. Try refreshing if youre expecting an update."}),d&&e.jsx("p",{className:"text-sm text-rose-500",children:d})]}):e.jsxs("div",{className:"max-w-5xl mx-auto px-4 lg:px-6 py-8 lg:py-10 space-y-6",children:[d&&e.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600",children:d}),n.map(y)]})};export{L as default};
