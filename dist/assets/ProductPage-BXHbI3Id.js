import{g as Me,e as pe,b as xe,c as ve,d as be,r as C,j as r,m as re}from"./vendor-2d1PFKo4.js";import{c as Se,i as Ne,j as we,u as ze,k as Ce,l as je,m as ke,n as Xe,r as Ye,s as $e,o as Le,p as Te,q as We,t as Pe,v as Re,w as Ae}from"./index-Bpx0OnSg.js";import{p as Ie,f as De,b as He,c as ge}from"./animations-CMxtCVje.js";import{S as _e,P as Oe,A as Be,a as Qe}from"./autoplay-hkV-3Na4.js";import{u as qe}from"./hooks-W65Onizy.js";import{S as Fe}from"./SeoHead-Cc-5aXvr.js";import{M as Ke}from"./message-circle-BUAU0cKs.js";import{S as ye}from"./star-DQTvdMJC.js";import"./react-BzrpNAyj.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M12 18.338a2.1 2.1 0 0 0-.987.244L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.12 2.12 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.12 2.12 0 0 0 1.597-1.16l2.309-4.679A.53.53 0 0 1 12 2",key:"2ksp49"}]],Ve=Se("star-half",Ge);function Ue({swiper:n,extendParams:e,on:A,emit:le}){const I=Me();e({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,panOnMouseMove:!1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),n.zoom={enabled:!1};let j=1,K=!1,b=!1,k={x:0,y:0};const Y=-3;let D,G;const c=[],a={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},t={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},g={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let V=1;Object.defineProperty(n.zoom,"scale",{get(){return V},set(s){if(V!==s){const l=a.imageEl,o=a.slideEl;le("zoomChange",s,l,o)}V=s}});function P(){if(c.length<2)return 1;const s=c[0].pageX,l=c[0].pageY,o=c[1].pageX,p=c[1].pageY;return Math.sqrt((o-s)**2+(p-l)**2)}function oe(){const s=n.params.zoom,l=a.imageWrapEl.getAttribute("data-swiper-zoom")||s.maxRatio;if(s.limitToOriginalSize&&a.imageEl&&a.imageEl.naturalWidth){const o=a.imageEl.naturalWidth/a.imageEl.offsetWidth;return Math.min(o,l)}return l}function H(){if(c.length<2)return{x:null,y:null};const s=a.imageEl.getBoundingClientRect();return[(c[0].pageX+(c[1].pageX-c[0].pageX)/2-s.x-I.scrollX)/j,(c[0].pageY+(c[1].pageY-c[0].pageY)/2-s.y-I.scrollY)/j]}function Z(){return n.isElement?"swiper-slide":`.${n.params.slideClass}`}function E(s){const l=Z();return!!(s.target.matches(l)||n.slides.filter(o=>o.contains(s.target)).length>0)}function U(s){const l=`.${n.params.zoom.containerClass}`;return!!(s.target.matches(l)||[...n.hostEl.querySelectorAll(l)].filter(o=>o.contains(s.target)).length>0)}function J(s){if(s.pointerType==="mouse"&&c.splice(0,c.length),!E(s))return;const l=n.params.zoom;if(D=!1,G=!1,c.push(s),!(c.length<2)){if(D=!0,a.scaleStart=P(),!a.slideEl){a.slideEl=s.target.closest(`.${n.params.slideClass}, swiper-slide`),a.slideEl||(a.slideEl=n.slides[n.activeIndex]);let o=a.slideEl.querySelector(`.${l.containerClass}`);if(o&&(o=o.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),a.imageEl=o,o?a.imageWrapEl=xe(a.imageEl,`.${l.containerClass}`)[0]:a.imageWrapEl=void 0,!a.imageWrapEl){a.imageEl=void 0;return}a.maxRatio=oe()}if(a.imageEl){const[o,p]=H();a.originX=o,a.originY=p,a.imageEl.style.transitionDuration="0ms"}K=!0}}function ae(s){if(!E(s))return;const l=n.params.zoom,o=n.zoom,p=c.findIndex(N=>N.pointerId===s.pointerId);p>=0&&(c[p]=s),!(c.length<2)&&(G=!0,a.scaleMove=P(),a.imageEl&&(o.scale=a.scaleMove/a.scaleStart*j,o.scale>a.maxRatio&&(o.scale=a.maxRatio-1+(o.scale-a.maxRatio+1)**.5),o.scale<l.minRatio&&(o.scale=l.minRatio+1-(l.minRatio-o.scale+1)**.5),a.imageEl.style.transform=`translate3d(0,0,0) scale(${o.scale})`))}function T(s){if(!E(s)||s.pointerType==="mouse"&&s.type==="pointerout")return;const l=n.params.zoom,o=n.zoom,p=c.findIndex(N=>N.pointerId===s.pointerId);p>=0&&c.splice(p,1),!(!D||!G)&&(D=!1,G=!1,a.imageEl&&(o.scale=Math.max(Math.min(o.scale,a.maxRatio),l.minRatio),a.imageEl.style.transitionDuration=`${n.params.speed}ms`,a.imageEl.style.transform=`translate3d(0,0,0) scale(${o.scale})`,j=o.scale,K=!1,o.scale>1&&a.slideEl?a.slideEl.classList.add(`${l.zoomedSlideClass}`):o.scale<=1&&a.slideEl&&a.slideEl.classList.remove(`${l.zoomedSlideClass}`),o.scale===1&&(a.originX=0,a.originY=0,a.slideEl=void 0)))}let S;function x(){n.touchEventsData.preventTouchMoveFromPointerMove=!1}function v(){clearTimeout(S),n.touchEventsData.preventTouchMoveFromPointerMove=!0,S=setTimeout(()=>{n.destroyed||x()})}function ce(s){const l=n.device;if(!a.imageEl||t.isTouched)return;l.android&&s.cancelable&&s.preventDefault(),t.isTouched=!0;const o=c.length>0?c[0]:s;t.touchesStart.x=o.pageX,t.touchesStart.y=o.pageY}function ee(s){const o=s.pointerType==="mouse"&&n.params.zoom.panOnMouseMove;if(!E(s)||!U(s))return;const p=n.zoom;if(!a.imageEl)return;if(!t.isTouched||!a.slideEl){o&&se(s);return}if(o){se(s);return}t.isMoved||(t.width=a.imageEl.offsetWidth||a.imageEl.clientWidth,t.height=a.imageEl.offsetHeight||a.imageEl.clientHeight,t.startX=be(a.imageWrapEl,"x")||0,t.startY=be(a.imageWrapEl,"y")||0,a.slideWidth=a.slideEl.offsetWidth,a.slideHeight=a.slideEl.offsetHeight,a.imageWrapEl.style.transitionDuration="0ms");const N=t.width*p.scale,R=t.height*p.scale;if(t.minX=Math.min(a.slideWidth/2-N/2,0),t.maxX=-t.minX,t.minY=Math.min(a.slideHeight/2-R/2,0),t.maxY=-t.minY,t.touchesCurrent.x=c.length>0?c[0].pageX:s.pageX,t.touchesCurrent.y=c.length>0?c[0].pageY:s.pageY,Math.max(Math.abs(t.touchesCurrent.x-t.touchesStart.x),Math.abs(t.touchesCurrent.y-t.touchesStart.y))>5&&(n.allowClick=!1),!t.isMoved&&!K){if(n.isHorizontal()&&(Math.floor(t.minX)===Math.floor(t.startX)&&t.touchesCurrent.x<t.touchesStart.x||Math.floor(t.maxX)===Math.floor(t.startX)&&t.touchesCurrent.x>t.touchesStart.x)){t.isTouched=!1,x();return}if(!n.isHorizontal()&&(Math.floor(t.minY)===Math.floor(t.startY)&&t.touchesCurrent.y<t.touchesStart.y||Math.floor(t.maxY)===Math.floor(t.startY)&&t.touchesCurrent.y>t.touchesStart.y)){t.isTouched=!1,x();return}}s.cancelable&&s.preventDefault(),s.stopPropagation(),v(),t.isMoved=!0;const $=(p.scale-j)/(a.maxRatio-n.params.zoom.minRatio),{originX:X,originY:w}=a;t.currentX=t.touchesCurrent.x-t.touchesStart.x+t.startX+$*(t.width-X*2),t.currentY=t.touchesCurrent.y-t.touchesStart.y+t.startY+$*(t.height-w*2),t.currentX<t.minX&&(t.currentX=t.minX+1-(t.minX-t.currentX+1)**.8),t.currentX>t.maxX&&(t.currentX=t.maxX-1+(t.currentX-t.maxX+1)**.8),t.currentY<t.minY&&(t.currentY=t.minY+1-(t.minY-t.currentY+1)**.8),t.currentY>t.maxY&&(t.currentY=t.maxY-1+(t.currentY-t.maxY+1)**.8),g.prevPositionX||(g.prevPositionX=t.touchesCurrent.x),g.prevPositionY||(g.prevPositionY=t.touchesCurrent.y),g.prevTime||(g.prevTime=Date.now()),g.x=(t.touchesCurrent.x-g.prevPositionX)/(Date.now()-g.prevTime)/2,g.y=(t.touchesCurrent.y-g.prevPositionY)/(Date.now()-g.prevTime)/2,Math.abs(t.touchesCurrent.x-g.prevPositionX)<2&&(g.x=0),Math.abs(t.touchesCurrent.y-g.prevPositionY)<2&&(g.y=0),g.prevPositionX=t.touchesCurrent.x,g.prevPositionY=t.touchesCurrent.y,g.prevTime=Date.now(),a.imageWrapEl.style.transform=`translate3d(${t.currentX}px, ${t.currentY}px,0)`}function O(){const s=n.zoom;if(c.length=0,!a.imageEl)return;if(!t.isTouched||!t.isMoved){t.isTouched=!1,t.isMoved=!1;return}t.isTouched=!1,t.isMoved=!1;let l=300,o=300;const p=g.x*l,N=t.currentX+p,R=g.y*o,W=t.currentY+R;g.x!==0&&(l=Math.abs((N-t.currentX)/g.x)),g.y!==0&&(o=Math.abs((W-t.currentY)/g.y));const $=Math.max(l,o);t.currentX=N,t.currentY=W;const X=t.width*s.scale,w=t.height*s.scale;t.minX=Math.min(a.slideWidth/2-X/2,0),t.maxX=-t.minX,t.minY=Math.min(a.slideHeight/2-w/2,0),t.maxY=-t.minY,t.currentX=Math.max(Math.min(t.currentX,t.maxX),t.minX),t.currentY=Math.max(Math.min(t.currentY,t.maxY),t.minY),a.imageWrapEl.style.transitionDuration=`${$}ms`,a.imageWrapEl.style.transform=`translate3d(${t.currentX}px, ${t.currentY}px,0)`}function me(){const s=n.zoom;a.slideEl&&n.activeIndex!==n.slides.indexOf(a.slideEl)&&(a.imageEl&&(a.imageEl.style.transform="translate3d(0,0,0) scale(1)"),a.imageWrapEl&&(a.imageWrapEl.style.transform="translate3d(0,0,0)"),a.slideEl.classList.remove(`${n.params.zoom.zoomedSlideClass}`),s.scale=1,j=1,a.slideEl=void 0,a.imageEl=void 0,a.imageWrapEl=void 0,a.originX=0,a.originY=0)}function se(s){if(j<=1||!a.imageWrapEl||!E(s)||!U(s))return;const l=I.getComputedStyle(a.imageWrapEl).transform,o=new I.DOMMatrix(l);if(!b){b=!0,k.x=s.clientX,k.y=s.clientY,t.startX=o.e,t.startY=o.f,t.width=a.imageEl.offsetWidth||a.imageEl.clientWidth,t.height=a.imageEl.offsetHeight||a.imageEl.clientHeight,a.slideWidth=a.slideEl.offsetWidth,a.slideHeight=a.slideEl.offsetHeight;return}const p=(s.clientX-k.x)*Y,N=(s.clientY-k.y)*Y,R=t.width*j,W=t.height*j,$=a.slideWidth,X=a.slideHeight,w=Math.min($/2-R/2,0),L=-w,Q=Math.min(X/2-W/2,0),ne=-Q,q=Math.max(Math.min(t.startX+p,L),w),F=Math.max(Math.min(t.startY+N,ne),Q);a.imageWrapEl.style.transitionDuration="0ms",a.imageWrapEl.style.transform=`translate3d(${q}px, ${F}px, 0)`,k.x=s.clientX,k.y=s.clientY,t.startX=q,t.startY=F,t.currentX=q,t.currentY=F}function ie(s){const l=n.zoom,o=n.params.zoom;if(!a.slideEl){s&&s.target&&(a.slideEl=s.target.closest(`.${n.params.slideClass}, swiper-slide`)),a.slideEl||(n.params.virtual&&n.params.virtual.enabled&&n.virtual?a.slideEl=pe(n.slidesEl,`.${n.params.slideActiveClass}`)[0]:a.slideEl=n.slides[n.activeIndex]);let z=a.slideEl.querySelector(`.${o.containerClass}`);z&&(z=z.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),a.imageEl=z,z?a.imageWrapEl=xe(a.imageEl,`.${o.containerClass}`)[0]:a.imageWrapEl=void 0}if(!a.imageEl||!a.imageWrapEl)return;n.params.cssMode&&(n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.touchAction="none"),a.slideEl.classList.add(`${o.zoomedSlideClass}`);let p,N,R,W,$,X,w,L,Q,ne,q,F,te,i,m,u,f,M;typeof t.touchesStart.x>"u"&&s?(p=s.pageX,N=s.pageY):(p=t.touchesStart.x,N=t.touchesStart.y);const d=j,h=typeof s=="number"?s:null;j===1&&h&&(p=void 0,N=void 0,t.touchesStart.x=void 0,t.touchesStart.y=void 0);const y=oe();l.scale=h||y,j=h||y,s&&!(j===1&&h)?(f=a.slideEl.offsetWidth,M=a.slideEl.offsetHeight,R=ve(a.slideEl).left+I.scrollX,W=ve(a.slideEl).top+I.scrollY,$=R+f/2-p,X=W+M/2-N,Q=a.imageEl.offsetWidth||a.imageEl.clientWidth,ne=a.imageEl.offsetHeight||a.imageEl.clientHeight,q=Q*l.scale,F=ne*l.scale,te=Math.min(f/2-q/2,0),i=Math.min(M/2-F/2,0),m=-te,u=-i,d>0&&h&&typeof t.currentX=="number"&&typeof t.currentY=="number"?(w=t.currentX*l.scale/d,L=t.currentY*l.scale/d):(w=$*l.scale,L=X*l.scale),w<te&&(w=te),w>m&&(w=m),L<i&&(L=i),L>u&&(L=u)):(w=0,L=0),h&&l.scale===1&&(a.originX=0,a.originY=0),t.currentX=w,t.currentY=L,a.imageWrapEl.style.transitionDuration="300ms",a.imageWrapEl.style.transform=`translate3d(${w}px, ${L}px,0)`,a.imageEl.style.transitionDuration="300ms",a.imageEl.style.transform=`translate3d(0,0,0) scale(${l.scale})`}function B(){const s=n.zoom,l=n.params.zoom;if(!a.slideEl){n.params.virtual&&n.params.virtual.enabled&&n.virtual?a.slideEl=pe(n.slidesEl,`.${n.params.slideActiveClass}`)[0]:a.slideEl=n.slides[n.activeIndex];let o=a.slideEl.querySelector(`.${l.containerClass}`);o&&(o=o.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),a.imageEl=o,o?a.imageWrapEl=xe(a.imageEl,`.${l.containerClass}`)[0]:a.imageWrapEl=void 0}!a.imageEl||!a.imageWrapEl||(n.params.cssMode&&(n.wrapperEl.style.overflow="",n.wrapperEl.style.touchAction=""),s.scale=1,j=1,t.currentX=void 0,t.currentY=void 0,t.touchesStart.x=void 0,t.touchesStart.y=void 0,a.imageWrapEl.style.transitionDuration="300ms",a.imageWrapEl.style.transform="translate3d(0,0,0)",a.imageEl.style.transitionDuration="300ms",a.imageEl.style.transform="translate3d(0,0,0) scale(1)",a.slideEl.classList.remove(`${l.zoomedSlideClass}`),a.slideEl=void 0,a.originX=0,a.originY=0,n.params.zoom.panOnMouseMove&&(k={x:0,y:0},b&&(b=!1,t.startX=0,t.startY=0)))}function _(s){const l=n.zoom;l.scale&&l.scale!==1?B():ie(s)}function ue(){const s=n.params.passiveListeners?{passive:!0,capture:!1}:!1,l=n.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:s,activeListenerWithCapture:l}}function de(){const s=n.zoom;if(s.enabled)return;s.enabled=!0;const{passiveListener:l,activeListenerWithCapture:o}=ue();n.wrapperEl.addEventListener("pointerdown",J,l),n.wrapperEl.addEventListener("pointermove",ae,o),["pointerup","pointercancel","pointerout"].forEach(p=>{n.wrapperEl.addEventListener(p,T,l)}),n.wrapperEl.addEventListener("pointermove",ee,o)}function fe(){const s=n.zoom;if(!s.enabled)return;s.enabled=!1;const{passiveListener:l,activeListenerWithCapture:o}=ue();n.wrapperEl.removeEventListener("pointerdown",J,l),n.wrapperEl.removeEventListener("pointermove",ae,o),["pointerup","pointercancel","pointerout"].forEach(p=>{n.wrapperEl.removeEventListener(p,T,l)}),n.wrapperEl.removeEventListener("pointermove",ee,o)}A("init",()=>{n.params.zoom.enabled&&de()}),A("destroy",()=>{fe()}),A("touchStart",(s,l)=>{n.zoom.enabled&&ce(l)}),A("touchEnd",(s,l)=>{n.zoom.enabled&&O()}),A("doubleTap",(s,l)=>{!n.animating&&n.params.zoom.enabled&&n.zoom.enabled&&n.params.zoom.toggle&&_(l)}),A("transitionEnd",()=>{n.zoom.enabled&&n.params.zoom.enabled&&me()}),A("slideChange",()=>{n.zoom.enabled&&n.params.zoom.enabled&&n.params.cssMode&&me()}),Object.assign(n.zoom,{enable:de,disable:fe,in:ie,out:B,toggle:_})}const lt=()=>{const{id:n}=Ne(),[e,A]=C.useState(null),[le,I]=C.useState(""),[j,K]=C.useState(!1),[b,k]=C.useState(1),[Y,D]=C.useState(""),[G,c]=C.useState(""),{addItem:a}=we(),t=ze(),g=Ce(),V=C.useRef(!1),P=qe(),oe=["out_of_stock","preorder"],H=(e==null?void 0:e.availabilityStatus)||"in_stock",Z=oe.includes(H),E=!e||Z,U=Array.isArray(e==null?void 0:e.reviewsList)?e.reviewsList:[],J=U.filter(i=>(i==null?void 0:i.review)&&i.review.trim().length>0),ae=(e==null?void 0:e.reviewsSummary)||{totalReviews:Number((e==null?void 0:e.reviews)??U.length??0)||0,average:Number((e==null?void 0:e.rating)??0)||0,totalScore:(Number((e==null?void 0:e.reviews)??U.length??0)||0)*(Number((e==null?void 0:e.rating)??0)||0)},T=C.useMemo(()=>{if(!(e!=null&&e.showSizes))return[];const i=["XS","S","M","L","XL","XXL","3XL"],m=i.reduce((d,h,y)=>(d[h]=y,d),{}),u=Array.isArray(e==null?void 0:e.sizes)?e.sizes:[],f=new Set;return u.map(d=>{var he;const h=(he=d==null?void 0:d.label)==null?void 0:he.toString().trim().toUpperCase();if(!h||f.has(h))return null;f.add(h);const y=Math.max(Number((d==null?void 0:d.stock)??0),0),z=!!((d==null?void 0:d.isAvailable)??!0)&&y>0;return{label:h,isAvailable:z,stock:y}}).filter(Boolean).sort((d,h)=>{const y=m[d.label]??i.length,z=m[h.label]??i.length;return y===z?d.label.localeCompare(h.label):y-z})},[e]),S=C.useMemo(()=>{const i=Number((e==null?void 0:e.stock)??0);return Number.isFinite(i)?Math.max(i,0):0},[e]),x=C.useMemo(()=>{if(!(e!=null&&e.isSellerProduct))return null;const i=Number((e==null?void 0:e.maxPurchaseQuantity)??0);return!Number.isFinite(i)||i<=0?null:Math.floor(i)},[e==null?void 0:e.isSellerProduct,e==null?void 0:e.maxPurchaseQuantity]),v=C.useMemo(()=>e!=null&&e.name?je(e.name):null,[e==null?void 0:e.name]);C.useEffect(()=>{if(V.current||!e)return;const i=g.state;if(!(i!=null&&i.fromCart))return;const m=Number(i.quantity),u=Number.isFinite(m)?Math.max(1,Math.floor(m)):1;if(e!=null&&e.showSizes&&i.size){const M=i.size.toString().trim().toUpperCase(),d=T.find(h=>h.label===M);if(d){D(d.label);const h=d.stock>0?d.stock:1;k(Math.max(1,Math.min(h,u))),V.current=!0;return}}const f=S>0?S:u;k(Math.max(1,Math.min(f,u))),V.current=!0},[g.state,T,e,S]);const ce=Number(ae.average??0),ee=Number(ae.totalReviews??U.length??0),O=J.length,me=String(Math.max(ee,0)).padStart(2,"0"),se=j?J:J.slice(0,3),ie=(i,{size:m=20,prefix:u="star"}={})=>{const f=[],M=Math.max(0,Math.min(Number(i)||0,5));let d=Math.floor(M);const h=M-d;h>=.75&&d<5&&(d=Math.min(5,d+1));const y=h>=.25&&h<.75&&d<5;for(let z=0;z<d&&f.length<5;z+=1)f.push(r.jsx(ye,{size:m,className:"mr-1 text-yellow-400",fill:"currentColor"},`${u}-full-${z}`));for(y&&f.length<5&&f.push(r.jsx(Ve,{size:m,className:"mr-1 text-yellow-400",fill:"currentColor"},`${u}-half`));f.length<5;){const z=f.length;f.push(r.jsx(ye,{size:m,className:"mr-1 text-slate-300",fill:"none"},`${u}-empty-${z}`))}return f},B=C.useMemo(()=>{if(!e)return[];const i=[];e.thumbnail&&i.push(e.thumbnail),Array.isArray(e.gallery)&&i.push(...e.gallery.filter(Boolean)),e.image&&i.push(e.image),Array.isArray(e.images)&&i.push(...e.images.filter(Boolean));const m=new Set;return i.filter(u=>{if(!u)return!1;const f=typeof u=="string"?u.trim():u;return!f||m.has(f)?!1:(m.add(f),!0)})},[e]),_=B[0]||(e==null?void 0:e.thumbnail)||(e==null?void 0:e.image),ue=(i=0)=>{const m=(e==null?void 0:e.name)||"MST Blockchain merchandise";return v?`${v.productName} image ${i+1} - ${v.primaryKeywords}`:`${m} image ${i+1} - mst blockchain merch india, crypto merchandise, blockchain merch india`},de=(()=>{switch(H){case"preorder":return"Preorder • Not ready to ship";case"out_of_stock":return"Out of stock • Not ready to ship";case"low_stock":return"Low stock • Ready to ship";default:return"In stock • Ready to ship"}})(),fe=H==="preorder"?"text-blue-500":H==="out_of_stock"?"text-rose-500":H==="low_stock"?"text-amber-500":"text-green-500",s=C.useMemo(()=>Y&&T.find(i=>i.label===Y)||null,[T,Y]),l=C.useMemo(()=>x!=null&&b>x?!0:e!=null&&e.showSizes?!!s&&s.stock>0&&b>s.stock:S>0&&b>S,[e==null?void 0:e.showSizes,s,b,S,x]);C.useEffect(()=>{if(!T.length){Y&&D("");return}if(!T.some(m=>m.label===Y&&m.isAvailable)){D(""),k(1),c("");return}c("")},[T,Y]),C.useEffect(()=>{if(e!=null&&e.showSizes){if(!s)return;let u=s.stock>0?s.stock:1;if(x!=null&&(u=Math.min(u,x)),b>u){const f=Math.max(u||1,1);k(f),c("Quantity unavailable.")}else c("");return}let i=!1,m=b;if(S>0&&(m=S,i=!0),x!=null&&(m=i?Math.min(m,x):x,i=!0),i&&b>m){const u=Math.max(m||1,1);k(u),c("Quantity unavailable.")}else c("")},[e==null?void 0:e.showSizes,S,s,b,x]);const o=i=>{k(m=>{const u=Math.max(1,i);if(e!=null&&e.showSizes){if(s&&s.isAvailable&&s.stock>0){let d=s.stock;if(x!=null&&(d=Math.min(d,x)),u>d)return c("Quantity unavailable."),Math.max(d||1,1)}return c(""),u}let f=!1,M=u;return S>0&&(M=S,f=!0),x!=null&&(M=f?Math.min(M,x):x,f=!0),f&&u>M?(c("Quantity unavailable."),Math.max(M||1,1)):(c(""),u)})},p=()=>{if(E)return;if(e!=null&&e.showSizes&&!Y){c("Please select a size before adding to cart.");return}if(x!=null&&b>x){c(`You can only buy up to ${x} unit${x===1?"":"s"} of this product per order.`);return}if(s&&(s.stock<=0||!s.isAvailable)){c(`Size ${s.label} is currently unavailable.`);return}if(s&&s.stock>0&&b>s.stock){c(`Quantity unavailable. Max ${s.stock} for size ${s.label}.`);return}if(!(e!=null&&e.showSizes)&&S>0&&b>S){c(`Quantity unavailable. Max ${S} unit${S===1?"":"s"} available.`);return}c("");const i=e.id||e._id||e.productId||e.sku||e.slug,m={...e,id:i||e.id,size:Y||void 0,image:_,hsnCode:e==null?void 0:e.hsnCode,gstRate:e==null?void 0:e.gstRate};a(m,b)},N=()=>{if(E)return;if(e!=null&&e.showSizes){if(!Y){c("Please select a size before continuing to checkout.");return}if(x!=null&&b>x){c(`You can only buy up to ${x} unit${x===1?"":"s"} of this product per order.`);return}if(s&&(s.stock<=0||!s.isAvailable)){c(`Size ${s.label} is currently unavailable.`);return}if(s&&s.stock>0&&b>s.stock){c(`Quantity unavailable. Max ${s.stock} for size ${s.label}.`);return}}else if(S>0&&b>S){c(`Quantity unavailable. Max ${S} unit${S===1?"":"s"} available.`);return}c("");const i=e._id||e.productId||e.id,m=/^[a-f\d]{24}$/i,u={id:e.id,name:e.name,image:_,price:e.price,quantity:b,size:Y||void 0,hsnCode:e==null?void 0:e.hsnCode,gstRate:e==null?void 0:e.gstRate};i&&m.test(i)&&(u.product=i);const M=Xe([u],{shippingFee:49});P(Ye()),P($e([u])),P(Le(M)),P(Te(null)),P(We(null)),P(Pe("pending")),P(Re(null)),P(Ae("order-summary")),t("/checkout/order",{state:{source:"buy-now"}})};if(C.useEffect(()=>{let i=!1;const m=async()=>{var f,M,d;try{const h=await ke(n),y=h==null?void 0:h.data;if(!i&&y){const z=Array.isArray(y.features)?y.features.filter(Boolean):[],he=Array.isArray(y.reviewsList)?y.reviewsList:[],Ee=y.reviewsSummary||{totalReviews:Number(y.reviews??((f=y.ratings)==null?void 0:f.totalReviews)??0)||0,average:Number(y.rating??((M=y.ratings)==null?void 0:M.average)??0)||0,totalScore:Number(((d=y.ratings)==null?void 0:d.totalScore)??0)||0};A({...y,features:z,reviewsList:he,reviewsSummary:Ee}),K(!1),I("");return}}catch(h){console.error("Failed to fetch product",h)}i||(A(null),K(!1),I("Product not found or currently unavailable."))};m();const u=setInterval(()=>{m()},3e4);return()=>{i=!0,clearInterval(u)}},[n]),!e)return r.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:le?r.jsx("p",{className:"text-sm font-medium text-red-500",children:le}):r.jsx("div",{className:"animate-pulse",children:"Loading product details..."})});const R=`/product/${n}`,W=(v==null?void 0:v.seoTitle)||`${e.name} | MST Blockchain Merchandise | Crypto Merchandise & Blockchain Merch India`,$=(v==null?void 0:v.seoDescription)||`Buy ${e.name} at the best price. Premium MST Blockchain merchandise with fast delivery across India. Crypto merchandise and blockchain merch india.`,X=[];v!=null&&v.primaryKeywords&&X.push(v.primaryKeywords),v!=null&&v.secondaryKeywords&&X.push(v.secondaryKeywords),v!=null&&v.longTailKeywords&&X.push(v.longTailKeywords),v!=null&&v.tags&&X.push(v.tags);const w=[e.name,e.category,e.brand,"mst","blockchain","merch","crypto merchandise","blockchain merch india"].filter(Boolean).join(", "),L=X.length?X.join(", "):w,Q=`https://shop.p2pdeal.net${R}`,q={preorder:"https://schema.org/PreOrder",out_of_stock:"https://schema.org/OutOfStock",low_stock:"https://schema.org/LimitedAvailability",in_stock:"https://schema.org/InStock"}[H]||"https://schema.org/InStock",F={"@context":"https://schema.org","@type":"Product",name:e.name,image:(B&&B.length>0?B:_?[_]:void 0)||void 0,description:$,brand:{"@type":"Brand",name:"MST Blockchain"},sku:e.sku||e.id,offers:{"@type":"Offer",url:Q,priceCurrency:"INR",price:Number(e.price||0)||void 0,availability:q,itemCondition:"https://schema.org/NewCondition"},aggregateRating:ee>0?{"@type":"AggregateRating",ratingValue:ce||0,reviewCount:ee}:void 0},te={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://shop.p2pdeal.net/"},{"@type":"ListItem",position:2,name:"Shop",item:"https://shop.p2pdeal.net/shop"},{"@type":"ListItem",position:3,name:e.name,item:Q}]};return r.jsxs(re.div,{className:"container mx-auto px-4 py-8 min-h-[80vh] flex flex-col items-center",variants:Ie,initial:"initial",animate:"animate",exit:"exit",children:[r.jsx(Fe,{title:W,description:$,keywords:L,canonicalPath:R,openGraph:{title:W,description:$,image:_,type:"product"},twitter:{title:W,description:$,image:_,card:"summary_large_image"},schema:[F,te]}),r.jsx("div",{className:"w-full max-w-7xl mx-auto",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 p-6",children:[r.jsx(re.div,{variants:De,className:"relative",children:r.jsx("div",{className:"relative overflow-hidden rounded-lg bg-gray-50",children:r.jsx(_e,{style:{"--swiper-pagination-color":"#008ECC","--swiper-pagination-bullet-size":"10px","--swiper-pagination-bullet-horizontal-gap":"6px"},spaceBetween:10,pagination:{clickable:!0,dynamicBullets:!0},zoom:!0,autoplay:{delay:2e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!0,speed:500,modules:[Oe,Ue,Be],className:"w-full h-[400px] md:h-[500px] relative",children:B.map((i,m)=>r.jsx(Qe,{children:r.jsx("div",{className:"swiper-zoom-container w-full h-full flex items-center justify-center p-4",children:r.jsx("img",{src:i,alt:ue(m),className:"w-full h-full object-contain"})})},m))})})}),r.jsxs(re.div,{variants:He,className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:e.name}),r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"flex items-center",children:ie(ce,{size:20,prefix:"average-rating"})}),r.jsxs("span",{className:"text-gray-600 text-sm",children:["(",me,")"]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-baseline space-x-3 mb-1",children:[r.jsxs("p",{className:"text-3xl font-bold text-primary",children:["₹",e.price.toLocaleString()]}),e.originalPrice>e.price&&r.jsxs("p",{className:"text-lg text-gray-500 line-through",children:["₹",e.originalPrice.toLocaleString()]})]}),e.discount>0&&r.jsxs("div",{className:"flex flex-col items-start gap-1",children:[r.jsxs("span",{className:"inline-block bg-green-100 text-green-800 text-sm font-medium px-2.5 py-0.5 rounded",children:["Save ₹",e.saveAmount.toLocaleString()," (",e.discount,"% OFF)"]}),r.jsx("p",{className:"text-xs text-slate-600",children:"Price excludes GST (added at checkout)"})]})]}),r.jsx("div",{className:"prose max-w-none mb-6 text-gray-600",children:r.jsx("p",{children:e.description})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Key Features"}),r.jsx("ul",{className:"space-y-2",children:e.features.map((i,m)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:i})]},m))})]})]}),r.jsxs("div",{className:"mt-auto pt-6 border-t border-gray-100",children:[r.jsx("div",{className:"flex flex-col gap-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap items-start sm:items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Qty"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>!E&&o(b-1),disabled:E||b<=1,className:`h-9 w-9 rounded-full border text-lg font-semibold transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 ${E||b<=1?"cursor-not-allowed border-slate-200 text-slate-300":"border-slate-300 text-slate-700 hover:border-blue-500 hover:text-blue-600"}`,"aria-label":"Decrease quantity",children:"−"}),r.jsx("div",{className:"flex h-10 w-16 items-center justify-center rounded-md border border-slate-300 bg-white shadow-sm focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-200",children:r.jsx("input",{type:"tel",min:"1",value:b,onFocus:i=>{i.target.select()},onChange:i=>{if(E)return;const m=i.target.value.replace(/[^0-9]/g,"");if(!m.length){k("");return}const u=Number(m);Number.isNaN(u)||o(u)},className:"w-full bg-transparent text-center text-lg font-semibold text-slate-700 focus:outline-none",inputMode:"numeric",pattern:"[0-9]*"})}),r.jsx("button",{type:"button",onClick:()=>!E&&!l&&o(b+1),disabled:E||l,className:`h-9 w-9 rounded-full border text-lg font-semibold transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 ${E||l?"cursor-not-allowed border-slate-200 text-slate-300":"border-slate-300 text-slate-700 hover:border-blue-500 hover:text-blue-600"}`,"aria-label":"Increase quantity",children:"+"})]}),x!=null&&r.jsxs("p",{className:"text-xs text-slate-500",children:["Max ",x," per customer"]})]}),T.length>0&&r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Sizes Available:"}),T.map(i=>{const m=Y===i.label,u=!i.isAvailable||E;return r.jsx("button",{type:"button",onClick:()=>{u||(D(i.label),k(f=>{const M=Math.max(1,f);return i.stock>0&&M>i.stock?(c(`Only ${i.stock} unit${i.stock===1?"":"s"} available for size ${i.label}.`),i.stock):(c(""),M)}))},disabled:u,title:i.isAvailable?void 0:"Currently unavailable",className:`inline-flex items-center justify-center rounded-full border px-4 py-1.5 text-sm font-semibold transition ${m?"border-blue-600 bg-blue-50 text-blue-600":"border-slate-200 bg-white text-slate-600 hover:border-blue-200 hover:text-blue-600"} ${i.isAvailable?"":"cursor-not-allowed opacity-50"}`,children:i.label},i.label)})]}),G&&r.jsx("div",{className:"w-full rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-700",children:G}),r.jsx(re.button,{type:"button",className:`flex-1 px-6 py-3 rounded-lg font-medium transition-colors text-center whitespace-nowrap ${E||l?"bg-slate-200 text-slate-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,whileHover:E||l?void 0:ge.whileHover,whileTap:E||l?void 0:ge.whileTap,disabled:E||l,onClick:p,children:Z?"Unavailable":"Add to Cart"}),r.jsx(re.button,{type:"button",className:`flex-1 px-6 py-3 rounded-lg font-medium transition-colors text-center whitespace-nowrap ${E||l?"bg-slate-200 text-slate-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,whileHover:E||l?void 0:ge.whileHover,whileTap:E||l?void 0:ge.whileTap,disabled:E||l,onClick:N,children:Z?"Notify Me":"Buy Now"})]})}),Z&&r.jsx("div",{className:"mt-3 rounded-lg border border-rose-100 bg-rose-50 px-3 py-2 text-sm text-rose-600",children:"This item is currently unavailable for purchase. Please check back soon."}),r.jsxs("div",{className:"mt-4 text-sm text-gray-500 flex items-center",children:[r.jsx("svg",{className:`h-5 w-5 mr-2 ${fe}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:H==="out_of_stock"?"M6 18L18 6M6 6l12 12":"M5 13l4 4L19 7"})}),de]})]})]})]})})}),r.jsx("div",{className:"w-full max-w-7xl mx-auto mt-8",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden p-6",children:[r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Customer Reviews"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Hear from shoppers who bought this product."})]}),r.jsx("div",{className:"rounded-lg bg-slate-50 px-4 py-2 text-xs text-gray-500 font-medium",children:O>0?`${O} customer review${O>1?"s":""}`:"No customer reviews yet"})]}),r.jsx("div",{className:"mt-6 space-y-4",children:O>0&&se.length>0?se.map((i,m)=>{var u;return r.jsxs("div",{className:"border border-slate-100 rounded-xl p-4 bg-slate-50",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[r.jsx("div",{className:"font-semibold text-secondary text-sm",children:i.reviewerName||"Verified Buyer"}),r.jsxs("div",{className:"flex items-center",children:[ie(i.rating,{size:16,prefix:`review-${m}`}),r.jsx("span",{className:"ml-2 text-xs text-gray-500",children:i.ratedAt?new Date(i.ratedAt).toLocaleDateString():""})]})]}),r.jsxs("div",{className:"mt-3 flex items-start gap-3 text-sm text-medium-text",children:[r.jsx(Ke,{className:"h-4 w-4 text-secondary mt-0.5"}),r.jsx("p",{className:"whitespace-pre-line break-words",children:(u=i.review)!=null&&u.trim()?i.review:"No additional comments provided."})]})]},`${i.reviewerName||"reviewer"}-${m}`)}):r.jsx("p",{className:"text-sm text-gray-500",children:"No reviews yet. Be the first to share your experience after purchasing!"})}),O>3&&r.jsx("div",{className:"mt-6 flex justify-center",children:r.jsx("button",{type:"button",onClick:()=>K(i=>!i),className:"px-4 py-2 text-sm font-medium text-primary border border-primary rounded-lg hover:bg-primary/10 transition",children:j?"Show Less":`Show All Reviews (${O})`})})]})})]})};export{lt as default};
