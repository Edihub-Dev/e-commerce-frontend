import{r as o,j as e,m as l}from"./vendor-2d1PFKo4.js";import{k as b,u as w,L as v,a8 as j,a6 as u}from"./index-Bpx0OnSg.js";import{p as N,d as k,c as E}from"./animations-CMxtCVje.js";import"./react-BzrpNAyj.js";const L=()=>{const m=b(),p=w(),[s,n]=o.useState({email:"",otp:""}),[r,x]=o.useState({}),[c,d]=o.useState(!1);o.useEffect(()=>{var a;const t=(a=m.state)==null?void 0:a.email;t&&n(i=>({...i,email:t}))},[m.state]);const f=t=>{const{name:a,value:i}=t.target;n(g=>({...g,[a]:i}))},h=()=>{const t={};return s.email||(t.email="Email is required"),s.otp?/^[0-9]{6}$/.test(s.otp)||(t.otp="Please enter the 6-digit code you received"):t.otp="Verification code is required",x(t),Object.keys(t).length===0},y=async t=>{if(t.preventDefault(),!!h())try{d(!0),await j({email:s.email,otp:s.otp}),u.success("Password reset successful. You can now log in with your new password.",{autoClose:1e3}),p("/login")}catch(a){u.error(a.message,{autoClose:1e3})}finally{d(!1)}};return e.jsx(l.div,{className:"container mx-auto px-4 py-16 flex justify-center",variants:N,initial:"initial",animate:"animate",exit:"exit",children:e.jsxs(l.div,{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md border",variants:k,initial:"initial",animate:"animate",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:"Verify reset code"}),e.jsx("p",{className:"text-sm text-center text-gray-600",children:"Enter the six-digit code we sent to your email to finish resetting your password."}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:f,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.email?"border-red-500":"border-gray-300"}`}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700",children:"Verification Code"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,id:"otp",name:"otp",value:s.otp,onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,"").slice(0,6);n(i=>({...i,otp:a}))},className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm tracking-widest text-center focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.otp?"border-red-500":"border-gray-300"}`}),r.otp&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.otp})]}),e.jsx("div",{children:e.jsx(l.button,{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-70",variants:E,whileHover:"hover",whileTap:"tap",children:c?"Verifying...":"Verify & Continue"})})]}),e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Didn't get a code?"," ",e.jsx(v,{to:"/forgot-password",className:"font-medium text-primary hover:underline",children:"Try again"})]})]})})};export{L as default};
