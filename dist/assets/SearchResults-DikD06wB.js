import{r as s,j as e,m,A as C}from"./vendor-2d1PFKo4.js";import{P as N}from"./ProductCard-C96ioTkX.js";import{k as S,u as k,b as M}from"./index-Bpx0OnSg.js";import"./react-BzrpNAyj.js";import"./animations-CMxtCVje.js";const q=()=>{const x=S(),r=k(),{searchResults:i,isSearching:u,searchProducts:d,setSearchQuery:p,clearSearch:a}=M(),[l,o]=s.useState(""),[g,f]=s.useState(!1),h=s.useRef(d);s.useEffect(()=>{h.current=d},[d]);const t=s.useMemo(()=>new URLSearchParams(x.search).get("q")||"",[x.search]);s.useEffect(()=>{o(t)},[t]);const j=s.useCallback(async n=>{n.preventDefault();const c=l.trim();if(!c){o(""),a(),r("/");return}p(c),await h.current(c),r(`/search?q=${encodeURIComponent(c)}`)},[l,r,p,a]),y=s.useCallback(()=>{o(""),a(),r("/")},[a,r]),b=s.useCallback(()=>{o(""),a(),r("/")},[a,r]);s.useEffect(()=>{t&&h.current(t)},[t]);const v=s.useMemo(()=>e.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#008ECC] mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-600",children:['Searching for "',t,'"...']})]})}),[t]),w=s.useMemo(()=>i.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:i.map(n=>e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(N,{product:n})},n.id))}):t&&!u?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:[`We couldn't find any products matching "`,t,'"']}),e.jsx("button",{onClick:b,className:"bg-[#008ECC] text-white px-6 py-2 rounded-md hover:bg-[#0078b5] transition-colors",children:"Continue Shopping"})]}):null,[i,t,u,b]);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"md:hidden mb-6",children:e.jsxs("form",{onSubmit:j,className:`flex items-center rounded-full border bg-white px-4 py-2 shadow-sm transition focus-within:ring-2 focus-within:ring-blue-100 ${g?"border-blue-400":"border-slate-200"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18a7.5 7.5 0 006.15-3.35z"})}),e.jsx("input",{type:"text",value:l,onChange:n=>o(n.target.value),onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:"Search products, categoriesâ€¦",className:"ml-3 flex-1 border-0 bg-transparent text-sm text-slate-600 placeholder:text-slate-400 focus:outline-none","aria-label":"Search products"}),l?e.jsx("button",{type:"button",onClick:y,className:"ml-2 inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-100 text-slate-500 transition hover:bg-slate-200 hover:text-slate-700","aria-label":"Clear search",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}):null]})}),e.jsx(C,{mode:"wait",children:u?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:v},"loading"):e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[t&&e.jsx("h1",{className:"text-2xl font-bold mb-6",children:i.length>0?`Search Results for "${t}"`:`No results found for "${t}"`}),w]},"results")})]})};export{q as default};
