import{r as i,j as e,m as I,A as ze}from"./vendor-2d1PFKo4.js";import{r as Fe}from"./index-Byfn92Ni.js";import{c as $e,u as Ee,L as Ie,d as _e,X as ne,b5 as Le,C as p,b6 as Te}from"./index-Bpx0OnSg.js";import{D as Oe}from"./download-D5r73ZfU.js";import{P as Ve}from"./plus-BZuZgauU.js";import{F as Me}from"./funnel-DrRYs2Xk.js";import{C as Ue}from"./circle-alert-tOb1bCg-.js";import{R as Be}from"./refresh-cw-DQoxs3YL.js";import{S as _}from"./star-DQTvdMJC.js";import{E as ce}from"./eye-DjBlpBi-.js";import{P as L}from"./pencil-BZnjNrx9.js";import{L as de}from"./loader-circle-DRAKHMK_.js";import{T as oe}from"./trash-2-Chc1geHF.js";import{A as Ke}from"./arrow-up-down-RiFGxrtj.js";import{C as We}from"./calendar-jUZ4havw.js";import{I as Ye}from"./info-GXZN73e0.js";import{L as Ge}from"./layers-C-GEjimE.js";import{P as He}from"./package-C_UWcLgd.js";import"./react-BzrpNAyj.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],Xe=$e("calendar-range",qe),xe={published:"bg-emerald-100 text-emerald-600",archived:"bg-slate-200 text-slate-600"},me={in_stock:"bg-emerald-50 text-emerald-600",low_stock:"bg-amber-50 text-amber-600",out_of_stock:"bg-rose-50 text-rose-600",preorder:"bg-sky-50 text-sky-600"},ue=[{value:"",label:"All Status"},{value:"published",label:"Published"},{value:"archived",label:"Archived"}],he=[{value:"",label:"All Availability"},{value:"in_stock",label:"In Stock"},{value:"low_stock",label:"Low Stock"},{value:"out_of_stock",label:"Out of Stock"},{value:"preorder",label:"Preorder"}],R=n=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(Number(n)||0),Je=n=>n?new Date(n).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"-",pe=(n={})=>{var b;return typeof n.category=="string"&&n.category.trim()?n.category.trim():typeof n.category=="object"&&((b=n.category)!=null&&b.name)?n.category.name:typeof n.categoryName=="string"&&n.categoryName.trim()?n.categoryName.trim():"-"},be=(n={})=>n.thumbnail?n.thumbnail:Array.isArray(n.gallery)&&n.gallery.length?n.gallery[0]:Array.isArray(n.images)&&n.images.length?n.images[0]:"",ft=()=>{var te,se,ae,le,re,ie;const n=Ee(),[b,T]=i.useState([]),[d,O]=i.useState({page:1,limit:20,total:0,totalPages:1}),[y,V]=i.useState(!0),[M,U]=i.useState(""),[N,u]=i.useState(1),[z,fe]=i.useState(""),[B,ge]=i.useState(""),[je,K]=i.useState(0),[f,F]=i.useState(()=>new Set),[v,Ne]=i.useState({field:"",direction:"asc"}),[k,W]=i.useState(""),[a,w]=i.useState(null),[c,g]=i.useState({status:"",availability:"",dateRange:{startDate:"",endDate:""}}),[S,C]=i.useState(!1),[D,P]=i.useState(!1),$=i.useRef(null),E=i.useRef(null),[ye,ve]=i.useState(!1),ke=t=>{u(1),g(s=>({...s,status:t}))},we=t=>{u(1),g(s=>({...s,availability:t}))},Y=(t,s)=>{u(1),g(l=>({...l,dateRange:{...l.dateRange,[t]:s}}))},Se=()=>{u(1),g(t=>({...t,dateRange:{startDate:"",endDate:""}}))},Ce=t=>{u(1),g(s=>t==="status"?{...s,status:""}:t==="availability"?{...s,availability:""}:t==="dateRange"?{...s,dateRange:{startDate:"",endDate:""}}:s)},G=()=>{u(1),g({status:"",availability:"",dateRange:{startDate:"",endDate:""}}),C(!1),P(!1)},H=(t,s)=>{var l;return((l=t.find(r=>r.value===s))==null?void 0:l.label)||s},q=i.useMemo(()=>{const t=[];if(c.status&&t.push({key:"status",label:`Status: ${H(ue,c.status)}`}),c.availability&&t.push({key:"availability",label:`Availability: ${H(he,c.availability)}`}),c.dateRange.startDate||c.dateRange.endDate){const{startDate:s,endDate:l}=c.dateRange,r=[s,l].filter(Boolean).join(" â†’ ")||"Date range";t.push({key:"dateRange",label:`Dates: ${r}`})}return t},[c]),De=!!(c.status||c.availability||c.dateRange.startDate||c.dateRange.endDate);i.useEffect(()=>{ve(!0)},[]),i.useEffect(()=>{if(!a)return;const{style:t}=document.body,s=t.overflow,l=t.paddingRight,r=window.innerWidth-document.documentElement.clientWidth;return t.overflow="hidden",r>0&&(t.paddingRight=`${r}px`),()=>{t.overflow=s,t.paddingRight=l}},[a]),i.useEffect(()=>{if(!S&&!D)return;const t=s=>{S&&$.current&&!$.current.contains(s.target)&&C(!1),D&&E.current&&!E.current.contains(s.target)&&P(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[S,D]),i.useEffect(()=>{const t=setTimeout(()=>{ge(z.trim()),u(1)},400);return()=>clearTimeout(t)},[z]),i.useEffect(()=>{let t=!0;return(async()=>{V(!0),U("");try{const{status:l,availability:r,dateRange:h}=c,x=await Le({page:N,limit:20,search:B||void 0,status:l||void 0,availability:r||void 0,startDate:h.startDate||void 0,endDate:h.endDate||void 0});if(!t)return;const o=(x==null?void 0:x.data)||[];T(o),O((x==null?void 0:x.meta)||{page:1,limit:20,total:o.length,totalPages:1})}catch(l){if(!t)return;U(l.message||"Failed to load products"),T([]),O({page:1,limit:20,total:0,totalPages:1})}finally{t&&V(!1)}})(),()=>{t=!1}},[N,B,je,c.status,c.availability,c.dateRange.startDate,c.dateRange.endDate]);const m=i.useMemo(()=>{const t=b.map(s=>{const l=Number(s.price)||0,r=s.availabilityStatus||"unknown",h=s.createdAt||s.updatedAt,x=Array.isArray(s.variants)?s.variants.length:Array.isArray(s.sizes)?s.sizes.length:0,o=typeof s.brand=="string"?s.brand.trim():"",j=typeof s.sku=="string"?s.sku.trim():"";return{raw:s,id:s._id,name:s.name||"Unnamed product",sku:j||"-",brand:o,category:pe(s),thumbnail:be(s),variants:x,stock:Number.isFinite(s.stock)?s.stock:0,availability:r,status:s.status||"-",isFeatured:!!s.isFeatured,priceValue:l,displayPrice:R(l),createdAt:Je(h)}});return v.field==="price"?[...t].sort((l,r)=>v.direction==="asc"?l.priceValue-r.priceValue:r.priceValue-l.priceValue):t},[b,v]),A=i.useMemo(()=>{var x,o;const t=d.total||m.length;let s=0,l=0;m.forEach(j=>{j.availability==="low_stock"&&(s+=1),j.availability==="out_of_stock"&&(l+=1)});const r=((x=d==null?void 0:d.counts)==null?void 0:x.lowStock)!=null?d.counts.lowStock:s,h=((o=d==null?void 0:d.counts)==null?void 0:o.outOfStock)!=null?d.counts.outOfStock:l;return{totalProducts:t,lowStock:r,outOfStock:h,selected:f.size}},[d,m,f.size]),X=i.useMemo(()=>m.length?m.every(t=>f.has(t.id)):!1,[m,f]),Pe=t=>{Ne(s=>s.field===t?{field:t,direction:s.direction==="asc"?"desc":"asc"}:{field:t,direction:"asc"})},Ae=()=>{F(t=>{const s=new Set(t);return X?m.forEach(l=>s.delete(l.id)):m.forEach(l=>s.add(l.id)),s})},J=t=>{F(s=>{const l=new Set(s);return l.has(t)?l.delete(t):l.add(t),l})},Re=()=>{if(!m.length){p.error("No products to export");return}try{const t=["Name","ID","Category","SKU","Price","Stock","Availability","Status"],s=m.map(o=>[o.name,o.id,o.category,o.sku,o.priceValue,o.stock,o.availability,o.status]),l=[t,...s].map(o=>o.map(j=>`"${String(j??"").replace(/"/g,'""')}"`).join(",")).join(`
`),r=new Blob([l],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(r),x=document.createElement("a");x.href=h,x.download=`seller-products-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(h),p.success("Exported products as CSV")}catch(t){console.error("Failed to export seller products",t),p.error("Failed to export products")}},Q=t=>{if(!(t!=null&&t.raw)){p.error("Product information missing");return}w(t.raw)},Z=t=>{if(!(t!=null&&t.id)){p.error("Product information missing");return}n(`/seller/products/${t.id}`)},ee=async t=>{if(!(t!=null&&t.id)){p.error("Product information missing");return}if(window.confirm(`Delete product "${t.name}"? This action cannot be undone.`))try{W(t.id),await Te(t.id),p.success("Product deleted"),F(l=>{const r=new Set(l);return r.delete(t.id),r}),K(l=>l+1)}catch(l){const r=(l==null?void 0:l.message)||"Failed to delete product";p.error(r)}finally{W("")}};return e.jsxs(I.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.4},className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.32em] text-slate-400",children:"Dashboard / Products"}),e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Products"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:Re,className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm transition hover:border-blue-200 hover:text-blue-600",children:[e.jsx(Oe,{size:16})," Export"]}),e.jsxs(Ie,{to:"/seller/products/new",className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-700",children:[e.jsx(Ve,{size:16})," Add Product"]})]})]})]}),e.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Total Products"}),e.jsx("p",{className:"mt-3 text-2xl font-semibold text-slate-900",children:A.totalProducts})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Low Stock"}),e.jsx("p",{className:"mt-3 text-2xl font-semibold text-amber-600",children:A.lowStock})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Out of Stock"}),e.jsx("p",{className:"mt-3 text-2xl font-semibold text-rose-600",children:A.outOfStock})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Selected"}),e.jsx("p",{className:"mt-3 text-2xl font-semibold text-slate-900",children:A.selected})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex w-full items-center gap-3 rounded-xl border border-slate-200 bg-slate-50 px-4 py-2 text-sm text-slate-500 focus-within:border-blue-300 focus-within:bg-white",children:[e.jsx(_e,{size:18,className:"text-slate-400"}),e.jsx("input",{value:z,onChange:t=>fe(t.target.value),placeholder:"Search by name, SKU, ID or category",className:"h-9 w-full bg-transparent text-sm placeholder:text-slate-400 focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative",ref:E,children:[e.jsxs("button",{type:"button",onClick:()=>P(t=>!t),className:`inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm font-semibold transition ${c.dateRange.startDate||c.dateRange.endDate?"border-blue-200 bg-blue-50 text-blue-600":"border-slate-200 bg-slate-50 text-slate-600 hover:border-blue-200 hover:bg-white hover:text-blue-600"}`,children:[e.jsx(Xe,{size:16})," Select Dates"]}),D&&e.jsx("div",{className:"absolute left-0 z-20 mt-2 w-64 rounded-2xl border border-slate-200 bg-white p-4 shadow-lg",children:e.jsxs("div",{className:"flex flex-col gap-3 text-sm",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Start Date"}),e.jsx("input",{type:"date",value:c.dateRange.startDate,onChange:t=>Y("startDate",t.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:outline-none"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"End Date"}),e.jsx("input",{type:"date",value:c.dateRange.endDate,onChange:t=>Y("endDate",t.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1 text-xs",children:[e.jsx("button",{type:"button",onClick:Se,className:"text-slate-500 hover:text-rose-500",children:"Clear dates"}),e.jsx("button",{type:"button",onClick:()=>P(!1),className:"rounded-lg bg-blue-600 px-3 py-1.5 font-semibold text-white shadow-sm hover:bg-blue-700",children:"Done"})]})]})})]}),e.jsxs("div",{className:"relative",ref:$,children:[e.jsxs("button",{type:"button",onClick:()=>C(t=>!t),className:`inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm font-semibold transition ${De?"border-blue-200 bg-blue-50 text-blue-600":"border-slate-200 bg-slate-50 text-slate-600 hover:border-blue-200 hover:bg-white hover:text-blue-600"}`,children:[e.jsx(Me,{size:16})," Filters"]}),S&&e.jsx("div",{className:"absolute right-0 z-20 mt-2 w-64 rounded-2xl border border-slate-200 bg-white p-4 shadow-lg",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Status"}),e.jsx("select",{value:c.status,onChange:t=>ke(t.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-blue-400 focus:outline-none",children:ue.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Availability"}),e.jsx("select",{value:c.availability,onChange:t=>we(t.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-blue-400 focus:outline-none",children:he.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1 text-xs",children:[e.jsx("button",{type:"button",onClick:G,className:"text-slate-500 hover:text-rose-500",children:"Clear all"}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"rounded-lg bg-blue-600 px-3 py-1.5 font-semibold text-white shadow-sm hover:bg-blue-700",children:"Done"})]})]})})]})]})]}),q.length?e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-600",children:[q.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 font-medium text-blue-600",children:[t.label,e.jsx("button",{type:"button",onClick:()=>Ce(t.key),className:"rounded-full bg-white/80 p-1 text-blue-500 hover:text-rose-500","aria-label":`Clear ${t.key} filter`,children:e.jsx(ne,{size:12})})]},t.key)),e.jsx("button",{type:"button",onClick:G,className:"rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-500 transition hover:border-rose-200 hover:text-rose-500",children:"Clear all"})]}):null]}),M&&e.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{size:16}),M]}),e.jsxs("button",{type:"button",onClick:()=>K(t=>t+1),className:"inline-flex items-center gap-2 rounded-full border border-rose-200 px-3 py-1 text-xs font-semibold text-rose-600 transition hover:border-rose-300",children:[e.jsx(Be,{size:14})," Retry"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"md:hidden",children:y?e.jsx("div",{className:"grid gap-3",children:Array.from({length:4}).map((t,s)=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"h-10 w-10 rounded-xl bg-slate-100"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("span",{className:"block h-4 w-3/4 rounded bg-slate-100"}),e.jsx("span",{className:"block h-3 w-1/2 rounded bg-slate-100"})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("span",{className:"block h-3 w-full rounded bg-slate-100"}),e.jsx("span",{className:"block h-3 w-5/6 rounded bg-slate-100"})]})]},s))}):m.length?e.jsx("div",{className:"grid gap-3",children:m.map(t=>{const s=me[t.availability]||"bg-slate-100 text-slate-500",l=xe[t.status]||"bg-slate-100 text-slate-500",r=f.has(t.id);return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-400",checked:r,onChange:()=>J(t.id),"aria-label":`Select ${t.name}`}),e.jsx("div",{className:"flex h-16 w-16 items-center justify-center overflow-hidden rounded-xl border border-slate-200 bg-slate-50 sm:h-14 sm:w-14",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:t.name,className:"h-full w-full object-cover"}):e.jsx("span",{className:"text-xs text-slate-400",children:"No image"})})]}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsx("p",{className:"text-base font-semibold text-slate-900",children:t.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[t.brand?e.jsx("span",{className:"font-medium uppercase tracking-wide text-slate-400",children:t.brand}):null,t.sku&&t.sku!=="-"?e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 font-mono text-[11px] text-slate-500",children:t.sku}):null,e.jsxs("span",{className:"text-[11px] text-slate-400",children:[t.variants," Variants"]})]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[e.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 font-semibold ${s}`,children:["Stock: ",t.stock]}),e.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 font-semibold ${l}`,children:t.status.toString().toUpperCase()})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:t.displayPrice}),e.jsx("span",{className:"truncate",title:t.category,children:t.category})]}),e.jsxs("div",{className:"space-y-1 text-xs text-slate-500",children:[e.jsxs("p",{className:"break-all",title:t.id,children:["ID: ",t.id]}),e.jsxs("p",{children:["Added: ",t.createdAt]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[t.isFeatured?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-50 px-3 py-1 text-xs font-semibold text-sky-600",children:[e.jsx(_,{size:12})," Featured"]}):e.jsx("span",{className:"text-xs text-slate-400",children:"Not featured"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx("button",{type:"button",onClick:()=>Q(t),className:"rounded-full border border-transparent p-2 transition hover:border-blue-100 hover:text-blue-600",title:"View product",children:e.jsx(ce,{size:16})}),e.jsx("button",{type:"button",onClick:()=>Z(t),className:"rounded-full border border-transparent p-2 transition hover:border-blue-100 hover:text-blue-600",title:"Edit product",children:e.jsx(L,{size:16})}),e.jsx("button",{type:"button",onClick:()=>ee(t),disabled:k===t.id,className:"rounded-full border border-transparent p-2 transition hover:border-rose-100 hover:text-rose-600 disabled:cursor-not-allowed disabled:opacity-50",title:"Delete product",children:k===t.id?e.jsx(de,{size:16,className:"animate-spin text-rose-500"}):e.jsx(oe,{size:16})})]})]})]},t.id)})}):e.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-white p-6 text-center text-sm text-slate-500",children:"No products match your filters yet. Try creating a new listing to start selling."})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:e.jsx("div",{className:"pb-2",children:e.jsxs("table",{className:"w-full table-fixed text-sm text-slate-600",children:[e.jsx("thead",{className:"bg-slate-50/80 text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-4 py-4",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-400",checked:X,onChange:Ae,"aria-label":"Select all products"})}),e.jsx("th",{className:"px-4 py-4 text-left",children:"Product"}),e.jsx("th",{className:"px-4 py-4 text-left",children:"ID"}),e.jsx("th",{className:"px-4 py-4 text-left",children:"Category"}),e.jsx("th",{className:"px-4 py-4",children:e.jsxs("button",{type:"button",onClick:()=>Pe("price"),className:"inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:["Price",e.jsx(Ke,{size:14,className:v.field==="price"?"text-blue-500":"text-slate-300"})]})}),e.jsx("th",{className:"px-4 py-4 text-left",children:"Stock"}),e.jsx("th",{className:"px-4 py-4 text-center",children:"Featured"}),e.jsx("th",{className:"px-4 py-4 text-center",children:"Status"}),e.jsx("th",{className:"px-4 py-4 text-left",children:"Added"}),e.jsx("th",{className:"px-4 py-4 text-right",children:"Action"})]})}),e.jsx("tbody",{children:y?Array.from({length:6}).map((t,s)=>e.jsx("tr",{className:"border-t border-slate-100",children:Array.from({length:10}).map((l,r)=>e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"inline-block h-4 w-full max-w-[8rem] rounded bg-slate-100 animate-pulse"})},r))},s)):m.length?m.map(t=>{const s=me[t.availability]||"bg-slate-100 text-slate-500",l=xe[t.status]||"bg-slate-100 text-slate-500",r=f.has(t.id);return e.jsxs("tr",{className:"border-t border-slate-100 transition hover:bg-blue-50/40",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-400",checked:r,onChange:()=>J(t.id),"aria-label":`Select ${t.name}`})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-xl border border-slate-200 bg-white",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:t.name,className:"h-full w-full object-cover"}):null}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[e.jsx("p",{className:"block max-w-[18rem] truncate text-sm font-semibold text-slate-900",title:t.name,children:t.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-slate-500",children:[t.brand?e.jsx("span",{className:"font-medium uppercase tracking-wide text-slate-400",children:t.brand}):null,t.sku&&t.sku!=="-"?e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 font-mono text-[11px] text-slate-500",children:t.sku}):null,e.jsxs("span",{className:"text-[11px] text-slate-400",children:[t.variants," Variants"]})]})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"block max-w-[12rem] truncate font-mono text-xs font-medium text-slate-500",title:t.id,children:t.id})}),e.jsx("td",{className:"px-4 py-4 text-sm font-medium text-slate-600",children:e.jsx("span",{className:"block max-w-[12rem] truncate",title:t.category,children:t.category})}),e.jsx("td",{className:"px-4 py-4 font-semibold text-slate-900",children:t.displayPrice}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${s}`,children:t.stock})}),e.jsx("td",{className:"px-4 py-4 text-center",children:t.isFeatured?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-50 px-3 py-1 text-xs font-semibold text-sky-600",children:[e.jsx(_,{size:12})," Featured"]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center justify-center rounded-full px-3 py-1 text-xs font-semibold ${l}`,children:t.status.toString().toUpperCase()})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:t.createdAt}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 text-slate-400",children:[e.jsx("button",{type:"button",onClick:()=>Q(t),className:"rounded-full border border-transparent p-2 transition hover:border-blue-100 hover:text-blue-600",title:"View product",children:e.jsx(ce,{size:16})}),e.jsx("button",{type:"button",onClick:()=>Z(t),className:"rounded-full border border-transparent p-2 transition hover:border-blue-100 hover:text-blue-600",title:"Edit product",children:e.jsx(L,{size:16})}),e.jsx("button",{type:"button",onClick:()=>ee(t),disabled:k===t.id,className:"rounded-full border border-transparent p-2 transition hover:border-rose-100 hover:text-rose-600 disabled:cursor-not-allowed disabled:opacity-50",title:"Delete product",children:k===t.id?e.jsx(de,{size:16,className:"animate-spin text-rose-500"}):e.jsx(oe,{size:16})})]})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-6 py-16 text-center text-slate-500",children:"No products match your filters yet. Try creating a new listing to start selling."})})})]})})})}),e.jsxs("footer",{className:"flex flex-col justify-between gap-3 rounded-3xl border border-slate-200 bg-white px-4 py-4 text-xs text-slate-500 shadow-sm sm:flex-row sm:items-center",children:[e.jsx("span",{children:d.total>0?`Showing ${(d.page-1)*d.limit+(b.length?1:0)||1}-${(d.page-1)*d.limit+b.length} of ${d.total}`:"No products to display"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u(t=>Math.max(t-1,1)),disabled:N<=1||y,className:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-600 transition enabled:hover:border-blue-200 enabled:hover:bg-blue-50 enabled:hover:text-blue-600 disabled:cursor-not-allowed disabled:opacity-40",children:"Previous"}),e.jsx("span",{className:"font-semibold text-slate-700",children:N}),e.jsx("button",{type:"button",onClick:()=>u(t=>t<d.totalPages?t+1:t),disabled:N>=d.totalPages||y,className:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-600 transition enabled:hover:border-blue-200 enabled:hover:bg-blue-50 enabled:hover:text-blue-600 disabled:cursor-not-allowed disabled:opacity-40",children:"Next"})]})]})]}),ye&&Fe.createPortal(e.jsx(ze,{children:a&&e.jsx(I.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 px-3 py-6 sm:px-4 sm:py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w(null),children:e.jsx("div",{className:"flex w-full justify-center",children:e.jsxs(I.div,{initial:{y:32,opacity:0,scale:.97},animate:{y:0,opacity:1,scale:1},exit:{y:24,opacity:0,scale:.96},transition:{type:"spring",stiffness:220,damping:26},className:"relative w-full max-w-4xl overflow-hidden rounded-3xl bg-white shadow-2xl md:my-0",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:()=>w(null),className:"absolute right-4 top-4 z-10 inline-flex h-10 w-10 items-center justify-center rounded-full bg-white text-slate-500 shadow hover:text-slate-800","aria-label":"Close product details",children:e.jsx(ne,{size:18})}),e.jsx("div",{className:"modal-scroll max-h-[calc(100vh-2rem)] overflow-y-auto px-6 pb-12 pt-10 pr-3 sm:max-h-[calc(100vh-4rem)] sm:pr-4 lg:px-12",children:e.jsxs("div",{className:"grid gap-6 lg:min-h-0 lg:grid-cols-[1.45fr,1fr] lg:gap-8",children:[e.jsxs("div",{className:"space-y-6 lg:max-h-[calc(100vh-14rem)] lg:overflow-y-auto lg:pr-3",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-slate-400",children:"Product"}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:a.name||"Untitled product"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["ID: ",a._id||"--"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2 text-right",children:[e.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600",children:pe(a)}),a.createdAt?e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(We,{size:14,className:"text-slate-400"}),new Date(a.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})]}):null]})]}),e.jsxs("div",{className:"grid gap-3 rounded-2xl bg-slate-50 p-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Price"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:R(a.price||a.originalPrice||0)}),a.originalPrice&&Number(a.originalPrice)>Number(a.price)?e.jsxs("p",{className:"text-xs text-slate-500",children:["Original:"," ",R(a.originalPrice)]}):null]}),e.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Stock"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:a.stock??0}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Availability:"," ",a.availabilityStatus||"--"]})]}),e.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Status"}),e.jsx("p",{className:"mt-1 text-lg font-semibold capitalize text-slate-900",children:a.status||"--"}),e.jsxs("p",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(_,{size:14,className:a.isFeatured?"text-sky-500":"text-slate-300"}),"Featured:"," ",a.isFeatured?"Yes":"No"]})]}),e.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Discount"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:a.discountPercentage?`${a.discountPercentage}% OFF`:"--"}),a.saveAmount?e.jsxs("p",{className:"text-xs text-slate-500",children:["You save"," ",R(a.saveAmount)]}):null]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-slate-400",children:"Brand"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-slate-700",children:a.brand||"--"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-slate-400",children:"SKU"}),e.jsx("p",{className:"mt-2 break-all text-sm font-medium text-slate-700",children:a.sku||"--"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-slate-400",children:"HSN Code"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-slate-700",children:a.hsnCode||"--"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-slate-400",children:"GST Rate"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-slate-700",children:a.gstRate!==void 0&&a.gstRate!==null?`${a.gstRate}%`:"--"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Description"}),e.jsx("p",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm leading-relaxed text-slate-600",children:((te=a.description)==null?void 0:te.trim())||"No description provided yet."})]}),Array.isArray(a.keyFeatures)&&a.keyFeatures.some(t=>t&&t.trim().length)?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Key Features"}),e.jsx("ul",{className:"grid gap-2 rounded-2xl border border-slate-200 bg-white p-4 text-sm text-slate-600",children:a.keyFeatures.filter(t=>t&&t.trim().length).map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ye,{size:16,className:"mt-0.5 text-blue-500"}),e.jsx("span",{children:t})]},`${t}-${s}`))})]}):null,Array.isArray(a.sizes)&&a.showSizes&&a.sizes.length?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Variants"}),e.jsx("div",{className:"grid gap-2 rounded-2xl border border-slate-200 bg-white p-4 text-sm text-slate-600 lg:grid-cols-2",children:a.sizes.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-slate-50 px-3 py-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 text-sm font-semibold text-slate-700",children:[e.jsx(Ge,{size:16,className:"text-slate-400"}),(t==null?void 0:t.label)||"--"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs font-semibold text-slate-500",children:[e.jsx(He,{size:14,className:"text-slate-300"}),(t==null?void 0:t.isAvailable)===!1?"Unavailable":`${(t==null?void 0:t.stock)??0} in stock`]})]},`${(t==null?void 0:t.label)||s}-${(t==null?void 0:t.stock)||0}`))})]}):null,e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-slate-400",children:"Rating"}),e.jsx("p",{className:"mt-2 text-lg font-semibold text-slate-900",children:((le=(ae=a.rating??((se=a.ratings)==null?void 0:se.average)??0).toFixed)==null?void 0:le.call(ae,1))??0})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-slate-400",children:"Reviews"}),e.jsx("p",{className:"mt-2 text-lg font-semibold text-slate-900",children:a.reviews??((re=a.ratings)==null?void 0:re.totalReviews)??0})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:sticky lg:top-6",children:[e.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-slate-50",children:e.jsx("img",{src:a.thumbnail||be(a)||((ie=a.gallery)==null?void 0:ie[0])||"https://placehold.co/600x600/f8fafc/e2e8f0?text=Image",alt:a.name||"Product image",className:"h-64 w-full object-cover",onError:t=>{t.currentTarget.src="https://placehold.co/600x600/f8fafc/e2e8f0?text=Image"}})}),Array.isArray(a.gallery)&&a.gallery.length>1?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs uppercase text-slate-400",children:"Gallery"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.gallery.map((t,s)=>e.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white",children:e.jsx("img",{src:t,alt:`${a.name||"Product"} ${s+1}`,className:"h-24 w-full object-cover",onError:l=>{l.currentTarget.src="https://placehold.co/200x200/f8fafc/e2e8f0?text=Image"}})},`${t}-${s}`))})]}):null,e.jsxs("button",{type:"button",onClick:()=>{a!=null&&a._id&&(w(null),n(`/seller/products/${a._id}`))},className:"inline-flex items-center justify-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-700",children:[e.jsx(L,{size:16}),"Edit Product"]})]})]})})]})})})}),document.body)]})};export{ft as default};
