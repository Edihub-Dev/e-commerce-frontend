import{r as m,j as e,m as w}from"./vendor-2d1PFKo4.js";import{c as _,b0 as B,L as D,a6 as j,b3 as J}from"./index-Bpx0OnSg.js";import{E as I,b as V}from"./validators-C0nLAwdN.js";import{p as q,d as Y,c as Q}from"./animations-CMxtCVje.js";import{E as L}from"./eye-DjBlpBi-.js";import"./react-BzrpNAyj.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],X=_("mail-check",U),$={fullName:"",companyName:"",companyEmail:"",contactNumber:"",gstNumber:"",location:"",password:"",confirmPassword:""},y="sellerApplicationPending",i=(a="")=>a.trim(),x=(a="")=>a.trim().toLowerCase(),re=()=>{const[a,v]=m.useState($),[s,E]=m.useState({}),[f,K]=m.useState(!1),[b,O]=m.useState(!1),[S,C]=m.useState(!1),[T,h]=m.useState(!1),[u,N]=m.useState(null),[l,g]=m.useState(null),k=m.useRef(null),H=m.useRef(null),P=m.useRef(null),F=m.useRef(null),R=m.useRef(null);m.useEffect(()=>{try{const t=localStorage.getItem(y);if(!t)return;const r=JSON.parse(t);r&&typeof r=="object"&&r.companyEmail&&r.companyName&&g({fullName:r.fullName||"",companyName:r.companyName,companyEmail:r.companyEmail,contactNumber:r.contactNumber||"",location:r.location||"",gstNumber:r.gstNumber||"",submittedAt:r.submittedAt})}catch(t){console.warn("Failed to restore seller application state",t),localStorage.removeItem(y)}},[]);const M=()=>{localStorage.removeItem(y),g(null),N(null),h(!1)},n=t=>{const{name:r,value:o}=t.target;v(c=>({...c,[r]:o}))},p=(t,r)=>{var o;t.key==="Enter"&&(t.preventDefault(),(o=r==null?void 0:r.current)==null||o.focus())},W=async t=>{t.preventDefault();const{error:r}=V.validate(a,{abortEarly:!1});if(r){const o={};r.details.forEach(c=>{o[c.path[0]]=c.message}),E(o);return}E({}),C(!0);try{const o={fullName:i(a.fullName),companyName:i(a.companyName),companyEmail:x(a.companyEmail),contactNumber:i(a.contactNumber),gstNumber:i(a.gstNumber),location:i(a.location)};if(l&&x(l.companyEmail)===o.companyEmail&&i(l.companyName)===o.companyName&&i(l.fullName)===o.fullName&&i(l.contactNumber)===o.contactNumber){N({fullName:l.fullName,companyName:l.companyName,companyEmail:l.companyEmail}),h(!0),j.info("This seller application is already in review. We'll notify you after approval.",{autoClose:2500});return}await J({fullName:a.fullName,companyName:a.companyName,companyEmail:a.companyEmail,contactNumber:a.contactNumber,gstNumber:a.gstNumber,location:a.location,password:a.password,confirmPassword:a.confirmPassword}),j.success("Application submitted. We'll email you once it's reviewed.",{autoClose:2e3});const d={fullName:o.fullName,companyName:o.companyName,companyEmail:o.companyEmail,contactNumber:o.contactNumber,gstNumber:o.gstNumber,location:o.location,submittedAt:new Date().toISOString()};localStorage.setItem(y,JSON.stringify(d)),g(d),N({fullName:d.fullName,companyName:d.companyName,companyEmail:d.companyEmail,contactNumber:d.contactNumber}),v($),h(!0)}catch(o){const c=(o==null?void 0:o.message)||"Failed to submit application.";j.error(c,{autoClose:2500})}finally{C(!1)}},G=!!l;x(a.companyEmail),x(l==null?void 0:l.companyEmail);const z=(t="")=>t.replace(/[^0-9]/g,""),A=z(l==null?void 0:l.contactNumber);return G&&z(a.contactNumber)===A&&A.length,e.jsx(w.div,{className:"container mx-auto px-4 pt-5 pb-5 flex justify-center",variants:q,initial:"initial",animate:"animate",exit:"exit",children:e.jsx(w.div,{className:"w-full max-w-2xl p-8 space-y-6 bg-white rounded-lg shadow-md border",variants:Y,initial:"initial",animate:"animate",children:T&&u?e.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[e.jsx("div",{className:"flex size-16 items-center justify-center rounded-full bg-primary/10 text-primary",children:e.jsx(B,{size:32})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Application under review"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Thanks ",u.fullName||"there","! We've received the seller request for"," ",e.jsx("strong",{children:u.companyName}),". Our team will review your details and email"," ",e.jsx("span",{className:"font-medium text-gray-800",children:u.companyEmail})," ","once approval is complete. Please wait patiently for our team to review your applicationâ€”this may take a little time."]})]}),e.jsxs("div",{className:"grid gap-4 w-full max-w-md",children:[e.jsx("div",{className:"rounded-lg border border-dashed border-primary/40 bg-primary/5 p-4 text-sm text-primary-900",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(X,{className:"mt-0.5 text-primary",size:20}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-primary",children:"What happens next?"}),e.jsx("p",{className:"text-gray-600",children:"An approval link has been emailed to our admin team. We'll notify you as soon as your seller dashboard is activated."})]})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Need to update your application? Reply to the confirmation email or contact support with your company details."}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:[e.jsx("button",{type:"button",onClick:M,className:"inline-flex items-center justify-center gap-2 rounded-full border border-primary px-4 py-2 text-sm font-medium text-primary transition hover:bg-primary hover:text-white",children:"Submit another application"}),e.jsx(D,{to:"/",className:"inline-flex items-center justify-center gap-2 rounded-full border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100",children:"Return to home"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Become a Seller"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Share your products with the p2pdeal community. Submit your details and our team will review your application."})]}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:a.fullName,onChange:n,onKeyDown:t=>p(t,k),className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.fullName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your full name",autoComplete:"name"}),s.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),e.jsx("input",{type:"text",id:"companyName",name:"companyName",value:a.companyName,onChange:n,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.companyName?"border-red-500":"border-gray-300"}`,placeholder:"Registered business name",autoComplete:"organization"}),s.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyEmail",className:"block text-sm font-medium text-gray-700",children:"Company Email"}),e.jsx("input",{type:"email",id:"companyEmail",name:"companyEmail",value:a.companyEmail,onChange:n,ref:k,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.companyEmail?"border-red-500":"border-gray-300"}`,placeholder:"contact@yourcompany.com",autoComplete:"email"}),s.companyEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.companyEmail})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contactNumber",className:"block text-sm font-medium text-gray-700",children:"Company Contact Number"}),e.jsx("input",{type:"tel",id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:n,ref:H,onKeyDown:t=>p(t,P),className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.contactNumber?"border-red-500":"border-gray-300"}`,placeholder:"10-digit mobile number",inputMode:"numeric",autoComplete:"tel"}),s.contactNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gstNumber",className:"block text-sm font-medium text-gray-700",children:"Company GST Number (optional)"}),e.jsx("input",{type:"text",id:"gstNumber",name:"gstNumber",value:a.gstNumber,onChange:n,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.gstNumber?"border-red-500":"border-gray-300"}`,placeholder:"15-character GSTIN",maxLength:15}),s.gstNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.gstNumber})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("input",{type:"text",id:"location",name:"location",value:a.location,onChange:n,ref:P,onKeyDown:t=>p(t,F),className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.location?"border-red-500":"border-gray-300"}`,placeholder:"City, State",autoComplete:"address-level2"}),s.location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.location})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:a.password,onChange:n,ref:F,onKeyDown:t=>p(t,R),className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.password?"border-red-500":"border-gray-300"}`,autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>K(t=>!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":f?"Hide password":"Show password",children:f?e.jsx(I,{size:18}):e.jsx(L,{size:18})})]}),s.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:b?"text":"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:n,ref:R,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${s.confirmPassword?"border-red-500":"border-gray-300"}`,autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>O(t=>!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":b?"Hide confirm password":"Show confirm password",children:b?e.jsx(I,{size:18}):e.jsx(L,{size:18})})]}),s.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.confirmPassword})]})]}),e.jsx(w.button,{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-semibold text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-60 disabled:cursor-not-allowed",variants:Q,whileHover:"hover",whileTap:"tap",disabled:S,children:S?"Submitting...":"Submit Application"})]}),e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Already have an account?"," ",e.jsx(D,{to:"/login",className:"font-medium text-primary hover:underline",children:"Log in"})]})]})})})};export{re as default};
