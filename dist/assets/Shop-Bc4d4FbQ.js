import{r as c,j as s,m}from"./vendor-2d1PFKo4.js";import{P as N}from"./ProductCard-C96ioTkX.js";import{e as v,h as j}from"./index-Bpx0OnSg.js";import{p as S,s as b,a as C}from"./animations-CMxtCVje.js";import"./react-BzrpNAyj.js";const L=()=>{const[i,g]=c.useState([]),[n,x]=c.useState(!0),[l,y]=c.useState(""),[u]=v();c.useEffect(()=>{let r=!0;return(async()=>{x(!0);try{const e=(u.get("seller")||"").toLowerCase()==="true",t={limit:"all"};e?t.onlySellerProducts=!0:t.excludeSellerProducts=!0;const{data:a}=await j(t);r&&(g(a),y(""))}catch(e){console.error("Failed to load products",e),r&&(y(e.message||"Unable to load products. Please try again later."),g([]))}finally{r&&x(!1)}})(),()=>{r=!1}},[u]);const d=(u.get("seller")||"").toLowerCase()==="true",f=c.useMemo(()=>{const r=new Map,o=e=>{const t=String(e||"").trim().toUpperCase();if(/^P\d{1,2}$/.test(t))return parseInt(t.slice(1),10);const a=parseInt(t.replace(/[^0-9]/g,""),10);return Number.isNaN(a)?99:a};for(const e of i){const t=(e.category||"").trim();if(!t)continue;const a=o(e.categoryPriority);(!r.has(t)||a<r.get(t))&&r.set(t,a)}return Array.from(r.entries()).sort((e,t)=>e[1]-t[1]||e[0].localeCompare(t[0])).map(([e])=>e)},[i]);return s.jsxs(m.div,{className:"container mx-auto px-4 py-8",variants:S,initial:"initial",animate:"animate",exit:"exit",children:[s.jsxs(m.div,{className:"mb-6 space-y-2",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.15},children:[s.jsx("h1",{className:"text-3xl font-bold",children:d?"Seller Hub Products":"MST Blockchain Collection"}),s.jsx("p",{className:"text-sm text-slate-500",children:d?"Browse categories curated by our verified sellers.":"Official MST Blockchain merchandise organised by category."})]}),n&&s.jsx("div",{className:"py-6 text-center text-sm text-slate-500",children:"Loading products..."}),l&&!n&&s.jsx("div",{className:"py-6 text-center text-sm text-red-500",children:l}),!n&&!l&&i.length===0&&s.jsx("div",{className:"py-6 text-center text-sm text-slate-500",children:d?"Seller listings have not been published yet.":"MST products are coming soon. Check back shortly!"}),!n&&!l&&i.length>0&&s.jsx("div",{className:"space-y-8",children:f.map(r=>{const o=i.filter(e=>(e.category||"").trim()===r).sort((e,t)=>{const a=P=>{const p=String(P||"").trim().toUpperCase();if(/^P\d{1,2}$/.test(p))return parseInt(p.slice(1),10);const h=parseInt(p.replace(/[^0-9]/g,""),10);return Number.isNaN(h)?99:h};return a(e.categoryPriority)-a(t.categoryPriority)});return o.length?s.jsxs("section",{className:"space-y-3",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:r}),s.jsx(m.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",variants:b,initial:"hidden",animate:"show",children:o.map(e=>s.jsx(m.div,{variants:C,children:s.jsx(N,{product:e,variant:d?"seller":void 0})},e.id))})]},r):null})})]})};export{L as default};
