import{r as n,j as e,m as x}from"./vendor-2d1PFKo4.js";import{I as F,u as R,k as I,L as w,a6 as K}from"./index-Bpx0OnSg.js";import{E as g,s as $}from"./validators-C0nLAwdN.js";import{p as z,d as A,c as H}from"./animations-CMxtCVje.js";import{E as j}from"./eye-DjBlpBi-.js";import"./react-BzrpNAyj.js";const q=()=>{const[a,p]=n.useState({username:"",email:"",mobile:"",password:"",confirmPassword:""}),[c,v]=n.useState(!1),[u,N]=n.useState(!1),[r,f]=n.useState({}),{signup:k}=F(),P=R(),S=I(),C=n.useRef(null),h=n.useRef(null),E=n.useRef(null),b=n.useRef(null),y=n.useRef(null),m=s=>{const{name:t,value:o}=s.target;p(i=>({...i,[t]:o}))},l=(s,t)=>{var o;s.key==="Enter"&&(s.preventDefault(),(o=t==null?void 0:t.current)==null||o.focus())},D=async s=>{var o;s.preventDefault();const{error:t}=$.validate(a,{abortEarly:!1});if(t){const i={};t.details.forEach(d=>{i[d.path[0]]=d.message}),f(i);return}f({});try{await k({name:a.username,username:a.username,email:a.email,mobile:a.mobile,password:a.password}),P("/verify-email",{state:{email:a.email,from:((o=S.state)==null?void 0:o.from)||null}})}catch(i){const d=i.message||"Failed to create account.";K.error(d,{autoClose:1e3})}};return e.jsx(x.div,{className:"container mx-auto px-4 pt-5 pb-5 flex justify-center",variants:z,initial:"initial",animate:"animate",exit:"exit",children:e.jsxs(x.div,{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md border",variants:A,initial:"initial",animate:"animate",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:"Create an Account"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("input",{type:"text",name:"username",id:"username",value:a.username,onChange:m,onKeyDown:s=>l(s,h),ref:C,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.username?"border-red-500":"border-gray-300"}`}),r.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.username})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",id:"email",value:a.email,onChange:m,onKeyDown:s=>l(s,E),ref:h,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.email?"border-red-500":"border-gray-300"}`}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile",className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("span",{className:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-50 px-3 text-sm text-gray-500",children:"+91"}),e.jsx("input",{type:"tel",name:"mobile",id:"mobile",value:a.mobile,onChange:s=>{const t=s.target.value.replace(/\D/g,"").slice(0,10);p(o=>({...o,mobile:t}))},onKeyDown:s=>l(s,b),className:`block w-full rounded-r-md border px-3 py-2 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.mobile?"border-red-500":"border-gray-300"}`,placeholder:"10-digit mobile",inputMode:"numeric",pattern:"[0-9]*"})]}),r.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:c?"text":"password",name:"password",id:"password",value:a.password,onChange:m,onKeyDown:s=>l(s,y),ref:b,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.password?"border-red-500":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>v(s=>!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":c?"Hide password":"Show password",children:c?e.jsx(g,{size:18}):e.jsx(j,{size:18})})]}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:u?"text":"password",name:"confirmPassword",id:"confirmPassword",value:a.confirmPassword,onChange:m,ref:y,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.confirmPassword?"border-red-500":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>N(s=>!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":u?"Hide confirm password":"Show confirm password",children:u?e.jsx(g,{size:18}):e.jsx(j,{size:18})})]}),r.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),e.jsx("div",{children:e.jsx(x.button,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",variants:H,whileHover:"hover",whileTap:"tap",children:"Sign Up"})})]}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Already have an account?"," ",e.jsx(w,{to:"/login",className:"font-medium text-primary hover:underline",children:"Log in"})]}),e.jsx("p",{className:"text-sm text-center text-gray-600",children:e.jsx(w,{to:"/seller/register",className:"font-medium text-primary hover:underline",children:"Register as Seller"})})]})]})})};export{q as default};
