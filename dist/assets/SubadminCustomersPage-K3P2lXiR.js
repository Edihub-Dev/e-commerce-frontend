import{r as t,j as e,A as y,m as p}from"./vendor-2d1PFKo4.js";import{S as h}from"./SubadminSidebar-qZjJQiuA.js";import{N as S}from"./Navbar-K_t1OsQh.js";import{I as C}from"./index-Bpx0OnSg.js";import{d as R}from"./subadminApi-Cjp4NYtR.js";import{A}from"./AdminUsersTable-44eNCRRk.js";import{R as O}from"./refresh-cw-DQoxs3YL.js";import"./react-BzrpNAyj.js";import"./arrow-left-fjWLrcm4.js";import"./log-out-BEyQjTNl.js";import"./eye-DjBlpBi-.js";import"./trash-2-Chc1geHF.js";import"./shield-check-ZginSkgb.js";import"./shield-alert-l_ssT4iu.js";import"./pencil-line-CoX3LYzN.js";import"./info-GXZN73e0.js";const J=()=>{const{user:a,logout:b}=C(),[g,i]=t.useState(!1),[l,j]=t.useState([]),[N,m]=t.useState(!0),[o,c]=t.useState(!1),[n,x]=t.useState(""),f=async({silent:r}={silent:!1})=>{try{r?c(!0):m(!0);const s=await R(),d=Array.isArray(s)?s.filter(w=>String(w.role).toLowerCase()==="customer"):[];j(d),x("")}catch(s){console.error("Failed to load customers for subadmin",s),x(s.message||"Unable to load customers.")}finally{r?c(!1):m(!1)}};t.useEffect(()=>{f()},[]);const u=t.useMemo(()=>{const r=l.length,s=l.filter(d=>d.isVerified).length;return{total:r,verified:s}},[l]),v=()=>{o||f({silent:!0})};return e.jsx("div",{className:"min-h-screen md:h-screen bg-slate-50 text-slate-900 overflow-x-hidden",children:e.jsxs("div",{className:"flex md:h-screen",children:[e.jsx(h,{active:"Customers",className:"hidden lg:flex lg:w-64 lg:flex-none",onNavigate:()=>i(!1)}),e.jsx(y,{children:g&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 flex lg:hidden",children:[e.jsx(p.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:220,damping:24},className:"bg-white w-72 max-w-sm h-full shadow-xl",children:e.jsx(h,{active:"Customers",className:"flex w-full",onNavigate:()=>i(!1)})}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 bg-black/30","aria-label":"Close sidebar"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(S,{onToggleSidebar:()=>i(r=>!r),activeRange:"All Time",onSelectRange:()=>{},adminName:(a==null?void 0:a.name)||(a==null?void 0:a.username)||"Subadmin",adminRole:"Sub Admin",notifications:{pendingOrders:0,shippedOrders:0,deliveredOrders:0},showRangeSelector:!1,showNotifications:!1,onLogout:b}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-4 py-6 md:px-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Subadmin / Customers"}),e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Customers (View Only)"})]}),e.jsxs("button",{type:"button",onClick:v,disabled:o,className:"inline-flex items-center justify-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-blue-200 hover:text-blue-600 disabled:cursor-not-allowed disabled:opacity-60",children:[e.jsx(O,{size:16,className:o?"animate-spin":void 0}),o?"Refreshing":"Refresh"]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase text-slate-400",children:"Total Customers"}),e.jsx("p",{className:"mt-2 text-2xl font-semibold",children:u.total})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase text-slate-400",children:"Verified Customers"}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-emerald-600",children:u.verified})]})]}),n&&e.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600",children:n}),e.jsx(A,{users:l,isLoading:N,error:n,onUserUpdated:()=>{},enableManagement:!1})]})]})]})})};export{J as default};
