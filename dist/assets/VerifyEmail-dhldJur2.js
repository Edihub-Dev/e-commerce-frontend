import{r as o,j as t,m}from"./vendor-2d1PFKo4.js";import{k as w,u as N,I as E,a6 as c,a9 as k}from"./index-Bpx0OnSg.js";import{p as C,d as V,c as S}from"./animations-CMxtCVje.js";import"./react-BzrpNAyj.js";const F=()=>{const n=w(),y=N(),{verifyEmail:h}=E(),[a,l]=o.useState({email:"",otp:""}),[r,d]=o.useState({}),[u,p]=o.useState(!1),[f,x]=o.useState(!1);o.useEffect(()=>{var i;const e=(i=n.state)==null?void 0:i.email;e&&l(s=>({...s,email:e}))},[n.state]);const b=()=>{const e={};return a.email||(e.email="Email is required"),a.otp?/^[0-9]{6}$/.test(a.otp)||(e.otp="Enter the 6-digit code you received"):e.otp="Verification code is required",d(e),Object.keys(e).length===0},g=async e=>{var i;if(e.preventDefault(),!!b())try{p(!0),await h({email:a.email,otp:a.otp});const s=(i=n.state)==null?void 0:i.from,j=s?`${s.pathname||""}${s.search||""}`:"/";y(j||"/",{replace:!0})}catch(s){c.error(s.message,{autoClose:1e3})}finally{p(!1)}},v=async()=>{if(!a.email){d(e=>({...e,email:"Email is required"}));return}try{x(!0),await k({email:a.email}),c.success("Verification code resent. Check your inbox.",{autoClose:1e3})}catch(e){c.error(e.message,{autoClose:1e3})}finally{x(!1)}};return t.jsx(m.div,{className:"container mx-auto px-4 py-16 flex justify-center",variants:C,initial:"initial",animate:"animate",exit:"exit",children:t.jsxs(m.div,{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md border",variants:V,initial:"initial",animate:"animate",children:[t.jsx("h2",{className:"text-2xl font-bold text-center",children:"Verify your email"}),t.jsx("p",{className:"text-sm text-center text-gray-600",children:"Enter the six-digit code we sent to your email to complete your registration."}),t.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),t.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:e=>l(i=>({...i,email:e.target.value})),className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.email?"border-red-500":"border-gray-300"}`}),r.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700",children:"Verification Code"}),t.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,id:"otp",name:"otp",value:a.otp,onChange:e=>{const i=e.target.value.replace(/[^0-9]/g,"").slice(0,6);l(s=>({...s,otp:i}))},className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm tracking-widest text-center focus:outline-none focus:ring-primary focus:border-primary sm:text-sm ${r.otp?"border-red-500":"border-gray-300"}`}),r.otp&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.otp})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(m.button,{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-70",variants:S,whileHover:"hover",whileTap:"tap",children:u?"Verifying...":"Verify & Continue"}),t.jsx("button",{type:"button",onClick:v,disabled:f,className:"w-full text-sm font-medium text-primary hover:underline disabled:opacity-70",children:f?"Sending...":"Resend code"})]})]})]})})};export{F as default};
